# =================================================================
# NBA Analytics Backend - Environment Configuration  
# =================================================================
# Backend-specific environment variables for the FastAPI server

# =================================================================
# SUPABASE CONFIGURATION
# =================================================================
# Copy these from your main .env file or get from https://supabase.com/

SUPABASE_URL=your_supabase_url_here
VITE_SUPABASE_URL=your_supabase_url_here
SUPABASE_ANON_KEY=your_supabase_anon_key_here
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_KEY=your_supabase_service_key_here

# =================================================================
# API KEYS
# =================================================================

# The Odds API key for live betting odds (get from https://the-odds-api.com/)
ODDS_API_KEY=your_odds_api_key_here

# =================================================================
# ODDS API BUDGET MANAGEMENT
# =================================================================

# Maximum API calls per day (default: 10 for free tier)
ODDS_MAX_CALLS_PER_DAY=10

# Bookmaker allowlist (comma-separated, max 3)
ODDS_BOOKMAKERS_ALLOWLIST=draftkings,fanduel,betmgm

# Sport key for NBA
ODDS_SPORT_KEY=basketball_nba

# Regions to query
ODDS_REGIONS=us

# Minimum change to trigger new snapshot (points or odds)
ODDS_SNAPSHOT_CHANGE_THRESHOLD=0.5

# Maximum hours between snapshots (even if no change)
ODDS_SNAPSHOT_MAX_HOURS=6

# =================================================================
# QUALITY GATES THRESHOLDS
# =================================================================

# Minimum expected value (0.02 = 2%)
MIN_EV=0.02

# Minimum edge probability (0.03 = 3%)
MIN_EDGE_PROB=0.03

# Odds staleness threshold (hours)
ODDS_STALE_HOURS=12

# Stats staleness threshold (hours)
STATS_MAX_AGE_HOURS=24

# Minimum recent games for analysis
MIN_GAMES_RECENT=5

# Minimum player games for availability check
MIN_PLAYER_GAMES_RECENT=3

# Minimum liquidity samples for consensus
MIN_LIQUIDITY_SAMPLES=2

# =================================================================
# NBA API CONFIGURATION
# =================================================================

# Cache TTL for NBA API responses (seconds)
NBA_API_CACHE_TTL_SECONDS=3600

# Stats window (number of games to analyze)
NBA_STATS_WINDOW=10

# =================================================================
# BETTING MODEL CONFIGURATION
# =================================================================

# Home court advantage (points)
HOME_COURT_ADVANTAGE=3.0

# Kelly fraction (0.5 for half Kelly)
KELLY_FRACTION=0.5

# Maximum Kelly stake (0.05 = 5% of bankroll)
MAX_KELLY_STAKE=0.05

# =================================================================
# CONSENSUS LINE CONFIGURATION
# =================================================================

# MAD multiplier for outlier removal
CONSENSUS_OUTLIER_MAD_MULTIPLIER=3.0

# Minimum threshold for outlier detection
CONSENSUS_MIN_OUTLIER_THRESHOLD=0.5

# =================================================================
# SYNC SCHEDULE CONFIGURATION
# =================================================================

# NBA stats sync interval (hours)
SYNC_NBA_STATS_INTERVAL_HOURS=2

# Odds sync interval (minutes)
SYNC_ODDS_INTERVAL_MINUTES=30

# Compute results interval (hours)
COMPUTE_RESULTS_INTERVAL_HOURS=1

# =================================================================
# BACKEND SETTINGS
# =================================================================

# Python environment
PYTHONPATH=/app

# Timezone for scheduled jobs
TZ=America/Chicago

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# CORS origins (comma-separated, * for all)
CORS_ORIGINS=*
