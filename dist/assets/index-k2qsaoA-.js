var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.getPrototypeOf,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=Reflect.get,o=(t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,c=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&o(e,s,t[s]);if(r)for(var s of r(t))i.call(t,s)&&o(e,s,t[s]);return e},d=(e,r)=>t(e,s(r)),u=(e,t,s)=>l(a(e),s,t),h=(e,t,s)=>new Promise((r,a)=>{var n=e=>{try{l(s.next(e))}catch(t){a(t)}},i=e=>{try{l(s.throw(e))}catch(t){a(t)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,i);l((s=s.apply(e,t)).next())});import{r as m,a as p}from"./react-De9qiMg1.js";import{r as g,B as y,U as b,A as f,T as x,S as v,F as w,a as j,b as N,Z as k,E as _,c as S,D as T,C as A,d as P,M as E,e as R,f as O,g as C,h as $,i as z,j as I,P as D,k as L,l as B,m as U,X as F,n as M,o as G,p as W,L as q,q as K,s as V,t as H,u as J}from"./lucide-BadghZnk.js";import{R as Z,L as Y,C as X,X as Q,Y as ee,T as te,a as se,b as re}from"./charts-BPMera8P.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ae,ne,ie={exports:{}},le={};var oe,ce=(ne||(ne=1,ie.exports=function(){if(ae)return le;ae=1;var e=m(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function i(e,s,i){var l,o={},c=null,d=null;for(l in void 0!==i&&(c=""+i),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(d=s.ref),s)r.call(s,l)&&!n.hasOwnProperty(l)&&(o[l]=s[l]);if(e&&e.defaultProps)for(l in s=e.defaultProps)void 0===o[l]&&(o[l]=s[l]);return{$$typeof:t,type:e,key:c,ref:d,props:o,_owner:a.current}}return le.Fragment=s,le.jsx=i,le.jsxs=i,le}()),ie.exports),de={};var ue=function(){if(oe)return de;oe=1;var e=p();return de.createRoot=e.createRoot,de.hydrateRoot=e.hydrateRoot,de}();const he={},me=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(null==s?void 0:s.nonce)||(null==s?void 0:s.getAttribute("nonce"));r=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in he)return;he[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,s)=>{r.addEventListener("load",t),r.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};function pe(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}function ge(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{o(r.next(e))}catch(t){n(t)}}function l(e){try{o(r.throw(e))}catch(t){n(t)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,l)}o((r=r.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;class ye extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class be extends ye{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fe extends ye{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class xe extends ye{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ve,we;(we=ve||(ve={})).Any="any",we.ApNortheast1="ap-northeast-1",we.ApNortheast2="ap-northeast-2",we.ApSouth1="ap-south-1",we.ApSoutheast1="ap-southeast-1",we.ApSoutheast2="ap-southeast-2",we.CaCentral1="ca-central-1",we.EuCentral1="eu-central-1",we.EuWest1="eu-west-1",we.EuWest2="eu-west-2",we.EuWest3="eu-west-3",we.SaEast1="sa-east-1",we.UsEast1="us-east-1",we.UsWest1="us-west-1",we.UsWest2="us-west-2";class je{constructor(e,{headers:t={},customFetch:s,region:r=ve.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ge(this,arguments,void 0,function*(e,t={}){var s;let r,a;try{const{headers:n,method:i,body:l,signal:o,timeout:c}=t;let d={},{region:u}=t;u||(u=this.region);const h=new URL(`${this.url}/${e}`);let m;u&&"any"!==u&&(d["x-region"]=u,h.searchParams.set("forceFunctionRegion",u)),l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)?"undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",m=l):"string"==typeof l?(d["Content-Type"]="text/plain",m=l):"undefined"!=typeof FormData&&l instanceof FormData?m=l:(d["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;let p=o;c&&(a=new AbortController,r=setTimeout(()=>a.abort(),c),o?(p=a.signal,o.addEventListener("abort",()=>a.abort())):p=a.signal);const g=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),n),body:m,signal:p}).catch(e=>{throw new be(e)}),y=g.headers.get("x-relay-error");if(y&&"true"===y)throw new fe(g);if(!g.ok)throw new xe(g);let b,f=(null!==(s=g.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return b="application/json"===f?yield g.json():"application/octet-stream"===f||"application/pdf"===f?yield g.blob():"text/event-stream"===f?g:"multipart/form-data"===f?yield g.formData():yield g.text(),{data:b,error:null,response:g}}catch(n){return{data:null,error:n,response:n instanceof xe||n instanceof fe?n.context:void 0}}finally{r&&clearTimeout(r)}})}}var Ne=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ke=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(s=e.isMaybeSingle)&&void 0!==s&&s,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var s=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(e=>h(this,null,function*(){let t=null,r=null,a=null,n=e.status,i=e.statusText;if(e.ok){var l,o;if("HEAD"!==s.method){var c;const t=yield e.text();""===t||(r="text/csv"===s.headers.get("Accept")||s.headers.get("Accept")&&(null===(c=s.headers.get("Accept"))||void 0===c?void 0:c.includes("application/vnd.pgrst.plan+text"))?t:JSON.parse(t))}const d=null===(l=s.headers.get("Prefer"))||void 0===l?void 0:l.match(/count=(exact|planned|estimated)/),u=null===(o=e.headers.get("content-range"))||void 0===o?void 0:o.split("/");d&&u&&u.length>1&&(a=parseInt(u[1])),s.isMaybeSingle&&"GET"===s.method&&Array.isArray(r)&&(r.length>1?(t={code:"PGRST116",details:`Results contain ${r.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},r=null,a=null,n=406,i="Not Acceptable"):r=1===r.length?r[0]:null)}else{var d;const a=yield e.text();try{t=JSON.parse(a),Array.isArray(t)&&404===e.status&&(r=[],t=null,n=200,i="OK")}catch(u){404===e.status&&""===a?(n=204,i="No Content"):t={message:a}}if(t&&s.isMaybeSingle&&(null==t||null===(d=t.details)||void 0===d?void 0:d.includes("0 rows"))&&(t=null,n=200,i="OK"),t&&s.shouldThrowOnError)throw new Ne(t)}return{error:t,data:r,count:a,status:n,statusText:i}}));return this.shouldThrowOnError||(r=r.catch(e=>{var t;let s="";const r=null==e?void 0:e.cause;if(r){var a,n,i,l;const t=null!==(a=null==r?void 0:r.message)&&void 0!==a?a:"",o=null!==(n=null==r?void 0:r.code)&&void 0!==n?n:"";s=`${null!==(i=null==e?void 0:e.name)&&void 0!==i?i:"FetchError"}: ${null==e?void 0:e.message}`,s+=`\n\nCaused by: ${null!==(l=null==r?void 0:r.name)&&void 0!==l?l:"Error"}: ${t}`,o&&(s+=` (${o})`),(null==r?void 0:r.stack)&&(s+=`\n${r.stack}`)}else{var o;s=null!==(o=null==e?void 0:e.stack)&&void 0!==o?o:""}return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}},_e=class extends ke{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:a=r}={}){const n=a?`${a}.order`:"order",i=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const a=void 0===r?"offset":`${r}.offset`,n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:a=!1,format:n="text"}={}){var i;const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),o=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${o}"; options=${l};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Se=new RegExp("[,()]");var Te=class extends _e{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&Se.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}notIn(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&Se.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`not.in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const n=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}},Ae=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,t){const{head:s=!1,count:r}=null!=t?t:{},a=s?"HEAD":"GET";let n=!1;const i=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new Te({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Te({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:a=!0}={}){var n;if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Te({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}update(e,{count:t}={}){var s;return t&&this.headers.append("Prefer",`count=${t}`),new Te({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new Te({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}},Pe=class e{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ae(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:a}={}){var n;let i;const l=new URL(`${this.url}/rpc/${e}`);let o;s||r?(i=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(i="POST",o=t);const c=new Headers(this.headers);return a&&c.set("Prefer",`count=${a}`),new Te({method:i,url:l,headers:c,schema:this.schemaName,body:o,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}};class Ee{constructor(){}static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,s=parseInt(t.replace(/^v/,"").split(".")[0]);return s>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Re="1.0.0",Oe=Re,Ce=1e4;var $e,ze,Ie,De,Le,Be,Ue,Fe,Me,Ge,We;(ze=$e||($e={}))[ze.connecting=0]="connecting",ze[ze.open=1]="open",ze[ze.closing=2]="closing",ze[ze.closed=3]="closed",(De=Ie||(Ie={})).closed="closed",De.errored="errored",De.joined="joined",De.joining="joining",De.leaving="leaving",(Be=Le||(Le={})).close="phx_close",Be.error="phx_error",Be.join="phx_join",Be.reply="phx_reply",Be.leave="phx_leave",Be.access_token="access_token",(Ue||(Ue={})).websocket="websocket",(Me=Fe||(Fe={})).Connecting="connecting",Me.Open="open",Me.Closing="closing",Me.Closed="closed";class qe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const r=null!==(s=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==s?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var t,s;const r=null!==(s=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==s?s:{},a=(new TextEncoder).encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,t,s){var r,a;const n=e.topic,i=null!==(r=e.ref)&&void 0!==r?r:"",l=null!==(a=e.join_ref)&&void 0!==a?a:"",o=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=0===Object.keys(c).length?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`ref length ${i.length} exceeds maximum of 255`);if(n.length>255)throw new Error(`topic length ${n.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`userEvent length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const u=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+i.length+n.length+o.length+d.length,h=new ArrayBuffer(this.HEADER_LENGTH+u);let m=new DataView(h),p=0;m.setUint8(p++,this.KINDS.userBroadcastPush),m.setUint8(p++,l.length),m.setUint8(p++,i.length),m.setUint8(p++,n.length),m.setUint8(p++,o.length),m.setUint8(p++,d.length),m.setUint8(p++,t),Array.from(l,e=>m.setUint8(p++,e.charCodeAt(0))),Array.from(i,e=>m.setUint8(p++,e.charCodeAt(0))),Array.from(n,e=>m.setUint8(p++,e.charCodeAt(0))),Array.from(o,e=>m.setUint8(p++,e.charCodeAt(0))),Array.from(d,e=>m.setUint8(p++,e.charCodeAt(0)));var g=new Uint8Array(h.byteLength+s.byteLength);return g.set(new Uint8Array(h),0),g.set(new Uint8Array(s),h.byteLength),g.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"==typeof e){const s=JSON.parse(e),[r,a,n,i,l]=s;return t({join_ref:r,ref:a,topic:n,event:i,payload:l})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),r=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,r)}_decodeUserBroadcast(e,t,s){const r=t.getUint8(1),a=t.getUint8(2),n=t.getUint8(3),i=t.getUint8(4);let l=this.HEADER_LENGTH+4;const o=s.decode(e.slice(l,l+r));l+=r;const c=s.decode(e.slice(l,l+a));l+=a;const d=s.decode(e.slice(l,l+n));l+=n;const u=e.slice(l,e.byteLength),h=i===this.JSON_ENCODING?JSON.parse(s.decode(u)):u,m={type:this.BROADCAST_EVENT,event:c,payload:h};return n>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:o,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class Ke{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(We=Ge||(Ge={})).abstime="abstime",We.bool="bool",We.date="date",We.daterange="daterange",We.float4="float4",We.float8="float8",We.int2="int2",We.int4="int4",We.int4range="int4range",We.int8="int8",We.int8range="int8range",We.json="json",We.jsonb="jsonb",We.money="money",We.numeric="numeric",We.oid="oid",We.reltime="reltime",We.text="text",We.time="time",We.timestamp="timestamp",We.timestamptz="timestamptz",We.timetz="timetz",We.tsrange="tsrange",We.tstzrange="tstzrange";const Ve=(e,t,s={})=>{var r;const a=null!==(r=s.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((s,r)=>(s[r]=He(r,e,t,a),s),{}):{}},He=(e,t,s,r)=>{const a=t.find(t=>t.name===e),n=null==a?void 0:a.type,i=s[e];return n&&!r.includes(n)?Je(n,i):Ze(i)},Je=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return et(t,s)}switch(e){case Ge.bool:return Ye(t);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return Xe(t);case Ge.json:case Ge.jsonb:return Qe(t);case Ge.timestamp:return tt(t);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:default:return Ze(t)}},Ze=e=>e,Ye=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Xe=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Qe=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},et=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const n=e.slice(1,s);try{r=JSON.parse("["+n+"]")}catch(a){r=n?n.split(","):[]}return r.map(e=>Je(t,e))}return e},tt=e=>"string"==typeof e?e.replace(" ","T"):e,st=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class rt{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var at,nt,it,lt,ot,ct,dt,ut;(nt=at||(at={})).SYNC="sync",nt.JOIN="join",nt.LEAVE="leave";class ht{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ht.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=ht.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=ht.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const a=this.cloneDeep(e),n=this.transformState(t),i={},l={};return this.map(a,(e,t)=>{n[e]||(l[e]=t)}),this.map(n,(e,t)=>{const s=a[e];if(s){const r=t.map(e=>e.presence_ref),a=s.map(e=>e.presence_ref),n=t.filter(e=>a.indexOf(e.presence_ref)<0),o=s.filter(e=>r.indexOf(e.presence_ref)<0);n.length>0&&(i[e]=n),o.length>0&&(l[e]=o)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:l},s,r)}static syncDiff(e,t,s,r){const{joins:a,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const n=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),n.length>0){const s=e[t].map(e=>e.presence_ref),r=n.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,n,r)}),this.map(n,(t,s)=>{let a=e[t];if(!a)return;const n=s.map(e=>e.presence_ref);a=a.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,s),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(lt=it||(it={})).ALL="*",lt.INSERT="INSERT",lt.UPDATE="UPDATE",lt.DELETE="DELETE",(ct=ot||(ot={})).BROADCAST="broadcast",ct.PRESENCE="presence",ct.POSTGRES_CHANGES="postgres_changes",ct.SYSTEM="system",(ut=dt||(dt={})).SUBSCRIBED="SUBSCRIBED",ut.TIMED_OUT="TIMED_OUT",ut.CLOSED="CLOSED",ut.CHANNEL_ERROR="CHANNEL_ERROR";class mt{constructor(e,t={config:{}},s){var r,a;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new rt(this,Le.join,this.params,this.timeout),this.rejoinTimer=new Ke(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ie.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Le.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ht(this),this.broadcastEndpointURL=st(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(a=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ie.closed){const{config:{broadcast:n,presence:i,private:l}}=this.params,o=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[ot.PRESENCE]&&this.bindings[ot.PRESENCE].length>0||!0===(null===(a=this.params.config.presence)||void 0===a?void 0:a.enabled),d={},u={broadcast:n,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:o,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(dt.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(dt.CLOSED)),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",t=>h(this,[t],function*({postgres_changes:t}){var s;if(this.socket._isManualToken()||this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,n=[];for(let s=0;s<a;s++){const a=r[s],{filter:{event:i,schema:l,table:o,filter:c}}=a,d=t&&t[s];if(!(d&&d.event===i&&mt.isFilterValueEqual(d.schema,l)&&mt.isFilterValueEqual(d.table,o)&&mt.isFilterValueEqual(d.filter,c)))return this.unsubscribe(),this.state=Ie.errored,void(null==e||e(dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=n,void(e&&e(dt.SUBSCRIBED))}null==e||e(dt.SUBSCRIBED)})).receive("error",t=>{this.state=Ie.errored,null==e||e(dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(e){return h(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,s){return this.state===Ie.joined&&e===ot.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>h(this,null,function*(){return yield this.subscribe()}))),this._on(e,t,s)}httpSend(e,t){return h(this,arguments,function*(e,t,s={}){var r;if(null==t)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const n={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=yield this._fetchWithTimeout(this.broadcastEndpointURL,n,null!==(r=s.timeout)&&void 0!==r?r:this.timeout);if(202===i.status)return{success:!0};let l=i.statusText;try{const e=yield i.json();l=e.error||e.message||l}catch(o){}return Promise.reject(new Error(l))})}send(e){return h(this,arguments,function*(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,a,n;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===n?void 0:n.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:n,payload:i}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})};try{const e=yield this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return yield null===(r=e.body)||void 0===r?void 0:r.cancel(),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ie.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Le.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new rt(this,Le.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ie.closed,this.bindings={}}_fetchWithTimeout(e,t,s){return h(this,null,function*(){const r=new AbortController,a=setTimeout(()=>r.abort(),s),n=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),n})}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new rt(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,a;const n=e.toLocaleLowerCase(),{close:i,error:l,leave:o,join:c}=Le;if(s&&[i,l,o,c].indexOf(n)>=0&&s!==this._joinRef())return;let d=this._onMessage(n,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===n}).map(e=>e.callback(d,s)):null===(a=this.bindings[n])||void 0===a||a.filter(e=>{var s,r,a,i,l,o;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return n&&(null===(r=t.ids)||void 0===r?void 0:r.includes(n))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const s=null===(l=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===l?void 0:l.toLocaleLowerCase();return"*"===s||s===(null===(o=null==t?void 0:t.event)||void 0===o?void 0:o.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:r,type:a,errors:n}=e,i={schema:t,table:s,commit_timestamp:r,eventType:a,new:{},old:{},errors:n};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===Ie.closed}_isJoined(){return this.state===Ie.joined}_isJoining(){return this.state===Ie.joining}_isLeaving(){return this.state===Ie.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&mt.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}static isFilterValueEqual(e,t){return(null!=e?e:void 0)===(null!=t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Le.close,{},e)}_onError(e){this._on(Le.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ie.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Ve(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Ve(e.columns,e.old_record)),t}}const pt=()=>{},gt=25e3,yt=10,bt=100,ft=[1e3,2e3,5e3,1e4];class xt{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ce,this.transport=null,this.heartbeatIntervalMs=gt,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pt,this.ref=0,this.reconnectTimer=null,this.vsn=Oe,this.logger=pt,this.conn=null,this.sendBuffer=[],this.serializer=new qe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ue.websocket}`,this.httpEndpoint=st(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ee.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(e){return h(this,null,function*(){const t=yield e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t})}removeAllChannels(){return h(this,null,function*(){const e=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e})}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case $e.connecting:return Fe.Connecting;case $e.open:return Fe.Open;case $e.closing:return Fe.Closing;default:return Fe.Closed}}isConnected(){return this.connectionState()===Fe.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new mt(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:a}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${a})`,r),this.isConnected()?n():this.sendBuffer.push(n)}setAuth(e=null){return h(this,null,function*(){this._authPromise=this._performAuth(e);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return h(this,null,function*(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},bt)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}})}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:a}=e,n=a?`(${a})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${s} ${n}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===$e.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$e.open||this.conn.readyState===$e.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Le.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}_performAuth(e=null){return h(this,null,function*(){let t,s=!1;if(e)t=e,s=!0;else if(this.accessToken)try{t=yield this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),t=this.accessTokenValue}else t=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.89.0"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(Le.access_token,{access_token:t})}))})}_waitForAuthIfNeeded(){return h(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Ke(()=>h(this,null,function*(){setTimeout(()=>h(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),yt)}),this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,a,n,i,l,o,c,d,u,h;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:Ce,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:gt,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(n=null==e?void 0:e.accessToken)&&void 0!==n?n:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:pt,this.vsn=null!==(l=null==e?void 0:e.vsn)&&void 0!==l?l:Oe,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(o=null==e?void 0:e.reconnectAfterMs)&&void 0!==o?o:e=>ft[e-1]||1e4,this.vsn){case Re:this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(d=null==e?void 0:e.decode)&&void 0!==d?d:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(u=null==e?void 0:e.encode)&&void 0!==u?u:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null==e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}var vt=class extends Error{constructor(e,t){var s;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===(null==(s=t.icebergType)?void 0:s.includes("CommitState"))}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function wt(e){var t;const s=null!=(t=e.fetchImpl)?t:globalThis.fetch;return{request(t){return h(this,arguments,function*({method:t,path:r,query:a,body:n,headers:i}){var l;const o=function(e,t,s){const r=new URL(t,e);if(s)for(const[a,n]of Object.entries(s))void 0!==n&&r.searchParams.set(a,n);return r.toString()}(e.baseUrl,r,a),d=yield function(e){return h(this,null,function*(){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?yield e.getHeaders():{}:{}})}(e.auth),u=yield s(o,{method:t,headers:c(c(c({},n?{"Content-Type":"application/json"}:{}),d),i),body:n?JSON.stringify(n):void 0}),m=yield u.text(),p=(u.headers.get("content-type")||"").includes("application/json"),g=p&&m?JSON.parse(m):m;if(!u.ok){const e=p?g:void 0,t=null==e?void 0:e.error;throw new vt(null!=(l=null==t?void 0:t.message)?l:`Request failed with status ${u.status}`,{status:u.status,icebergType:null==t?void 0:t.type,icebergCode:null==t?void 0:t.code,details:e})}return{status:u.status,headers:u.headers,data:g}})}}}function jt(e){return e.join("")}var Nt=class{constructor(e,t=""){this.client=e,this.prefix=t}listNamespaces(e){return h(this,null,function*(){const t=e?{parent:jt(e.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))})}createNamespace(e,t){return h(this,null,function*(){const s={namespace:e.namespace,properties:null==t?void 0:t.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data})}dropNamespace(e){return h(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jt(e.namespace)}`})})}loadNamespaceMetadata(e){return h(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jt(e.namespace)}`})).data.properties}})}namespaceExists(e){return h(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jt(e.namespace)}`}),!0}catch(t){if(t instanceof vt&&404===t.status)return!1;throw t}})}createNamespaceIfNotExists(e,t){return h(this,null,function*(){try{return yield this.createNamespace(e,t)}catch(s){if(s instanceof vt&&409===s.status)return;throw s}})}};function kt(e){return e.join("")}var _t=class{constructor(e,t="",s){this.client=e,this.prefix=t,this.accessDelegation=s}listTables(e){return h(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${kt(e.namespace)}/tables`})).data.identifiers})}createTable(e,t){return h(this,null,function*(){const s={};this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${kt(e.namespace)}/tables`,body:t,headers:s})).data.metadata})}updateTable(e,t){return h(this,null,function*(){const s=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${kt(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}})}dropTable(e,t){return h(this,null,function*(){var s;yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${kt(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(null!=(s=null==t?void 0:t.purge)&&s)}})})}loadTable(e){return h(this,null,function*(){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${kt(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata})}tableExists(e){return h(this,null,function*(){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${kt(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(s){if(s instanceof vt&&404===s.status)return!1;throw s}})}createTableIfNotExists(e,t){return h(this,null,function*(){try{return yield this.createTable(e,t)}catch(s){if(s instanceof vt&&409===s.status)return yield this.loadTable({namespace:e.namespace,name:t.name});throw s}})}},St=class{constructor(e){var t;let s="v1";e.catalogName&&(s+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=wt({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=null==(t=e.accessDelegation)?void 0:t.join(","),this.namespaceOps=new Nt(this.client,s),this.tableOps=new _t(this.client,s,this.accessDelegation)}listNamespaces(e){return h(this,null,function*(){return this.namespaceOps.listNamespaces(e)})}createNamespace(e,t){return h(this,null,function*(){return this.namespaceOps.createNamespace(e,t)})}dropNamespace(e){return h(this,null,function*(){yield this.namespaceOps.dropNamespace(e)})}loadNamespaceMetadata(e){return h(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(e)})}listTables(e){return h(this,null,function*(){return this.tableOps.listTables(e)})}createTable(e,t){return h(this,null,function*(){return this.tableOps.createTable(e,t)})}updateTable(e,t){return h(this,null,function*(){return this.tableOps.updateTable(e,t)})}dropTable(e,t){return h(this,null,function*(){yield this.tableOps.dropTable(e,t)})}loadTable(e){return h(this,null,function*(){return this.tableOps.loadTable(e)})}namespaceExists(e){return h(this,null,function*(){return this.namespaceOps.namespaceExists(e)})}tableExists(e){return h(this,null,function*(){return this.tableOps.tableExists(e)})}createNamespaceIfNotExists(e,t){return h(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(e,t)})}createTableIfNotExists(e,t){return h(this,null,function*(){return this.tableOps.createTableIfNotExists(e,t)})}},Tt=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function At(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}var Pt=class extends Tt{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Et=class extends Tt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Rt=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Ot=e=>{if(Array.isArray(e))return e.map(e=>Ot(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=Ot(s)}),t};function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e){var t=function(e,t){if("object"!=Ct(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t);if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ct(t)?t:t+""}function zt(e,t,s){return(t=$t(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function It(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function Dt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?It(Object(s),!0).forEach(function(t){zt(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):It(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}const Lt=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},Bt=(e,t,s)=>h(null,null,function*(){e instanceof(yield Response)&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const r=e.status||500,a=(null==s?void 0:s.statusCode)||r+"";t(new Pt(Lt(s),r,a))}).catch(e=>{t(new Et(Lt(e),e))}):t(new Et(Lt(e),e))}),Ut=(e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Dt({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Dt(Dt({},a),s)):a};function Ft(e,t,s,r,a,n){return h(this,null,function*(){return new Promise((i,l)=>{e(s,Ut(t,r,a,n)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Bt(e,l,r))})})}function Mt(e,t,s,r){return h(this,null,function*(){return Ft(e,"GET",t,s,r)})}function Gt(e,t,s,r,a){return h(this,null,function*(){return Ft(e,"POST",t,r,a,s)})}function Wt(e,t,s,r,a){return h(this,null,function*(){return Ft(e,"PUT",t,r,a,s)})}function qt(e,t,s,r,a){return h(this,null,function*(){return Ft(e,"DELETE",t,r,a,s)})}var Kt=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return h(this,null,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}})}};let Vt;Vt=Symbol.toStringTag;var Ht=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Vt]="BlobDownloadBuilder",this.promise=null}asStream(){return new Kt(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return h(this,null,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}})}};const Jt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Yt=class{constructor(e,t={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=Rt(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,r){return h(this,null,function*(){var a=this;try{let n;const i=Dt(Dt({},Zt),r);let l=Dt(Dt({},a.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const o=i.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(n=new FormData,n.append("cacheControl",i.cacheControl),o&&n.append("metadata",a.encodeMetadata(o)),n.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(n=s,n.has("cacheControl")||n.append("cacheControl",i.cacheControl),o&&!n.has("metadata")&&n.append("metadata",a.encodeMetadata(o))):(n=s,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,o&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(o))),("undefined"!=typeof ReadableStream&&n instanceof ReadableStream||n&&"object"==typeof n&&"pipe"in n&&"function"==typeof n.pipe)&&!i.duplex&&(i.duplex="half")),(null==r?void 0:r.headers)&&(l=Dt(Dt({},l),r.headers));const c=a._removeEmptyFolders(t),d=a._getFinalPath(c),u=yield("PUT"==e?Wt:Gt)(a.fetch,`${a.url}/object/${d}`,n,Dt({headers:l},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:c,id:u.Id,fullPath:u.Key},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}upload(e,t,s){return h(this,null,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return h(this,null,function*(){var a=this;const n=a._removeEmptyFolders(e),i=a._getFinalPath(n),l=new URL(a.url+`/object/upload/sign/${i}`);l.searchParams.set("token",t);try{let e;const t=Dt({upsert:Zt.upsert},r),i=Dt(Dt({},a.headers),{"x-upsert":String(t.upsert)});return"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType),{data:{path:n,fullPath:(yield Wt(a.fetch,l.toString(),e,{headers:i})).Key},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(At(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return h(this,null,function*(){var s=this;try{let r=s._getFinalPath(e);const a=Dt({},s.headers);(null==t?void 0:t.upsert)&&(a["x-upsert"]="true");const n=yield Gt(s.fetch,`${s.url}/object/upload/sign/${r}`,{},{headers:a}),i=new URL(s.url+n.url),l=i.searchParams.get("token");if(!l)throw new Tt("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}update(e,t,s){return h(this,null,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return h(this,null,function*(){var r=this;try{return{data:yield Gt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}copy(e,t,s){return h(this,null,function*(){var r=this;try{return{data:{path:(yield Gt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:r.headers})).Key},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return h(this,null,function*(){var r=this;try{let a=r._getFinalPath(e),n=yield Gt(r.fetch,`${r.url}/object/sign/${a}`,Dt({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:r.headers});const i=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return n={signedUrl:encodeURI(`${r.url}${n.signedURL}${i}`)},{data:n,error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return h(this,null,function*(){var r=this;try{const a=yield Gt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:a.map(e=>Dt(Dt({},e),{},{signedUrl:e.signedURL?encodeURI(`${r.url}${e.signedURL}${n}`):null})),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}download(e,t){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"",n=this._getFinalPath(e);return new Ht(()=>Mt(this.fetch,`${this.url}/${s}/${n}${a}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return h(this,null,function*(){var t=this;const s=t._getFinalPath(e);try{return{data:Ot(yield Mt(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}exists(e){return h(this,null,function*(){var t=this;const s=t._getFinalPath(e);try{return yield function(e,t,s,r){return h(this,null,function*(){return Ft(e,"HEAD",t,Dt(Dt({},s),{},{noResolveJson:!0}),r)})}(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(At(r)&&r instanceof Et){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let l=r.join("&");return""!==l&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${s}${l}`)}}}remove(e){return h(this,null,function*(){var t=this;try{return{data:yield qt(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}})}list(e,t,s){return h(this,null,function*(){var r=this;try{const a=Dt(Dt(Dt({},Jt),t),{},{prefix:e||""});return{data:yield Gt(r.fetch,`${r.url}/object/list/${r.bucketId}`,a,{headers:r.headers},s),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}listV2(e,t){return h(this,null,function*(){var s=this;try{const r=Dt({},e);return{data:yield Gt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,r,{headers:s.headers},t),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Xt="2.89.0",Qt={"X-Client-Info":`storage-js/${Xt}`};var es=class{constructor(e,t={},s,r){this.shouldThrowOnError=!1;const a=new URL(e);(null==r?void 0:r.useNewHostname)&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Dt(Dt({},Qt),t),this.fetch=Rt(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return h(this,null,function*(){var t=this;try{const s=t.listBucketOptionsToQueryString(e);return{data:yield Mt(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}})}getBucket(e){return h(this,null,function*(){var t=this;try{return{data:yield Mt(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}})}createBucket(e){return h(this,arguments,function*(e,t={public:!1}){var s=this;try{return{data:yield Gt(s.fetch,`${s.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return h(this,null,function*(){var s=this;try{return{data:yield Wt(s.fetch,`${s.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}emptyBucket(e){return h(this,null,function*(){var t=this;try{return{data:yield Gt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}})}deleteBucket(e){return h(this,null,function*(){var t=this;try{return{data:yield qt(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},ts=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Dt(Dt({},Qt),t),this.fetch=Rt(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return h(this,null,function*(){var t=this;try{return{data:yield Gt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}})}listBuckets(e){return h(this,null,function*(){var t=this;try{const s=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&s.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&s.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&s.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&s.set("search",e.search);const r=s.toString(),a=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:yield Mt(t.fetch,a,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}})}deleteBucket(e){return h(this,null,function*(){var t=this;try{return{data:yield qt(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}})}from(e){var t=this;if(!(e=>!(!e||"string"!=typeof e)&&!(0===e.length||e.length>100)&&e.trim()===e&&!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e))(e))throw new Tt("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new St({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>h(this,null,function*(){return t.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(s,{get(e,t){const s=e[t];return"function"!=typeof s?s:(...t)=>h(null,null,function*(){try{return{data:yield s.apply(e,t),error:null}}catch(a){if(r)throw a;return{data:null,error:a}}})}})}};const ss={"X-Client-Info":`storage-js/${Xt}`,"Content-Type":"application/json"};var rs=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function as(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}var ns=class extends rs{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},is=class extends rs{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const ls=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),os=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cs=(e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Dt({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,Dt(Dt({},a),s)):a};function ds(e,t,s,r,a,n){return h(this,null,function*(){return new Promise((i,l)=>{e(s,cs(t,r,a,n)).then(e=>{if(!e.ok)throw e;if(null==r?void 0:r.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>((e,t,s)=>h(null,null,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==s?void 0:s.noResolveJson)){const s=e.status||500,r=e;if("function"==typeof r.json)r.json().then(e=>{const r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||s+"";t(new ns(os(e),s,r))}).catch(()=>{const e=s+"";t(new ns(r.statusText||`HTTP ${s} error`,s,e))});else{const e=s+"";t(new ns(r.statusText||`HTTP ${s} error`,s,e))}}else t(new is(os(e),e))}))(e,l,r))})})}function us(e,t,s,r,a){return h(this,null,function*(){return ds(e,"POST",t,r,a,s)})}var hs=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Dt(Dt({},ss),t),this.fetch=ls(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return h(this,null,function*(){var t=this;try{return{data:(yield us(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers}))||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}getIndex(e,t){return h(this,null,function*(){var s=this;try{return{data:yield us(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:s.headers}),error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(as(r))return{data:null,error:r};throw r}})}listIndexes(e){return h(this,null,function*(){var t=this;try{return{data:yield us(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}deleteIndex(e,t){return h(this,null,function*(){var s=this;try{return{data:(yield us(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:s.headers}))||{},error:null}}catch(r){if(s.shouldThrowOnError)throw r;if(as(r))return{data:null,error:r};throw r}})}},ms=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Dt(Dt({},ss),t),this.fetch=ls(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return h(this,null,function*(){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield us(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers}))||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}getVectors(e){return h(this,null,function*(){var t=this;try{return{data:yield us(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}listVectors(e){return h(this,null,function*(){var t=this;try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield us(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}queryVectors(e){return h(this,null,function*(){var t=this;try{return{data:yield us(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}deleteVectors(e){return h(this,null,function*(){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield us(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers}))||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}},ps=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Dt(Dt({},ss),t),this.fetch=ls(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return h(this,null,function*(){var t=this;try{return{data:(yield us(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers}))||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}getBucket(e){return h(this,null,function*(){var t=this;try{return{data:yield us(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}listBuckets(){return h(this,arguments,function*(e={}){var t=this;try{return{data:yield us(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}deleteBucket(e){return h(this,null,function*(){var t=this;try{return{data:(yield us(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers}))||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(as(s))return{data:null,error:s};throw s}})}},gs=class e extends ps{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new ys(this.url,this.headers,e,this.fetch)}createBucket(t){return h(this,null,function*(){return(()=>u(e.prototype,this,"createBucket"))().call(this,t)})}getBucket(t){return h(this,null,function*(){return(()=>u(e.prototype,this,"getBucket"))().call(this,t)})}listBuckets(){return h(this,arguments,function*(t={}){return(()=>u(e.prototype,this,"listBuckets"))().call(this,t)})}deleteBucket(t){return h(this,null,function*(){return(()=>u(e.prototype,this,"deleteBucket"))().call(this,t)})}},ys=class e extends hs{constructor(e,t,s,r){super(e,t,r),this.vectorBucketName=s}createIndex(t){return h(this,null,function*(){return(()=>u(e.prototype,this,"createIndex"))().call(this,Dt(Dt({},t),{},{vectorBucketName:this.vectorBucketName}))})}listIndexes(){return h(this,arguments,function*(t={}){return(()=>u(e.prototype,this,"listIndexes"))().call(this,Dt(Dt({},t),{},{vectorBucketName:this.vectorBucketName}))})}getIndex(t){return h(this,null,function*(){return(()=>u(e.prototype,this,"getIndex"))().call(this,this.vectorBucketName,t)})}deleteIndex(t){return h(this,null,function*(){return(()=>u(e.prototype,this,"deleteIndex"))().call(this,this.vectorBucketName,t)})}index(e){return new bs(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},bs=class e extends ms{constructor(e,t,s,r,a){super(e,t,a),this.vectorBucketName=s,this.indexName=r}putVectors(t){return h(this,null,function*(){var s=this;return(()=>u(e.prototype,this,"putVectors"))().call(s,Dt(Dt({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))})}getVectors(t){return h(this,null,function*(){var s=this;return(()=>u(e.prototype,this,"getVectors"))().call(s,Dt(Dt({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))})}listVectors(){return h(this,arguments,function*(t={}){var s=this;return(()=>u(e.prototype,this,"listVectors"))().call(s,Dt(Dt({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))})}queryVectors(t){return h(this,null,function*(){var s=this;return(()=>u(e.prototype,this,"queryVectors"))().call(s,Dt(Dt({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))})}deleteVectors(t){return h(this,null,function*(){var s=this;return(()=>u(e.prototype,this,"deleteVectors"))().call(s,Dt(Dt({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))})}},fs=class extends es{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new Yt(this.url,this.headers,e,this.fetch)}get vectors(){return new gs(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ts(this.url+"/iceberg",this.headers,this.fetch)}};const xs="2.89.0",vs=3e4,ws=9e4,js={"X-Client-Info":`gotrue-js/${xs}`},Ns="X-Supabase-Api-Version",ks={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},_s=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ss extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Ts(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class As extends Ss{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class Ps extends Ss{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Es extends Ss{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class Rs extends Es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Os extends Es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cs extends Es{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $s extends Es{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zs extends Es{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Is extends Es{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ds extends Es{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ls(e){return Ts(e)&&"AuthRetryableFetchError"===e.name}class Bs extends Es{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Us extends Es{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ms=" \t\n\r=".split(""),Gs=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ms.length;t+=1)e[Ms[t].charCodeAt(0)]=-2;for(let t=0;t<Fs.length;t+=1)e[Fs[t].charCodeAt(0)]=t;return e})();function Ws(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Fs[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(Fs[e]),t.queuedBits-=6}}function qs(e,t,s){const r=Gs[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Ks(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},n=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let i=0;i<e.length;i+=1)qs(e.charCodeAt(i),a,n);return t.join("")}function Vs(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Hs(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)qs(e.charCodeAt(a),s,r);return new Uint8Array(t)}function Js(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Vs(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Zs(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>Ws(e,s,r)),Ws(null,s,r),t.join("")}const Ys=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Xs={tested:!1,writable:!1},Qs=()=>{if(!Ys())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Xs.tested)return Xs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Xs.tested=!0,Xs.writable=!0}catch(t){Xs.tested=!0,Xs.writable=!1}return Xs.writable};const er=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),tr=(e,t,s)=>h(null,null,function*(){yield e.setItem(t,JSON.stringify(s))}),sr=(e,t)=>h(null,null,function*(){const s=yield e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}}),rr=(e,t)=>h(null,null,function*(){yield e.removeItem(t)});class ar{constructor(){this.promise=new ar.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function nr(e){const t=e.split(".");if(3!==t.length)throw new Us("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!_s.test(t[s]))throw new Us("JWT not in base64url format");return{header:JSON.parse(Ks(t[0])),payload:JSON.parse(Ks(t[1])),signature:Hs(t[2]),raw:{header:t[0],payload:t[1]}}}function ir(e){return("0"+e.toString(16)).substr(-2)}function lr(e){return h(this,null,function*(){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=yield function(e){return h(this,null,function*(){const t=(new TextEncoder).encode(e),s=yield crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")})}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function or(e,t,s=!1){return h(this,null,function*(){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,ir).join("")}();let a=r;s&&(a+="/PASSWORD_RECOVERY"),yield tr(e,`${t}-code-verifier`,a);const n=yield lr(r);return[n,r===n?"plain":"s256"]})}ar.promiseConstructor=Promise;const cr=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const dr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ur(e){if(!dr.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hr(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mr(e){return JSON.parse(JSON.stringify(e))}const pr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gr=[502,503,504];function yr(e){return h(this,null,function*(){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new Ds(pr(e),0);if(gr.includes(e.status))throw new Ds(pr(e),e.status);let r,a;try{r=yield e.json()}catch(i){throw new Ps(pr(i),i)}const n=function(e){const t=e.headers.get(Ns);if(!t)return null;if(!t.match(cr))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(n&&n.getTime()>=ks.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new Bs(pr(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new Rs}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Bs(pr(r),e.status,r.weak_password.reasons);throw new As(pr(r),e.status||500,a)})}function br(e,t,s,r){return h(this,null,function*(){var a;const n=Object.assign({},null==r?void 0:r.headers);n[Ns]||(n[Ns]=ks.name),(null==r?void 0:r.jwt)&&(n.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",o=yield function(e,t,s,r,a,n){return h(this,null,function*(){const i=((e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))})(t,r,a,n);let l;try{l=yield e(s,Object.assign({},i))}catch(o){throw console.error(o),new Ds(pr(o),0)}if(l.ok||(yield yr(l)),null==r?void 0:r.noResolveJson)return l;try{return yield l.json()}catch(o){yield yr(o)}})}(e,t,s+l,{headers:n,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(o):{data:Object.assign({},o),error:null}})}function fr(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function xr(e){const t=fr(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function vr(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function wr(e){return{data:e,error:null}}function jr(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n}=e,i=pe(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n},user:Object.assign({},i)},error:null}}function Nr(e){return e}const kr=["global","local","others"];class _r{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=er(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(e){return h(this,arguments,function*(e,t=kr[0]){if(kr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kr.join(", ")}`);try{return yield br(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ts(s))return{data:null,error:s};throw s}})}inviteUserByEmail(e){return h(this,arguments,function*(e,t={}){try{return yield br(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:vr})}catch(s){if(Ts(s))return{data:{user:null},error:s};throw s}})}generateLink(e){return h(this,null,function*(){try{const{options:t}=e,s=pe(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),yield br(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:jr,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Ts(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return h(this,null,function*(){try{return yield br(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:vr})}catch(t){if(Ts(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return h(this,null,function*(){var t,s,r,a,n,i,l;try{const o={nextPage:null,lastPage:0,total:0},c=yield br(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:Nr});if(c.error)throw c.error;const d=yield c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,h=null!==(l=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==l?l:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);o[`${s}Page`]=t}),o.total=parseInt(u)),{data:Object.assign(Object.assign({},d),o),error:null}}catch(o){if(Ts(o))return{data:{users:[]},error:o};throw o}})}getUserById(e){return h(this,null,function*(){ur(e);try{return yield br(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:vr})}catch(t){if(Ts(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return h(this,null,function*(){ur(e);try{return yield br(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:vr})}catch(s){if(Ts(s))return{data:{user:null},error:s};throw s}})}deleteUser(e,t=!1){return h(this,null,function*(){ur(e);try{return yield br(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:vr})}catch(s){if(Ts(s))return{data:{user:null},error:s};throw s}})}_listFactors(e){return h(this,null,function*(){ur(e.userId);try{const{data:t,error:s}=yield br(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(Ts(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return h(this,null,function*(){ur(e.userId),ur(e.id);try{return{data:yield br(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ts(t))return{data:null,error:t};throw t}})}_listOAuthClients(e){return h(this,null,function*(){var t,s,r,a,n,i,l;try{const o={nextPage:null,lastPage:0,total:0},c=yield br(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:Nr});if(c.error)throw c.error;const d=yield c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,h=null!==(l=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==l?l:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);o[`${s}Page`]=t}),o.total=parseInt(u)),{data:Object.assign(Object.assign({},d),o),error:null}}catch(o){if(Ts(o))return{data:{clients:[]},error:o};throw o}})}_createOAuthClient(e){return h(this,null,function*(){try{return yield br(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Ts(t))return{data:null,error:t};throw t}})}_getOAuthClient(e){return h(this,null,function*(){try{return yield br(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Ts(t))return{data:null,error:t};throw t}})}_updateOAuthClient(e,t){return h(this,null,function*(){try{return yield br(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(s){if(Ts(s))return{data:null,error:s};throw s}})}_deleteOAuthClient(e){return h(this,null,function*(){try{return yield br(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Ts(t))return{data:null,error:t};throw t}})}_regenerateOAuthClientSecret(e){return h(this,null,function*(){try{return yield br(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(Ts(t))return{data:null,error:t};throw t}})}}function Sr(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const Tr=!!(globalThis&&Qs()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Ar extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pr extends Ar{}function Er(e,t,s){return h(this,null,function*(){Tr&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Tr&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},r=>h(null,null,function*(){if(!r){if(0===t)throw Tr&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Pr(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Tr)try{const e=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield s()}Tr&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return yield s()}finally{Tr&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}})))})}function Rr(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Or(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Cr extends Error{constructor({message:e,code:t,cause:s,name:r}){var a;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=null!==(a=null!=r?r:s instanceof Error?s.name:void 0)&&void 0!==a?a:"Unknown Error",this.code=t}}class $r extends Cr{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function zr({error:e,options:t}){var s,r,a;const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Cr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(s=n.authenticatorSelection)||void 0===s?void 0:s.requireResidentKey))return new Cr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(r=n.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new Cr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(a=n.authenticatorSelection)||void 0===a?void 0:a.userVerification))return new Cr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new Cr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new Cr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===n.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Cr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Cr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!Mr(t))return new Cr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rp.id!==t)return new Cr({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new Cr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new Cr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Cr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ir({error:e,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Cr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new Cr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Mr(t))return new Cr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(s.rpId!==t)return new Cr({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new Cr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Cr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const Dr=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Lr(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:s,excludeCredentials:r}=e,a=pe(e,["challenge","user","excludeCredentials"]),n=Hs(t).buffer,i=Object.assign(Object.assign({},s),{id:Hs(s.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:n,user:i});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];l.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:Hs(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return l}function Br(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:s}=e,r=pe(e,["challenge","allowCredentials"]),a=Hs(t).buffer,n=Object.assign(Object.assign({},r),{challenge:a});if(s&&s.length>0){n.allowCredentials=new Array(s.length);for(let e=0;e<s.length;e++){const t=s[e];n.allowCredentials[e]=Object.assign(Object.assign({},t),{id:Hs(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return n}function Ur(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const s=e;return{id:e.id,rawId:e.id,response:{attestationObject:Zs(new Uint8Array(e.response.attestationObject)),clientDataJSON:Zs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=s.authenticatorAttachment)&&void 0!==t?t:void 0}}function Fr(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const s=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Zs(new Uint8Array(a.authenticatorData)),clientDataJSON:Zs(new Uint8Array(a.clientDataJSON)),signature:Zs(new Uint8Array(a.signature)),userHandle:a.userHandle?Zs(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(t=s.authenticatorAttachment)&&void 0!==t?t:void 0}}function Mr(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Gr(){var e,t;return!!(Ys()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Wr={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},qr={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Kr(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),s=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),r={};for(const a of e)if(a)for(const e in a){const n=a[e];if(void 0!==n)if(Array.isArray(n))r[e]=n;else if(s(n))r[e]=n;else if(t(n)){const s=r[e];t(s)?r[e]=Kr(s,n):r[e]=Kr(n)}else r[e]=n}return r}class Vr{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(e){return h(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))})}_challenge(e,t){return h(this,arguments,function*({factorId:e,webauthn:t,friendlyName:s,signal:r},a){try{const{data:n,error:i}=yield this.client.mfa.challenge({factorId:e,webauthn:t});if(!n)return{data:null,error:i};const l=null!=r?r:Dr.createNewAbortSignal();if("create"===n.webauthn.type){const{user:e}=n.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${s}`),e.displayName||(e.displayName=e.name)}switch(n.webauthn.type){case"create":{const t=function(e,t){return Kr(Wr,e,t||{})}(n.webauthn.credential_options.publicKey,null==a?void 0:a.create),{data:s,error:r}=yield function(e){return h(this,null,function*(){try{const t=yield navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $r("Browser returned unexpected credential type",t)}:{data:null,error:new $r("Empty credential response",t)}}catch(t){return{data:null,error:zr({error:t,options:e})}}})}({publicKey:t,signal:l});return s?{data:{factorId:e,challengeId:n.id,webauthn:{type:n.webauthn.type,credential_response:s}},error:null}:{data:null,error:r}}case"request":{const t=function(e,t){return Kr(qr,e,t||{})}(n.webauthn.credential_options.publicKey,null==a?void 0:a.request),{data:s,error:r}=yield function(e){return h(this,null,function*(){try{const t=yield navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $r("Browser returned unexpected credential type",t)}:{data:null,error:new $r("Empty credential response",t)}}catch(t){return{data:null,error:Ir({error:t,options:e})}}})}(Object.assign(Object.assign({},n.webauthn.credential_options),{publicKey:t,signal:l}));return s?{data:{factorId:e,challengeId:n.id,webauthn:{type:n.webauthn.type,credential_response:s}},error:null}:{data:null,error:r}}}}catch(n){return Ts(n)?{data:null,error:n}:{data:null,error:new Ps("Unexpected error in challenge",n)}}})}_verify(e){return h(this,arguments,function*({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})})}_authenticate(e,t){return h(this,arguments,function*({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:s=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},a){if(!t)return{data:null,error:new Ss("rpId is required for WebAuthn authentication")};try{if(!Gr())return{data:null,error:new Ps("Browser does not support WebAuthn",null)};const{data:n,error:i}=yield this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:r},{request:a});if(!n)return{data:null,error:i};const{webauthn:l}=n;return this._verify({factorId:e,challengeId:n.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:s,credential_response:l.credential_response}})}catch(n){return Ts(n)?{data:null,error:n}:{data:null,error:new Ps("Unexpected error in authenticate",n)}}})}_register(e,t){return h(this,arguments,function*({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:s=("undefined"!=typeof window?[window.location.origin]:void 0),signal:r}={}},a){if(!t)return{data:null,error:new Ss("rpId is required for WebAuthn registration")};try{if(!Gr())return{data:null,error:new Ps("Browser does not support WebAuthn",null)};const{data:n,error:i}=yield this._enroll({friendlyName:e});if(!n)return yield this.client.mfa.listFactors().then(t=>{var s;return null===(s=t.data)||void 0===s?void 0:s.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:l,error:o}=yield this._challenge({factorId:n.id,friendlyName:n.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:r},{create:a});return l?this._verify({factorId:n.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:s,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:o}}catch(n){return Ts(n)?{data:null,error:n}:{data:null,error:new Ps("Unexpected error in register",n)}}})}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Hr={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:js,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};function Jr(e,t,s){return h(this,null,function*(){return yield s()})}const Zr={};class Yr{get jwks(){var e,t;return null!==(t=null===(e=Zr[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Zr[this.storageKey]=Object.assign(Object.assign({},Zr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Zr[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zr[this.storageKey]=Object.assign(Object.assign({},Zr[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},Hr),e);if(this.storageKey=a.storageKey,this.instanceID=null!==(t=Yr.nextInstanceID[this.storageKey])&&void 0!==t?t:0,Yr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,"function"==typeof a.debug&&(this.logger=a.debug),this.instanceID>0&&Ys()){const e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new _r({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=er(a.fetch),this.lock=a.lock||Jr,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&Ys()&&(null===(s=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===s?void 0:s.locks)?this.lock=Er:this.lock=Jr,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Vr(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Qs()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sr(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Sr(this.memoryStorage)),Ys()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",e=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",e),yield this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${xs}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}initialize(){return h(this,null,function*(){return this.initializePromise||(this.initializePromise=(()=>h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}))()),yield this.initializePromise})}_initialize(){return h(this,null,function*(){var e;try{let t={},s="none";if(Ys()&&(t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(r){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":(yield this._isPKCECallback(t))&&(s="pkce")),Ys()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:a}=yield this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return Ts(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return yield this._removeSession(),{error:a}}const{session:n,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),yield this._saveSession(n),setTimeout(()=>h(this,null,function*(){"recovery"===i?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",n):yield this._notifyAllSubscribers("SIGNED_IN",n)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return Ts(t)?this._returnResult({error:t}):this._returnResult({error:new Ps("Unexpected error during initialization",t)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return h(this,null,function*(){var t,s,r;try{const a=yield br(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:fr}),{data:n,error:i}=a;if(i||!n)return this._returnResult({data:{user:null,session:null},error:i});const l=n.session,o=n.user;return n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:o,session:l},error:null})}catch(a){if(Ts(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signUp(e){return h(this,null,function*(){var t,s,r;try{let a;if("email"in e){const{email:s,password:r,options:n}=e;let i=null,l=null;"pkce"===this.flowType&&([i,l]=yield or(this.storage,this.storageKey)),a=yield br(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:i,code_challenge_method:l},xform:fr})}else{if(!("phone"in e))throw new Cs("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:i}=e;a=yield br(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(s=null==i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:fr})}}const{data:n,error:i}=a;if(i||!n)return yield rr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:i});const l=n.session,o=n.user;return n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:o,session:l},error:null})}catch(a){if(yield rr(this.storage,`${this.storageKey}-code-verifier`),Ts(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithPassword(e){return h(this,null,function*(){try{let t;if("email"in e){const{email:s,password:r,options:a}=e;t=yield br(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:xr})}else{if(!("phone"in e))throw new Cs("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:a}=e;t=yield br(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:xr})}}const{data:s,error:r}=t;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!s||!s.session||!s.user){const e=new Os;return this._returnResult({data:{user:null,session:null},error:e})}return s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(Ts(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}signInWithOAuth(e){return h(this,null,function*(){var t,s,r,a;return yield this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return h(this,null,function*(){const{chain:t}=e;switch(t){case"ethereum":return yield this.signInWithEthereum(e);case"solana":return yield this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}})}signInWithEthereum(e){return h(this,null,function*(){var t,s,r,a,n,i,l,o,c,d,u;let h,m;if("message"in e)h=e.message,m=e.signature;else{const{chain:d,wallet:u,statement:p,options:g}=e;let y;if(Ys())if("object"==typeof u)y=u;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");y=e.ethereum}else{if("object"!=typeof u||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=u}const b=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href),f=yield y.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!f||0===f.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=Rr(f[0]);let v=null===(s=null==g?void 0:g.signInWithEthereum)||void 0===s?void 0:s.chainId;if(!v){const e=yield y.request({method:"eth_chainId"});v=parseInt(e,16)}h=function(e){var t;const{chainId:s,domain:r,expirationTime:a,issuedAt:n=new Date,nonce:i,notBefore:l,requestId:o,resources:c,scheme:d,uri:u,version:h}=e;if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const m=`${d?`${d}://${r}`:r} wants you to sign in with your Ethereum account:\n${Rr(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${u}\nVersion: ${h}\nChain ID: ${s}${i?`\nNonce: ${i}`:""}\nIssued At: ${n.toISOString()}`;if(a&&(p+=`\nExpiration Time: ${a.toISOString()}`),l&&(p+=`\nNot Before: ${l.toISOString()}`),o&&(p+=`\nRequest ID: ${o}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${m}\n${p}`}({domain:b.host,address:x,statement:p,uri:b.href,version:"1",chainId:v,nonce:null===(r=null==g?void 0:g.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(n=null===(a=null==g?void 0:g.signInWithEthereum)||void 0===a?void 0:a.issuedAt)&&void 0!==n?n:new Date,expirationTime:null===(i=null==g?void 0:g.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(l=null==g?void 0:g.signInWithEthereum)||void 0===l?void 0:l.notBefore,requestId:null===(o=null==g?void 0:g.signInWithEthereum)||void 0===o?void 0:o.requestId,resources:null===(c=null==g?void 0:g.signInWithEthereum)||void 0===c?void 0:c.resources}),m=yield y.request({method:"personal_sign",params:[Or(h),x]})}try{const{data:t,error:s}=yield br(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:m},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:fr});if(s)throw s;if(!t||!t.session||!t.user){const e=new Os;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:s})}catch(p){if(Ts(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}})}signInWithSolana(e){return h(this,null,function*(){var t,s,r,a,n,i,l,o,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:g,options:y}=e;let b;if(Ys())if("object"==typeof h)b=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");b=e.solana}else{if("object"!=typeof h||!(null==y?void 0:y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=h}const f=new URL(null!==(t=null==y?void 0:y.url)&&void 0!==t?t:window.location.href);if("signIn"in b&&b.signIn){const e=yield b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==y?void 0:y.signInWithSolana),{version:"1",domain:f.host,uri:f.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in b&&"function"==typeof b.signMessage&&"publicKey"in b&&"object"==typeof b&&b.publicKey&&"toBase58"in b.publicKey&&"function"==typeof b.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${f.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${f.href}`,`Issued At: ${null!==(r=null===(s=null==y?void 0:y.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==y?void 0:y.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...(null===(n=null==y?void 0:y.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...(null===(i=null==y?void 0:y.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...(null===(l=null==y?void 0:y.signInWithSolana)||void 0===l?void 0:l.nonce)?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...(null===(o=null==y?void 0:y.signInWithSolana)||void 0===o?void 0:o.requestId)?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==y?void 0:y.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...y.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=yield b.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=yield br(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Zs(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:fr});if(s)throw s;if(!t||!t.session||!t.user){const e=new Os;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:s})}catch(g){if(Ts(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}})}_exchangeCodeForSession(e){return h(this,null,function*(){const t=yield sr(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(null!=t?t:"").split("/");try{if(!s&&"pkce"===this.flowType)throw new Is;const{data:t,error:a}=yield br(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:fr});if(yield rr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!t||!t.session||!t.user){const e=new Os;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(yield this._saveSession(t.session),yield this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a})}catch(a){if(yield rr(this.storage,`${this.storageKey}-code-verifier`),Ts(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}})}signInWithIdToken(e){return h(this,null,function*(){try{const{options:t,provider:s,token:r,access_token:a,nonce:n}=e,i=yield br(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:a,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:fr}),{data:l,error:o}=i;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!l||!l.session||!l.user){const e=new Os;return this._returnResult({data:{user:null,session:null},error:e})}return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:o})}catch(t){if(Ts(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}signInWithOtp(e){return h(this,null,function*(){var t,s,r,a,n;try{if("email"in e){const{email:r,options:a}=e;let n=null,i=null;"pkce"===this.flowType&&([n,i]=yield or(this.storage,this.storageKey));const{error:l}=yield br(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(s=null==a?void 0:a.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:n,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:l}=yield br(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(a=null==s?void 0:s.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(n=null==s?void 0:s.channel)&&void 0!==n?n:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:l})}throw new Cs("You must provide either an email or phone number.")}catch(i){if(yield rr(this.storage,`${this.storageKey}-code-verifier`),Ts(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}verifyOtp(e){return h(this,null,function*(){var t,s;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:n,error:i}=yield br(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:fr});if(i)throw i;if(!n){throw new Error("An error occurred on token verification.")}const l=n.session,o=n.user;return(null==l?void 0:l.access_token)&&(yield this._saveSession(l),yield this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:o,session:l},error:null})}catch(r){if(Ts(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}signInWithSSO(e){return h(this,null,function*(){var t,s,r,a,n;try{let i=null,l=null;"pkce"===this.flowType&&([i,l]=yield or(this.storage,this.storageKey));const o=yield br(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:wr});return(null===(a=o.data)||void 0===a?void 0:a.url)&&Ys()&&!(null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect)&&window.location.assign(o.data.url),this._returnResult(o)}catch(i){if(yield rr(this.storage,`${this.storageKey}-code-verifier`),Ts(i))return this._returnResult({data:null,error:i});throw i}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Rs;const{error:r}=yield br(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:r})}))}catch(e){if(Ts(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}})}resend(e){return h(this,null,function*(){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:a}=e,{error:n}=yield br(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:n})}if("phone"in e){const{phone:s,type:r,options:a}=e,{data:n,error:i}=yield br(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:i})}throw new Cs("You must provide either an email or phone number and a type")}catch(t){if(Ts(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}getSession(){return h(this,null,function*(){yield this.initializePromise;return yield this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(e=>h(this,null,function*(){return e}))}))})}_acquireLock(e,t){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(()=>h(this,null,function*(){return yield e,yield t()}))();return this.pendingInLock.push((()=>h(this,null,function*(){try{yield s}catch(e){}}))()),s}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((()=>h(this,null,function*(){try{yield e}catch(t){}}))()),yield e;this.pendingInLock.length;){const e=[...this.pendingInLock];yield Promise.all(e),this.pendingInLock.splice(0,e.length)}return yield e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{const t=yield this.__loadSession();return yield e(t)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=yield sr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<ws;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=yield sr(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=hr()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,s,r)=>{if("__isInsecureUserWarningProxy"===s)return!0;if("symbol"==typeof s){const t=s.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,s,r)}return t.value||"string"!=typeof s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,s,r)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:a}=yield this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){if(e)return yield this._getUser(e);yield this.initializePromise;const t=yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()}));return t.data.user&&(this.suppressGetSessionWarning=!0),t})}_getUser(e){return h(this,null,function*(){try{return e?yield br(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:vr}):yield this._useSession(e=>h(this,null,function*(){var t,s,r;const{data:a,error:n}=e;if(n)throw n;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?yield br(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:vr}):{data:{user:null},error:new Rs}}))}catch(t){if(Ts(t))return function(e){return Ts(e)&&"AuthSessionMissingError"===e.name}(t)&&(yield this._removeSession(),yield rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}})}updateUser(e){return h(this,arguments,function*(e,t={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,t)}))})}_updateUser(e){return h(this,arguments,function*(e,t={}){try{return yield this._useSession(s=>h(this,null,function*(){const{data:r,error:a}=s;if(a)throw a;if(!r.session)throw new Rs;const n=r.session;let i=null,l=null;"pkce"===this.flowType&&null!=e.email&&([i,l]=yield or(this.storage,this.storageKey));const{data:o,error:c}=yield br(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:l}),jwt:n.access_token,xform:vr});if(c)throw c;return n.user=o.user,yield this._saveSession(n),yield this._notifyAllSubscribers("USER_UPDATED",n),this._returnResult({data:{user:n.user},error:null})}))}catch(s){if(yield rr(this.storage,`${this.storageKey}-code-verifier`),Ts(s))return this._returnResult({data:{user:null},error:s});throw s}})}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new Rs;const t=Date.now()/1e3;let s=t,r=!0,a=null;const{payload:n}=nr(e.access_token);if(n.exp&&(s=n.exp,r=s<=t),r){const{data:t,error:s}=yield this._callRefreshToken(e.refresh_token);if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:n}=yield this._getUser(e.access_token);if(n)throw n;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(Ts(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new Rs;const{data:r,error:a}=yield this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(t){if(Ts(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}_getSessionFromURL(e,t){return h(this,null,function*(){try{if(!Ys())throw new $s("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $s(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new zs("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new $s("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zs("No code detected.");const{data:t,error:s}=yield this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:a,refresh_token:n,expires_in:i,expires_at:l,token_type:o}=e;if(!(a&&i&&n&&o))throw new $s("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;l&&(u=parseInt(l));const h=u-c;1e3*h<=vs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:g}=yield this._getUser(a);if(g)throw g;const y={provider_token:s,provider_refresh_token:r,access_token:a,expires_in:d,expires_at:u,refresh_token:n,token_type:o,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(s){if(Ts(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}})}_isImplicitGrantCallback(e){return"function"==typeof this.detectSessionInUrl?this.detectSessionInUrl(new URL(window.location.href),e):Boolean(e.access_token||e.error_description)}_isPKCECallback(e){return h(this,null,function*(){const t=yield sr(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:a}=t;if(a)return this._returnResult({error:a});const n=null===(s=r.session)||void 0===s?void 0:s.access_token;if(n){const{error:t}=yield this.admin.signOut(n,e);if(t&&(!function(e){return Ts(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(yield this._removeSession(),yield rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(e){const t=Symbol("auth-callback"),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(()=>{h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(t)}))})})(),{data:{subscription:s}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(t=>h(this,null,function*(){var s,r;try{const{data:{session:r},error:a}=t;if(a)throw a;yield null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){yield null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}}))})}resetPasswordForEmail(e){return h(this,arguments,function*(e,t={}){let s=null,r=null;"pkce"===this.flowType&&([s,r]=yield or(this.storage,this.storageKey,!0));try{return yield br(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(yield rr(this.storage,`${this.storageKey}-code-verifier`),Ts(a))return this._returnResult({data:null,error:a});throw a}})}getUserIdentities(){return h(this,null,function*(){var e;try{const{data:t,error:s}=yield this.getUser();if(s)throw s;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(Ts(t))return this._returnResult({data:null,error:t});throw t}})}linkIdentity(e){return h(this,null,function*(){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)})}linkIdentityOAuth(e){return h(this,null,function*(){var t;try{const{data:s,error:r}=yield this._useSession(t=>h(this,null,function*(){var s,r,a,n,i;const{data:l,error:o}=t;if(o)throw o;const c=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return yield br(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(n=l.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0})}));if(r)throw r;return Ys()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),this._returnResult({data:{provider:e.provider,url:null==s?void 0:s.url},error:null})}catch(s){if(Ts(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}})}linkIdentityIdToken(e){return h(this,null,function*(){return yield this._useSession(t=>h(this,null,function*(){var s;try{const{error:r,data:{session:a}}=t;if(r)throw r;const{options:n,provider:i,token:l,access_token:o,nonce:c}=e,d=yield br(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(s=null==a?void 0:a.access_token)&&void 0!==s?s:void 0,body:{provider:i,id_token:l,access_token:o,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:fr}),{data:u,error:h}=d;return h?this._returnResult({data:{user:null,session:null},error:h}):u&&u.session&&u.user?(u.session&&(yield this._saveSession(u.session),yield this._notifyAllSubscribers("USER_UPDATED",u.session)),this._returnResult({data:u,error:h})):this._returnResult({data:{user:null,session:null},error:new Os})}catch(r){if(yield rr(this.storage,`${this.storageKey}-code-verifier`),Ts(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}))})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s,r;const{data:a,error:n}=t;if(n)throw n;return yield br(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})}))}catch(t){if(Ts(t))return this._returnResult({data:null,error:t});throw t}})}_refreshAccessToken(e){return h(this,null,function*(){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return yield(s=s=>h(this,null,function*(){return s>0&&(yield function(e){return h(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),e)})})}(200*Math.pow(2,s-1))),this._debug(t,"refreshing attempt",s),yield br(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fr})}),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&Ls(t)&&Date.now()+s-a<vs},new Promise((e,t)=>{h(null,null,function*(){for(let n=0;n<1/0;n++)try{const t=yield s(n);if(!r(n,null,t))return void e(t)}catch(a){if(!r(n,a))return void t(a)}})}))}catch(a){if(this._debug(t,"error",a),Ts(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(t,"end")}var s,r})}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return h(this,null,function*(){const s=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Ys()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=yield sr(this.storage,this.storageKey);if(a&&this.userStorage){let t=yield sr(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},yield tr(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:hr()}else if(a&&!a.user&&!a.user){const e=yield sr(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,yield rr(this.storage,this.storageKey+"-user"),yield tr(this.storage,this.storageKey,a)):a.user=hr()}if(this._debug(s,"session from storage",a),!this._isValidSession(a))return this._debug(s,"session is not valid"),void(null!==a&&(yield this._removeSession()));const n=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<ws;if(this._debug(s,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=yield this._callRefreshToken(a.refresh_token);e&&(console.error(e),Ls(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),yield this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=yield this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else yield this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(s,"error",a),void console.error(a)}finally{this._debug(s,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var t,s;if(!e)throw new Rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new ar;const{data:t,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new Rs;yield this._saveSession(t.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={data:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),Ts(a)){const e={data:null,error:a};return Ls(a)||(yield this._removeSession()),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}})}_notifyAllSubscribers(e,t,s=!0){return h(this,null,function*(){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(s=>h(this,null,function*(){try{yield s.callback(e,t)}catch(a){r.push(a)}}));if(yield Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield rr(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&(yield tr(this.userStorage,this.storageKey+"-user",{user:t.user}));const e=Object.assign({},t);delete e.user;const r=mr(e);yield tr(this.storage,this.storageKey,r)}else{const e=mr(t);yield tr(this.storage,this.storageKey,e)}})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield rr(this.storage,this.storageKey),yield rr(this.storage,this.storageKey+"-code-verifier"),yield rr(this.storage,this.storageKey+"-user"),this.userStorage&&(yield rr(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ys()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),vs);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{const t=Date.now();try{return yield this._useSession(e=>h(this,null,function*(){const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-t)/vs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&(yield this._callRefreshToken(s.refresh_token))}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof Ar))throw e;this._debug("auto refresh token tick lock not available")}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Ys()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){"visible"===document.visibilityState?yield this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t,s){return h(this,null,function*(){const r=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=yield or(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:a}=t;return a?this._returnResult({data:null,error:a}):yield br(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})}))}catch(t){if(Ts(t))return this._returnResult({data:null,error:t});throw t}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s,r;const{data:a,error:n}=t;if(n)return this._returnResult({data:null,error:n});const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:l,error:o}=yield br(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(s=null==a?void 0:a.session)||void 0===s?void 0:s.access_token});return o?this._returnResult({data:null,error:o}):("totp"===e.factorType&&"totp"===l.type&&(null===(r=null==l?void 0:l.totp)||void 0===r?void 0:r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))}))}catch(t){if(Ts(t))return this._returnResult({data:null,error:t});throw t}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const n=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Ur(e.webauthn.credential_response):Fr(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:l}=yield br(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:n,headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return l?this._returnResult({data:null,error:l}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:l}))}))}catch(t){if(Ts(t))return this._returnResult({data:null,error:t});throw t}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){var s;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const n=yield br(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});if(n.error)return n;const{data:i}=n;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Lr(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Br(i.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(t){if(Ts(t))return this._returnResult({data:null,error:t});throw t}}))})}_challengeAndVerify(e){return h(this,null,function*(){const{data:t,error:s}=yield this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return h(this,null,function*(){var e;const{data:{user:t},error:s}=yield this.getUser();if(s)return{data:null,error:s};const r={all:[],phone:[],totp:[],webauthn:[]};for(const a of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])r.all.push(a),"verified"===a.status&&r[a.factor_type].push(a);return{data:r,error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){var e,t;const{data:{session:s},error:r}=yield this.getSession();if(r)return this._returnResult({data:null,error:r});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=nr(s.access_token);let n=null;a.aal&&(n=a.aal);let i=n;(null!==(t=null===(e=s.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(i="aal2");return{data:{currentLevel:n,nextLevel:i,currentAuthenticationMethods:a.amr||[]},error:null}})}_getAuthorizationDetails(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){const{data:{session:s},error:r}=t;return r?this._returnResult({data:null,error:r}):s?yield br(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Rs})}))}catch(t){if(Ts(t))return this._returnResult({data:null,error:t});throw t}})}_approveAuthorization(e,t){return h(this,null,function*(){try{return yield this._useSession(s=>h(this,null,function*(){const{data:{session:r},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new Rs});const n=yield br(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&Ys()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n}))}catch(s){if(Ts(s))return this._returnResult({data:null,error:s});throw s}})}_denyAuthorization(e,t){return h(this,null,function*(){try{return yield this._useSession(s=>h(this,null,function*(){const{data:{session:r},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!r)return this._returnResult({data:null,error:new Rs});const n=yield br(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&Ys()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n}))}catch(s){if(Ts(s))return this._returnResult({data:null,error:s});throw s}})}_listOAuthGrants(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?yield br(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Rs})}))}catch(e){if(Ts(e))return this._returnResult({data:null,error:e});throw e}})}_revokeOAuthGrant(e){return h(this,null,function*(){try{return yield this._useSession(t=>h(this,null,function*(){const{data:{session:s},error:r}=t;return r?this._returnResult({data:null,error:r}):s?(yield br(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Rs})}))}catch(t){if(Ts(t))return this._returnResult({data:null,error:t});throw t}})}fetchJwk(e){return h(this,arguments,function*(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>r)return s;const{data:a,error:n}=yield br(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,s=a.keys.find(t=>t.kid===e),s||null):null})}getClaims(e){return h(this,arguments,function*(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=yield this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});s=e.session.access_token}const{header:r,payload:a,signature:n,raw:{header:i,payload:l}}=nr(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const o=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?yield this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!o){const{error:e}=yield this.getUser(s);if(e)throw e;return{data:{claims:a,header:r,signature:n},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=yield crypto.subtle.importKey("jwk",o,c,!0,["verify"]);if(!(yield crypto.subtle.verify(c,d,n,Js(`${i}.${l}`))))throw new Us("Invalid JWT signature");return{data:{claims:a,header:r,signature:n},error:null}}catch(s){if(Ts(s))return this._returnResult({data:null,error:s});throw s}})}}Yr.nextInstanceID={};const Xr=Yr;let Qr="";Qr="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ea={headers:{"X-Client-Info":`supabase-js-${Qr}/2.89.0`}},ta={schema:"public"},sa={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ra={};function aa(e){return(aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e){var t=function(e,t){if("object"!=aa(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t);if("object"!=aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aa(t)?t:t+""}function ia(e,t,s){return(t=na(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function la(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function oa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?la(Object(s),!0).forEach(function(t){ia(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):la(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}const ca=(e,t,s)=>{const r=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(s),a=Headers;return(s,n)=>h(null,null,function*(){var i;const l=null!==(i=yield t())&&void 0!==i?i:e;let o=new a(null==n?void 0:n.headers);return o.has("apikey")||o.set("apikey",e),o.has("Authorization")||o.set("Authorization",`Bearer ${l}`),r(s,oa(oa({},n),{},{headers:o}))})};var da=class extends Xr{constructor(e){super(e)}},ua=class{constructor(e,t,s){var r,a;this.supabaseUrl=e,this.supabaseKey=t;const n=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((s=t).endsWith("/")?s:s+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var s}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",n),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",n),this.storageUrl=new URL("storage/v1",n),this.functionsUrl=new URL("functions/v1",n);const i=`sb-${n.hostname.split(".")[0]}-auth-token`,l=function(e,t){var s,r;const{db:a,auth:n,realtime:i,global:l}=e,{db:o,auth:c,realtime:d,global:u}=t,m={db:oa(oa({},o),a),auth:oa(oa({},c),n),realtime:oa(oa({},d),i),storage:{},global:oa(oa(oa({},u),l),{},{headers:oa(oa({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(r=null==l?void 0:l.headers)&&void 0!==r?r:{})}),accessToken:()=>h(null,null,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}(null!=s?s:{},{db:ta,realtime:ra,auth:oa(oa({},sa),{},{storageKey:i}),global:ea});var o;(this.storageKey=null!==(r=l.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=l.global.headers)&&void 0!==a?a:{},l.accessToken)?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=l.auth)&&void 0!==o?o:{},this.headers,l.global.fetch);this.fetch=ca(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(oa({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new Pe(new URL("rest/v1",n).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new fs(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new je(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return h(this,null,function*(){var e,t,s=this;if(s.accessToken)return yield s.accessToken();const{data:r}=yield s.auth.getSession();return null!==(e=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:s.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:a,storageKey:n,flowType:i,lock:l,debug:o,throwOnError:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new da({url:this.authUrl.href,headers:oa(oa({},h),d),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:a,flowType:i,lock:l,debug:o,throwOnError:c,fetch:u,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new xt(this.realtimeUrl.href,oa(oa({},e),{},{params:oa(oa({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=s,this.realtime.setAuth(s))}};(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ha="https://vzuvsgfjutrwkbwpetwc.supabase.co".trim()?"https://vzuvsgfjutrwkbwpetwc.supabase.co".trim():"",ma="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ6dXZzZ2ZqdXRyd2tid3BldHdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxODIxMzYsImV4cCI6MjA4Mjc1ODEzNn0.oqLHr6LnPun4RjNLrSuaOx2qaL1fL9kv0gZzQinGF04".trim()?"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ6dXZzZ2ZqdXRyd2tid3BldHdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxODIxMzYsImV4cCI6MjA4Mjc1ODEzNn0.oqLHr6LnPun4RjNLrSuaOx2qaL1fL9kv0gZzQinGF04".trim():"",pa="basic"!==("supabase".trim()?"supabase".trim().toLowerCase():"")&&Boolean(ha&&ma),ga=pa?new ua(ha,ma,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}):null;const ya=""!=="https://api.mareknba.pl".trim()?"https://api.mareknba.pl".trim():"undefined"!=typeof window?`http://${window.location.hostname}:8000`:"http://localhost:8000",ba="app.auth";function fa(){try{const e=window.localStorage.getItem(ba);if(!e)return null;const t=JSON.parse(e);return(null==t?void 0:t.username)&&(null==t?void 0:t.accessToken)?t:null}catch(e){return null}}function xa(e){window.localStorage.setItem(ba,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("auth:changed",{detail:e}))}function va(){window.localStorage.removeItem(ba),window.dispatchEvent(new CustomEvent("auth:changed",{detail:null}))}function wa(){const e=fa();return(null==e?void 0:e.accessToken)?"basic"===e.scheme?{Authorization:`Basic ${e.accessToken}`}:{Authorization:`Bearer ${e.accessToken}`}:{}}function ja(e,t){return h(this,null,function*(){if(pa&&ga){const{data:s,error:r}=yield ga.auth.signInWithPassword({email:e,password:t});if(r||!(null==s?void 0:s.session)||!(null==s?void 0:s.user))throw new Error((null==r?void 0:r.message)||"Login failed");const a={username:s.user.email||s.user.id,role:s.user.role||"user",accessToken:s.session.access_token,scheme:"bearer"};return xa(a),a}const s=function(e){try{return window.btoa(e)}catch(t){const s=(new TextEncoder).encode(e);let r="";for(const e of s)r+=String.fromCharCode(e);return window.btoa(r)}}(`${e}:${t}`),r=yield fetch(`${ya}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${s}`},body:JSON.stringify({username:e,password:t})});if(!r.ok)throw new Error("Login failed");const a=yield r.json(),n={username:a.username||e,role:a.role||"user",accessToken:s,scheme:"basic"};return xa(n),n})}const Na=""!=="https://api.mareknba.pl".trim()?"https://api.mareknba.pl".trim():"undefined"!=typeof window?`http://${window.location.hostname}:8000`:"http://localhost:8000";function ka(e){return h(this,arguments,function*(e,t={}){const s=`${Na}${e}`,r=c({headers:c(c({"Content-Type":"application/json"},wa()),t.headers)},t);try{console.log(` API Request: ${r.method||"GET"} ${s}`);const t=yield fetch(s,r);if(401===t.status&&va(),!t.ok){const e=yield t.text();throw console.error(` API Error: ${t.status} ${t.statusText}`,e),new Error(`API Error: ${t.status} ${t.statusText}`)}const a=yield t.json();return console.log(` API Success: ${e}`,a),a}catch(a){throw console.error(` API Request Failed: ${e}`,a),a}})}const _a={getAll:()=>ka("/api/teams"),getAllAnalysis:(e=!0)=>ka(`/api/teams/analysis?include_betting=${e}`),getPlayers:e=>ka(`/api/teams/${e}/players`),getAnalysis:e=>ka(`/api/teams/${e}/analysis`),compare:(e,t,s)=>{const r=new URLSearchParams({team1:e,team2:t});return s&&r.append("team3",s),ka(`/api/teams/compare?${r}`)}},Sa={getAll:e=>{const t=new URLSearchParams;(null==e?void 0:e.team)&&t.set("team",e.team),(null==e?void 0:e.position)&&t.set("position",e.position),void 0!==(null==e?void 0:e.active)&&t.set("active",e.active.toString()),void 0!==(null==e?void 0:e.includeStats)&&t.set("include_stats",e.includeStats.toString());return ka(`/api/players${t.toString()?`?${t}`:""}`)},getById:e=>ka(`/api/players/${e}`),searchByName:e=>ka(`/api/players/search/${e}`)},Ta={getToday:()=>ka("/api/games/today"),getOdds:e=>ka(`/api/odds/${e}`)},Aa={getToday:(e=5)=>ka(`/api/focus-teams/today?limit=${e}`)},Pa={get750Report:()=>ka("/api/reports/750am"),get800Report:()=>ka("/api/reports/800am"),get1100Report:()=>ka("/api/reports/1100am"),getSaved:(e=10)=>ka(`/api/reports?limit=${e}`)},Ea={getAnalysis:()=>ka("/api/bulls-analysis")},Ra={getRecommendations:()=>ka("/api/betting-recommendations"),getArbitrageOpportunities:()=>ka("/api/arbitrage-opportunities"),calculateKelly:(e,t)=>ka(`/api/kelly-calculator?estimated_prob=${e}&decimal_odds=${t}`),getPerformanceMetrics:()=>ka("/api/performance-metrics"),generateBettingSlip:(e,t=100)=>ka("/api/betting-slip",{method:"POST",body:JSON.stringify({bets:e,total_stake:t})})};function Oa(){return g.useMemo(()=>({getTeams(){return h(this,null,function*(){try{return(yield _a.getAll()).teams||[]}catch(e){return console.error("Failed to fetch teams:",e),[]}})},getTodayGames(){return h(this,null,function*(){try{return(yield Ta.getToday()).games||[]}catch(e){return console.error("Failed to fetch today games:",e),[]}})},getFocusTeamsToday(e=5){return h(this,null,function*(){try{return(yield Aa.getToday(e)).teams||[]}catch(t){return console.error("Failed to fetch focus teams:",t),[]}})},getBullsPlayers(){return h(this,null,function*(){try{return(yield _a.getPlayers("CHI")).players||[]}catch(e){return console.error("Failed to fetch Bulls players:",e),[]}})},getBullsAnalysis(){return h(this,null,function*(){try{return yield Ea.getAnalysis()}catch(e){return console.error("Failed to fetch Bulls analysis:",e),null}})},getBettingRecommendations(){return h(this,null,function*(){try{return yield Ra.getRecommendations()}catch(e){return console.error("Failed to fetch betting recommendations:",e),null}})},getTeamsAnalysis(e=!0){return h(this,null,function*(){try{return yield _a.getAllAnalysis(e)}catch(t){return console.error("Failed to fetch teams analysis:",t),{teams:[],count:0,conferences:{Eastern:[],Western:[]}}}})},getPlayers(e){return h(this,null,function*(){try{return(yield Sa.getAll(e)).players||[]}catch(t){return console.error("Failed to fetch players:",t),[]}})}}),[])}const Ca=g.createContext(null),$a=()=>{const e=g.useContext(Ca);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},za=(e,t="")=>"string"==typeof e?e:t,Ia=e=>{var t,s,r;const a=(e=>e&&"object"==typeof e?e:{})(e),n=za(a.id),i=za(a.abbreviation),l=za(a.full_name,za(a.name)),o=za(a.name,l),c=za(a.city),d=za(a.conference),u=za(a.division);if(!(n&&i&&l&&o&&c&&d&&u))return null;const h=Array.isArray(a.key_players)?a.key_players:null,m=h?h.map(e=>String(e)):null;return{id:n,abbreviation:i,full_name:l,name:o,city:c,conference:d,division:u,season_stats:null!=(t=a.season_stats)?t:null,recent_form:null!=(s=a.recent_form)?s:null,betting_stats:null!=(r=a.betting_stats)?r:null,strength_rating:"number"==typeof a.strength_rating?a.strength_rating:null,key_players:m}},Da=({onTeamSelect:e,preselectTeamAbbrev:t})=>{var s,r,a,n,i,l,o,c;const{t:d}=$a(),[u,m]=g.useState([]),[p,S]=g.useState(!0),[T,A]=g.useState(""),[P,E]=g.useState("All"),[R,O]=g.useState("All"),[C,$]=g.useState("win_percentage"),[z,I]=g.useState("desc"),[D,L]=g.useState("grid"),[B,U]=g.useState(null),F=Oa(),M=e=>"number"!=typeof e?null:Number.isFinite(e)?e:null,G=(e,t=1)=>null===e?d("common.noData"):`${(100*e).toFixed(t)}%`,W=(e,t=1)=>null===e?d("common.noData"):e.toFixed(t);g.useEffect(()=>{h(null,null,function*(){try{S(!0);const e=((yield F.getTeamsAnalysis()).teams||[]).map(Ia).filter(e=>Boolean(e));m(e)}catch(e){console.error("Error fetching teams:",e)}finally{S(!1)}})},[F]),g.useEffect(()=>{if(!p&&t){const e=u.find(e=>e.abbreviation.toUpperCase()===t.toUpperCase());e&&U(e)}},[p,t,u]);const q=u.filter(e=>{const t=e.full_name.toLowerCase().includes(T.toLowerCase())||e.abbreviation.toLowerCase().includes(T.toLowerCase())||e.city.toLowerCase().includes(T.toLowerCase()),s="All"===P||e.conference===P,r="All"===R||e.division===R;return t&&s&&r}).sort((e,t)=>{var s,r,a,n,i,l,o,c,d,u,h,m,p,g,y,b,f,x;let v=null,w=null;switch(C){case"win_percentage":v=M(null!=(r=null==(s=e.season_stats)?void 0:s.win_percentage)?r:null),w=M(null!=(n=null==(a=t.season_stats)?void 0:a.win_percentage)?n:null);break;case"net_rating":v=M(null!=(l=null==(i=e.season_stats)?void 0:i.net_rating)?l:null),w=M(null!=(c=null==(o=t.season_stats)?void 0:o.net_rating)?c:null);break;case"points_per_game":v=M(null!=(u=null==(d=e.season_stats)?void 0:d.points_per_game)?u:null),w=M(null!=(m=null==(h=t.season_stats)?void 0:h.points_per_game)?m:null);break;case"strength_rating":v=M(null!=(p=e.strength_rating)?p:null),w=M(null!=(g=t.strength_rating)?g:null);break;case"ats_percentage":v=M(null!=(b=null==(y=e.betting_stats)?void 0:y.ats_percentage)?b:null),w=M(null!=(x=null==(f=t.betting_stats)?void 0:f.ats_percentage)?x:null);break;default:v=e.full_name,w=t.full_name}if("string"==typeof v){const e=v,t="string"==typeof w?w:"";return"asc"===z?e.localeCompare(t):t.localeCompare(e)}{const e="number"==typeof v?v:-1/0,t="number"==typeof w?w:-1/0;return"asc"===z?e-t:t-e}}),K=({team:t})=>{var s,r,a,n,i,l,o,c,u,h;return ce.jsxs("div",{className:"glass-card p-6 hover:neon-border transition-all duration-300 cursor-pointer group",onClick:()=>{U(t),null==e||e(t)},children:[ce.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-lg",children:t.abbreviation}),ce.jsxs("div",{children:[ce.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-blue-400 transition-colors",children:t.full_name}),ce.jsxs("p",{className:"text-sm text-gray-400",children:[t.conference,"  ",t.division]})]})]}),ce.jsx(_,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-400 transition-colors"})]}),ce.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-white",children:t.season_stats?`${t.season_stats.wins}-${t.season_stats.losses}`:d("common.noData")}),ce.jsx("div",{className:"text-xs text-gray-400",children:d("teams.table.record")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-white",children:G(M(null!=(r=null==(s=t.season_stats)?void 0:s.win_percentage)?r:null),1)}),ce.jsx("div",{className:"text-xs text-gray-400",children:d("teams.table.winPct")})]})]}),ce.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-lg font-semibold text-green-400",children:W(M(null!=(n=null==(a=t.season_stats)?void 0:a.offensive_rating)?n:null),1)}),ce.jsx("div",{className:"text-xs text-gray-400",children:d("teams.table.offRtg")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-lg font-semibold text-red-400",children:W(M(null!=(l=null==(i=t.season_stats)?void 0:i.defensive_rating)?l:null),1)}),ce.jsx("div",{className:"text-xs text-gray-400",children:d("teams.table.defRtg")})]})]}),ce.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ce.jsx("span",{className:"text-sm text-gray-400",children:d("teams.card.formLast10")}),ce.jsx("span",{className:"text-sm font-medium text-white",children:null!=(c=null==(o=t.recent_form)?void 0:o.last_10)?c:d("common.noData")})]}),ce.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ce.jsx("span",{className:"text-sm text-gray-400",children:d("teams.card.atsRecord")}),ce.jsx("span",{className:"text-sm font-medium text-white",children:null!=(h=null==(u=t.betting_stats)?void 0:u.ats_record)?h:d("common.noData")})]}),ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsx("span",{className:"text-sm text-gray-400",children:d("teams.card.strength")}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx("div",{className:"w-3 h-3 rounded-full "+("number"==typeof t.strength_rating?t.strength_rating>=85?"bg-green-400":t.strength_rating>=75?"bg-yellow-400":"bg-red-400":"bg-gray-500")}),ce.jsx("span",{className:"text-sm font-medium text-white",children:"number"==typeof t.strength_rating?t.strength_rating:d("common.noData")})]})]})]})},V=({team:t})=>{var s,r,a,n,i,l,o,c,u,h,m,p;const g=M(null!=(r=null==(s=t.season_stats)?void 0:s.net_rating)?r:null),y=null===g?d("common.noData"):`${g>0?"+":""}${g.toFixed(1)}`;return ce.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>{U(t),null==e||e(t)},children:[ce.jsx("td",{className:"px-6 py-4",children:ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded flex items-center justify-center text-white font-bold text-sm",children:t.abbreviation}),ce.jsxs("div",{children:[ce.jsx("div",{className:"font-semibold text-white",children:t.full_name}),ce.jsx("div",{className:"text-sm text-gray-400",children:t.conference})]})]})}),ce.jsx("td",{className:"px-6 py-4 text-white font-medium",children:t.season_stats?`${t.season_stats.wins}-${t.season_stats.losses}`:d("common.noData")}),ce.jsx("td",{className:"px-6 py-4 text-white",children:G(M(null!=(n=null==(a=t.season_stats)?void 0:a.win_percentage)?n:null),1)}),ce.jsx("td",{className:"px-6 py-4 text-green-400",children:W(M(null!=(l=null==(i=t.season_stats)?void 0:i.offensive_rating)?l:null),1)}),ce.jsx("td",{className:"px-6 py-4 text-red-400",children:W(M(null!=(c=null==(o=t.season_stats)?void 0:o.defensive_rating)?c:null),1)}),ce.jsx("td",{className:"px-6 py-4",children:ce.jsxs("div",{className:"flex items-center space-x-1 "+((null!=g?g:0)>=0?"text-green-400":"text-red-400"),children:["number"==typeof g?g>=0?ce.jsx(j,{className:"w-4 h-4"}):ce.jsx(N,{className:"w-4 h-4"}):null,ce.jsx("span",{children:y})]})}),ce.jsx("td",{className:"px-6 py-4 text-white",children:null!=(h=null==(u=t.recent_form)?void 0:u.last_10)?h:d("common.noData")}),ce.jsx("td",{className:"px-6 py-4 text-white",children:null!=(p=null==(m=t.betting_stats)?void 0:m.ats_record)?p:d("common.noData")}),ce.jsx("td",{className:"px-6 py-4",children:ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx("div",{className:"w-3 h-3 rounded-full "+("number"==typeof t.strength_rating?t.strength_rating>=85?"bg-green-400":t.strength_rating>=75?"bg-yellow-400":"bg-red-400":"bg-gray-500")}),ce.jsx("span",{className:"text-white",children:"number"==typeof t.strength_rating?t.strength_rating:d("common.noData")})]})})]})};return p?ce.jsx("div",{className:"flex items-center justify-center h-64",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"w-12 h-12 border-4 border-blue-400/30 border-t-blue-400 rounded-full animate-spin mx-auto mb-4"}),ce.jsx("p",{className:"text-gray-400",children:d("teams.loading")})]})}):ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsxs("div",{children:[ce.jsx("h1",{className:"text-3xl font-bold text-white mb-2",title:d("teams.tooltip.title"),children:d("teams.title")}),ce.jsx("p",{className:"text-gray-400",children:d("teams.subtitle")})]}),ce.jsx("div",{className:"flex items-center space-x-3",children:ce.jsxs("button",{onClick:()=>L("grid"===D?"table":"grid"),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:[ce.jsx(y,{className:"w-4 h-4"}),ce.jsx("span",{children:d("grid"===D?"teams.actions.tableView":"teams.actions.gridView")})]})})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[ce.jsxs("div",{className:"glass-card p-4 text-center",title:d("teams.tooltip.totalTeams"),children:[ce.jsx(b,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:u.length}),ce.jsx("div",{className:"text-sm text-gray-400",children:d("teams.stats.totalTeams")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",title:d("teams.tooltip.filtered"),children:[ce.jsx(f,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:u.filter(e=>"Eastern"===e.conference).length}),ce.jsx("div",{className:"text-sm text-gray-400",children:d("teams.conference.eastern")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx(f,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:u.filter(e=>"Western"===e.conference).length}),ce.jsx("div",{className:"text-sm text-gray-400",children:d("teams.conference.western")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx(x,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:q.length}),ce.jsx("div",{className:"text-sm text-gray-400",children:d("teams.stats.filtered")})]})]}),ce.jsx("div",{className:"glass-card p-6",children:ce.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[ce.jsxs("div",{className:"relative flex-1 max-w-md",children:[ce.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),ce.jsx("input",{type:"text",placeholder:d("teams.search.placeholder"),value:T,onChange:e=>A(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none"})]}),ce.jsxs("div",{className:"flex items-center space-x-4",children:[ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(w,{className:"w-4 h-4 text-gray-400"}),ce.jsx("select",{value:P,onChange:e=>E(e.target.value),"aria-label":d("teams.filter.conferenceLabel"),title:d("teams.filter.conferenceLabel"),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none",children:["All","Eastern","Western"].map(e=>ce.jsx("option",{value:e,children:"All"===e?e:`${e} ${d("teams.filter.conferenceSuffix")}`},e))})]}),ce.jsx("select",{value:R,onChange:e=>O(e.target.value),"aria-label":d("teams.filter.divisionLabel"),title:d("teams.filter.divisionLabel"),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none",children:["All","Atlantic","Central","Southeast","Northwest","Pacific","Southwest"].map(e=>ce.jsxs("option",{value:e,children:[e," ","All"!==e?d("teams.filter.divisionSuffix"):""]},e))}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(f,{className:"w-4 h-4 text-gray-400"}),ce.jsxs("select",{value:C,onChange:e=>$(e.target.value),"aria-label":d("teams.sort.label"),title:d("teams.sort.label"),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none",children:[ce.jsx("option",{value:"win_percentage",children:d("teams.sort.winPct")}),ce.jsx("option",{value:"net_rating",children:d("teams.sort.netRating")}),ce.jsx("option",{value:"points_per_game",children:d("teams.sort.pointsPerGame")}),ce.jsx("option",{value:"strength_rating",children:d("teams.sort.strength")}),ce.jsx("option",{value:"ats_percentage",children:d("teams.sort.atsPct")})]}),ce.jsx("button",{onClick:()=>I("asc"===z?"desc":"asc"),className:"p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg transition-colors",children:"asc"===z?ce.jsx(j,{className:"w-4 h-4 text-gray-400"}):ce.jsx(N,{className:"w-4 h-4 text-gray-400"})})]})]})]})}),"grid"===D?ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:q.map(e=>ce.jsx(K,{team:e},e.id))}):ce.jsx("div",{className:"glass-card overflow-hidden",children:ce.jsx("div",{className:"overflow-x-auto",children:ce.jsxs("table",{className:"w-full",children:[ce.jsx("thead",{className:"bg-gray-800/50",children:ce.jsxs("tr",{children:[ce.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:d("teams.table.team")}),ce.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:d("teams.table.record")}),ce.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:d("teams.table.winPct")}),ce.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:d("teams.table.offRtg")}),ce.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:d("teams.table.defRtg")}),ce.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:d("teams.table.netRtg")}),ce.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:"L10"}),ce.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:"ATS"}),ce.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-300",children:d("teams.table.strength")})]})}),ce.jsx("tbody",{children:q.map(e=>ce.jsx(V,{team:e},e.id))})]})})}),0===q.length&&ce.jsxs("div",{className:"glass-card p-12 text-center",children:[ce.jsx(k,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),ce.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:d("teams.empty.title")}),ce.jsx("p",{className:"text-gray-400",children:d("teams.empty.subtitle")})]}),B&&ce.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[ce.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>U(null)}),ce.jsxs("div",{className:"relative w-full max-w-xl h-full bg-gray-900 border-l border-gray-700/50 overflow-auto",children:[ce.jsxs("div",{className:"p-6 border-b border-gray-700/50 flex items-center justify-between",children:[ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded flex items-center justify-center text-white font-bold",children:B.abbreviation}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-xl font-bold text-white",children:B.full_name}),ce.jsxs("div",{className:"text-sm text-gray-400",children:[B.conference,"  ",B.division]})]})]}),ce.jsx("button",{className:"px-3 py-1 glass-card hover:bg-white/10 rounded text-sm",onClick:()=>U(null),children:d("common.close")})]}),ce.jsxs("div",{className:"p-6 space-y-6",children:[ce.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-white",children:B.season_stats?`${B.season_stats.wins}-${B.season_stats.losses}`:d("common.noData")}),ce.jsx("div",{className:"text-sm text-gray-400",children:d("teams.label.record")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-white",children:G(M(null!=(r=null==(s=B.season_stats)?void 0:s.win_percentage)?r:null),1)}),ce.jsx("div",{className:"text-sm text-gray-400",children:d("teams.label.winPct")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-xl font-semibold text-green-400",children:W(M(null!=(n=null==(a=B.season_stats)?void 0:a.offensive_rating)?n:null),1)}),ce.jsx("div",{className:"text-sm text-gray-400",children:d("teams.label.offRtg")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-xl font-semibold text-red-400",children:W(M(null!=(l=null==(i=B.season_stats)?void 0:i.defensive_rating)?l:null),1)}),ce.jsx("div",{className:"text-sm text-gray-400",children:d("teams.label.defRtg")})]})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:d("teams.details.keyPlayers")}),ce.jsx("div",{className:"flex flex-wrap gap-2",children:0===(B.key_players||[]).length?ce.jsx("span",{className:"text-sm text-gray-400",children:d("common.noData")}):(B.key_players||[]).map((e,t)=>ce.jsx("span",{className:"px-2 py-1 text-xs bg-gray-800/50 rounded text-white",children:e},t))})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:d("teams.details.bettingStats")}),ce.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-gray-400",children:d("teams.card.atsRecord")}),ce.jsx("div",{className:"text-white font-medium",children:B.betting_stats?`${B.betting_stats.ats_record} (${G(M(B.betting_stats.ats_percentage),1)})`:d("common.noData")})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-gray-400",children:d("teams.details.overUnder")}),ce.jsx("div",{className:"text-white font-medium",children:B.betting_stats?`${B.betting_stats.over_under} (${G(M(B.betting_stats.ou_percentage),1)})`:d("common.noData")})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-gray-400",children:d("teams.details.avgTotal")}),ce.jsx("div",{className:"text-white font-medium",children:null!=(c=null==(o=B.betting_stats)?void 0:o.avg_total)?c:d("common.noData")})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-gray-400",children:d("teams.details.strength")}),ce.jsx("div",{className:"text-white font-medium",children:"number"==typeof B.strength_rating?B.strength_rating:d("common.noData")})]})]})]}),ce.jsx("div",{className:"text-right",children:ce.jsx("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white",onClick:()=>U(null),children:d("common.done")})})]})]})]})]})},La=(e,t="")=>"string"==typeof e?e:t,Ba=e=>{const t=(e=>e&&"object"==typeof e?e:{})(e),s=La(t.id),r=La(t.abbreviation);return s&&r?{id:s,abbreviation:r,name:La(t.name),full_name:La(t.full_name),city:La(t.city)}:null},Ua=({onViewOdds:e})=>{const{t:t,locale:s}=$a(),[r,a]=g.useState([]),[n,i]=g.useState([]),[l,o]=g.useState(!0),[u,m]=g.useState(null),[p,v]=g.useState("dashboard"),[w,_]=g.useState([]),[E,R]=g.useState([]),[O,C]=g.useState(void 0),[$,z]=g.useState("All"),[I,D]=g.useState(""),[L,B]=g.useState("time"),[U]=g.useState("desc"),F=Oa(),M=(()=>{try{return new Intl.DateTimeFormat("en-US",{timeZone:"America/Chicago",month:"short",day:"numeric",year:"numeric"}).format(new Date)}catch(e){return(new Date).toISOString().slice(0,10)}})(),G=e=>!Number.isFinite(e)||e<=1?null:e>=2?Math.round(100*(e-1)):-Math.round(100/(e-1)),W=e=>null!==e&&Number.isFinite(e)?e>0?`+${e}`:`${e}`:t("common.noData"),q=(e,s=1,r=!1,a)=>{if(null===e||!Number.isFinite(e))return null!=a?a:t("common.noData");const n=e.toFixed(s);return r?`${e>0?"+":""}${n}`:n},K=e=>e.trim().toLowerCase(),V=e=>{const t=K(e||"");return t&&(E.find(e=>K((null==e?void 0:e.full_name)||"")===t||K((null==e?void 0:e.name)||"")===t||K((null==e?void 0:e.abbreviation)||"")===t)||E.find(e=>K((null==e?void 0:e.full_name)||"").includes(t)||K((null==e?void 0:e.name)||"").includes(t)))||null},H=g.useCallback(()=>h(null,null,function*(){o(!0),m(null);try{const[e,r,n,l]=yield Promise.all([F.getTodayGames(),F.getTeams(),F.getFocusTeamsToday(5),F.getTeamsAnalysis()]);_((r||[]).map(Ba).filter(e=>Boolean(e))),R((null==l?void 0:l.teams)||[]);const o=(e||[]).filter(e=>"string"==typeof(null==e?void 0:e.id)&&""!==String(e.id).trim()),u=yield Promise.all(o.map(e=>h(null,null,function*(){const r=String(e.id),a=String(e.home_team||t("common.tbd")),n=String(e.away_team||t("common.tbd")),i=e.commence_time?new Date(e.commence_time).toLocaleTimeString(s,{timeZone:"America/Chicago"}):t("common.tbd");let l=null,o=null,c=null,d=null;try{const e=yield Ta.getOdds(r),t=(null==e?void 0:e.odds)||[],s=(e,t)=>e.find(e=>String(e.team||"").trim().toLowerCase()===t.trim().toLowerCase()),i=t.filter(e=>"h2h"===e.market_type),u=t.filter(e=>"spread"===e.market_type||"spreads"===e.market_type),h=t.filter(e=>"totals"===e.market_type),m=i.filter(e=>String(e.team||"").trim().toLowerCase()===a.trim().toLowerCase()&&Number.isFinite(Number(e.price))),p=i.filter(e=>String(e.team||"").trim().toLowerCase()===n.trim().toLowerCase()&&Number.isFinite(Number(e.price))),g=m.reduce((e,t)=>{const s=Number(t.price);return Number.isFinite(s)&&(null===e||s>e)?s:e},null),y=p.reduce((e,t)=>{const s=Number(t.price);return Number.isFinite(s)&&(null===e||s>e)?s:e},null);c=null===g?null:G(g),d=null===y?null:G(y);const b=s(u,a);l=null===(null==b?void 0:b.point)||void 0===(null==b?void 0:b.point)?null:Number(b.point);const f=h.find(e=>"over"===String(e.outcome_name||"").toLowerCase());o=null===(null==f?void 0:f.point)||void 0===(null==f?void 0:f.point)?null:Number(f.point)}catch(u){}return{id:r,homeTeam:a,awayTeam:n,time:i,commenceTime:e.commence_time||null,spread:l,total:o,homeOdds:c,awayOdds:d}})));a(u);const m=(n||[]).filter(e=>e&&"string"==typeof e.team&&"string"==typeof e.opponent).map(e=>{const t=null===e.best_price||void 0===e.best_price?null:Number(e.best_price),s=null===e.edge||void 0===e.edge?null:Number(e.edge),r=null===e.consensus_prob||void 0===e.consensus_prob?null:Number(e.consensus_prob);return{team:e.team,opponent:e.opponent,game_id:String(e.game_id||""),commence_time:e.commence_time,best_price:t,best_book:e.best_book?String(e.best_book):"",consensus_prob:r,edge:s}}).filter(e=>e.game_id&&Number.isFinite(e.best_price)&&Number.isFinite(e.edge)&&Number.isFinite(e.consensus_prob)).map(e=>d(c({},e),{best_price:Number(e.best_price),edge:Number(e.edge),consensus_prob:Number(e.consensus_prob)}));i(m)}catch(e){console.error("Error fetching dashboard data:",e),a([]),_([]),R([]),i([]),m(t("dashboard.error.loadFailed"))}finally{o(!1)}}),[F,s,t]);g.useEffect(()=>{H()},[H]);const J=({value:e,subtitle:t,icon:s,trend:r,color:a,onClick:n,tooltip:i})=>ce.jsxs("button",{type:"button",onClick:n,title:i,className:"glass-card p-6 hover:bg-white/10 transition-all duration-300 text-left",children:[ce.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ce.jsx("div",{className:`p-3 rounded-lg ${a}`,children:ce.jsx(s,{className:"w-6 h-6 text-white"})}),r&&ce.jsx("div",{className:"flex items-center space-x-1 "+("up"===r?"text-green-400":"down"===r?"text-red-400":"text-yellow-400"),children:"up"===r?ce.jsx(j,{className:"w-4 h-4"}):"down"===r?ce.jsx(N,{className:"w-4 h-4"}):ce.jsx(f,{className:"w-4 h-4"})})]}),ce.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:e}),ce.jsx("div",{className:"text-sm text-gray-400",children:t})]}),Z=(e,t,s)=>{const r=s.map(e=>e.map(e=>`"${String(null!=e?e:"").replace(/"/g,'""')}"`)),a=[t.map(e=>`"${e.replace(/"/g,'""')}"`).join(","),...r.map(e=>e.join(","))].join("\n"),n=new Blob([a],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.setAttribute("download",e),document.body.appendChild(i),i.click(),document.body.removeChild(i)},Y=(e,t,s,r)=>h(null,null,function*(){const{jsPDF:a}=yield me(()=>h(null,null,function*(){const{jsPDF:e}=yield import("./jspdf.es.min-D_8MiN8l.js").then(e=>e.j);return{jsPDF:e}}),[]),n=new a({unit:"pt",format:"a4"}),i=n.internal.pageSize.getWidth()-80;let l=48;n.setFont("helvetica","bold"),n.setFontSize(16),n.text(e,40,l),l+=20,n.setFontSize(10),n.setFont("helvetica","bold"),n.text(t.join(" | "),40,l),l+=14,n.setFont("helvetica","normal"),s.forEach(e=>{const t=e.map(e=>String(null!=e?e:"")).join(" | ");n.splitTextToSize(t,i).forEach(e=>{l>n.internal.pageSize.getHeight()-48&&(n.addPage(),l=48),n.text(e,40,l),l+=12})}),n.save(r)}),X=e=>{const t=w.find(t=>t.full_name&&t.full_name.toLowerCase()===e.toLowerCase()||t.name&&t.name.toLowerCase()===e.toLowerCase())||w.find(t=>(t.full_name||"").toLowerCase().includes(e.toLowerCase())||(t.name||"").toLowerCase().includes(e.toLowerCase()));t?(C(t.abbreviation),v("all-teams")):v("all-teams")},Q=({game:s})=>{return ce.jsxs("div",{className:"glass-card p-4 hover:neon-border transition-all duration-300",children:[ce.jsx("div",{className:"flex items-center justify-between mb-3",children:ce.jsx("div",{className:"text-sm text-gray-400",children:s.time})}),ce.jsxs("div",{className:"space-y-2 mb-4",children:[ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsx("button",{onClick:()=>X(s.homeTeam),className:"font-semibold text-left text-white hover:underline",children:s.homeTeam}),ce.jsx("span",{className:"text-gray-300",children:W(s.homeOdds)})]}),ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsx("button",{onClick:()=>X(s.awayTeam),className:"text-gray-300 hover:underline text-left",children:s.awayTeam}),ce.jsx("span",{className:"text-gray-300",children:W(s.awayOdds)})]})]}),ce.jsxs("div",{className:"flex justify-between items-center text-sm border-t border-gray-700/50 pt-3",children:["number"==typeof s.spread&&Number.isFinite(s.spread)&&ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-gray-400",children:t("dashboard.label.spread")}),ce.jsx("div",{className:"text-white font-semibold",children:(r=s.spread,null!==r&&Number.isFinite(r)?r>0?`+${r}`:`${r}`:a||t("common.noData"))})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-gray-400",children:t("dashboard.label.total")}),ce.jsx("div",{className:"text-white font-semibold",children:null!==s.total&&Number.isFinite(s.total)?s.total:t("common.noData")})]}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[e&&ce.jsx("button",{onClick:()=>e(s.id),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white ml-2",children:t("dashboard.actions.viewOdds")}),ce.jsx("button",{onClick:()=>X(s.homeTeam),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white",children:t("dashboard.actions.teamAnalysis")})]})]})]});var r,a};if(l)return ce.jsx("div",{className:"flex items-center justify-center h-64",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"w-12 h-12 border-4 border-blue-400/30 border-t-blue-400 rounded-full animate-spin mx-auto mb-4"}),ce.jsx("p",{className:"text-gray-400",children:t("dashboard.loading")})]})});if(u)return ce.jsxs("div",{className:"glass-card p-8 text-center",children:[ce.jsx("div",{className:"text-red-400 font-semibold mb-2",children:u}),ce.jsx("button",{onClick:()=>{H()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white",children:t("common.retry")})]});const ee=r.filter(e=>"All"===$||e.homeTeam===$||e.awayTeam===$),te=E.filter(e=>{var t,s;return null!==(null==(t=null==e?void 0:e.season_stats)?void 0:t.win_percentage)&&void 0!==(null==(s=null==e?void 0:e.season_stats)?void 0:s.win_percentage)}).length,se=ee.filter(e=>`${e.homeTeam} ${e.awayTeam}`.toLowerCase().includes(I.toLowerCase())),re=n.filter(e=>`${e.team} ${e.opponent}`.toLowerCase().includes(I.toLowerCase())),ae=E.filter(e=>`${e.full_name||e.name||""}`.toLowerCase().includes(I.toLowerCase())),ne=n.filter(e=>e.edge>0).filter(e=>`${e.team} ${e.opponent}`.toLowerCase().includes(I.toLowerCase())),ie=r[0]||null,le=ie?V(ie.homeTeam):null,oe=ie?V(ie.awayTeam):null,de=e=>{var s,r;return null!=(r=null==(s=null==e?void 0:e.recent_form)?void 0:s.last_5)?r:t("common.noData")},ue=e=>{const s=Array.isArray(null==e?void 0:e.key_players)?e.key_players:[];return s.length?s.slice(0,3).join(", "):t("common.noData")},he=(e,t)=>(null==e?void 0:e.abbreviation)||t,pe=(e,t)=>[...e].sort((e,s)=>{const r=t(e),a=t(s);if("string"==typeof r&&"string"==typeof a)return"asc"===U?r.localeCompare(a):a.localeCompare(r);const n="number"==typeof r?r:-1/0,i="number"==typeof a?a:-1/0;return"asc"===U?n-i:i-n});return ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"flex space-x-1 bg-gray-800/50 rounded-lg p-1",children:[ce.jsx("button",{onClick:()=>v("dashboard"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("dashboard"===p?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"),children:t("dashboard.tabs.dashboard")}),ce.jsx("button",{onClick:()=>v("all-teams"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("all-teams"===p?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"),children:t("dashboard.tabs.allTeams")})]}),"all-teams"===p?ce.jsx(Da,{preselectTeamAbbrev:O}):"scheduled"===p?ce.jsxs("div",{className:"glass-card",children:[ce.jsxs("div",{className:"p-6 border-b border-gray-700/50 flex items-center justify-between",children:[ce.jsxs("div",{children:[ce.jsx("h2",{className:"text-xl font-bold text-white",title:t("dashboard.tooltip.scheduledGames"),children:t("dashboard.section.scheduledGames")}),ce.jsx("p",{className:"text-sm text-gray-400",children:t("dashboard.section.scheduledSubtitle")})]}),ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("button",{onClick:()=>v("dashboard"),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("common.back")}),ce.jsxs("div",{className:"text-sm text-gray-400",children:[t("dashboard.filter.date"),": ",M]}),ce.jsx("input",{value:I,onChange:e=>D(e.target.value),placeholder:t("dashboard.filter.search"),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none"}),ce.jsx("span",{className:"text-sm text-gray-400",children:t("dashboard.filter.team")}),ce.jsxs("select",{value:$,onChange:e=>z(e.target.value),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none",children:[ce.jsx("option",{value:"All",children:t("players.filter.allTeams")}),w.map(e=>ce.jsx("option",{value:e.full_name||e.name||e.abbreviation,children:e.full_name||e.name||e.abbreviation},e.abbreviation))]})]})]}),ce.jsxs("div",{className:"p-6 space-y-4",children:[pe(se,e=>e.commenceTime||"").map(e=>ce.jsx(Q,{game:e},e.id)),0===se.length&&ce.jsx("div",{className:"text-sm text-gray-400",children:t("common.noData")}),se.length>0&&ce.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[ce.jsx("button",{onClick:()=>Z("scheduled-games.csv",["Time","Home","Away","Spread","Total"],se.map(e=>{var t,s;return[e.time,e.homeTeam,e.awayTeam,null!=(t=e.spread)?t:"",null!=(s=e.total)?s:""]})),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("dashboard.actions.exportCsv")}),ce.jsx("button",{onClick:()=>Y(t("dashboard.section.scheduledGames"),["Time","Home","Away","Spread","Total"],se.map(e=>{var t,s;return[e.time,e.homeTeam,e.awayTeam,null!=(t=e.spread)?t:"",null!=(s=e.total)?s:""]}),"scheduled-games.pdf"),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("dashboard.actions.exportPdf")})]})]})]}):"tracked"===p?ce.jsxs("div",{className:"glass-card",children:[ce.jsxs("div",{className:"p-6 border-b border-gray-700/50 flex items-center justify-between",children:[ce.jsxs("div",{children:[ce.jsx("h2",{className:"text-xl font-bold text-white",title:t("dashboard.tooltip.trackedTeams"),children:t("dashboard.section.trackedTeams")}),ce.jsx("p",{className:"text-sm text-gray-400",children:t("dashboard.section.trackedSubtitle")})]}),ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("button",{onClick:()=>v("dashboard"),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("common.back")}),ce.jsx("input",{value:I,onChange:e=>D(e.target.value),placeholder:t("dashboard.filter.search"),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none"}),ce.jsxs("select",{value:L,onChange:e=>B(e.target.value),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none",children:[ce.jsx("option",{value:"edge",children:t("dashboard.sort.edge")}),ce.jsx("option",{value:"team",children:t("dashboard.sort.team")})]})]})]}),ce.jsxs("div",{className:"p-6 space-y-4",children:[0===re.length&&ce.jsx("div",{className:"text-sm text-gray-400",children:t("common.noData")}),pe(re,e=>"team"===L?e.team:e.edge).map(e=>ce.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/30 rounded-lg",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-white font-semibold",children:e.team}),ce.jsxs("div",{className:"text-xs text-gray-400",children:[t("betting.pick.vs")," ",e.opponent]})]}),ce.jsxs("div",{className:"text-sm text-gray-300",children:[(100*(e.edge||0)).toFixed(1),"% ",t("dashboard.label.edge")]})]},`${e.game_id}:${e.team}`)),re.length>0&&ce.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[ce.jsx("button",{onClick:()=>Z("tracked-teams.csv",["Team","Opponent","Edge"],re.map(e=>[e.team,e.opponent,(100*(e.edge||0)).toFixed(1)+"%"])),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("dashboard.actions.exportCsv")}),ce.jsx("button",{onClick:()=>Y(t("dashboard.section.trackedTeams"),["Team","Opponent","Edge"],re.map(e=>[e.team,e.opponent,(100*(e.edge||0)).toFixed(1)+"%"]),"tracked-teams.pdf"),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("dashboard.actions.exportPdf")})]})]})]}):"season"===p?ce.jsxs("div",{className:"glass-card",children:[ce.jsxs("div",{className:"p-6 border-b border-gray-700/50 flex items-center justify-between",children:[ce.jsxs("div",{children:[ce.jsx("h2",{className:"text-xl font-bold text-white",title:t("dashboard.tooltip.seasonOverview"),children:t("dashboard.section.seasonOverview")}),ce.jsx("p",{className:"text-sm text-gray-400",children:t("dashboard.section.seasonSubtitle")})]}),ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("button",{onClick:()=>v("dashboard"),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("common.back")}),ce.jsx("input",{value:I,onChange:e=>D(e.target.value),placeholder:t("dashboard.filter.search"),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none"}),ce.jsxs("select",{value:L,onChange:e=>B(e.target.value),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none",children:[ce.jsx("option",{value:"winPct",children:t("dashboard.sort.winPct")}),ce.jsx("option",{value:"net",children:t("dashboard.sort.netRtg")}),ce.jsx("option",{value:"off",children:t("dashboard.sort.offRtg")}),ce.jsx("option",{value:"def",children:t("dashboard.sort.defRtg")})]})]})]}),ce.jsxs("div",{className:"p-6 space-y-4",children:[0===ae.length&&ce.jsx("div",{className:"text-sm text-gray-400",children:t("common.noData")}),pe(ae.filter(e=>{var t,s;return null!==(null==(t=null==e?void 0:e.season_stats)?void 0:t.win_percentage)&&void 0!==(null==(s=null==e?void 0:e.season_stats)?void 0:s.win_percentage)}),e=>{const t=e.season_stats||{};return"net"===L?t.net_rating||0:"off"===L?t.offensive_rating||0:"def"===L?t.defensive_rating||0:t.win_percentage||0}).slice(0,12).map(e=>{var t,s,r,a,n,i;return ce.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/30 rounded-lg",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-white font-semibold",children:e.full_name||e.name}),ce.jsxs("div",{className:"text-xs text-gray-400",children:[null==(t=e.season_stats)?void 0:t.wins,"-",null==(s=e.season_stats)?void 0:s.losses,"  Net ",q("number"==typeof(null==(r=e.season_stats)?void 0:r.net_rating)?e.season_stats.net_rating:null,1,!0)]})]}),ce.jsxs("div",{className:"text-sm text-gray-300",children:[(100*((null==(a=e.season_stats)?void 0:a.win_percentage)||0)).toFixed(1),"%  Off ",q("number"==typeof(null==(n=e.season_stats)?void 0:n.offensive_rating)?e.season_stats.offensive_rating:null,1),"  Def ",q("number"==typeof(null==(i=e.season_stats)?void 0:i.defensive_rating)?e.season_stats.defensive_rating:null,1)]})]},e.id)}),ae.length>0&&ce.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[ce.jsx("button",{onClick:()=>Z("season-overview.csv",["Team","W-L","Win%","OffRtg","DefRtg","NetRtg"],ae.map(e=>{var t,s,r,a,n,i;return[String(e.full_name||e.name||""),`${null==(t=e.season_stats)?void 0:t.wins}-${null==(s=e.season_stats)?void 0:s.losses}`,(100*((null==(r=e.season_stats)?void 0:r.win_percentage)||0)).toFixed(1),q("number"==typeof(null==(a=e.season_stats)?void 0:a.offensive_rating)?e.season_stats.offensive_rating:null,1,!1,""),q("number"==typeof(null==(n=e.season_stats)?void 0:n.defensive_rating)?e.season_stats.defensive_rating:null,1,!1,""),q("number"==typeof(null==(i=e.season_stats)?void 0:i.net_rating)?e.season_stats.net_rating:null,1,!0,"")]})),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("dashboard.actions.exportCsv")}),ce.jsx("button",{onClick:()=>Y(t("dashboard.section.seasonOverview"),["Team","W-L","Win%","OffRtg","DefRtg","NetRtg"],ae.map(e=>{var t,s,r,a,n,i;return[String(e.full_name||e.name||""),`${null==(t=e.season_stats)?void 0:t.wins}-${null==(s=e.season_stats)?void 0:s.losses}`,(100*((null==(r=e.season_stats)?void 0:r.win_percentage)||0)).toFixed(1),q("number"==typeof(null==(a=e.season_stats)?void 0:a.offensive_rating)?e.season_stats.offensive_rating:null,1,!1,""),q("number"==typeof(null==(n=e.season_stats)?void 0:n.defensive_rating)?e.season_stats.defensive_rating:null,1,!1,""),q("number"==typeof(null==(i=e.season_stats)?void 0:i.net_rating)?e.season_stats.net_rating:null,1,!0,"")]}),"season-overview.pdf"),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("dashboard.actions.exportPdf")})]})]})]}):"value"===p?ce.jsxs("div",{className:"glass-card",children:[ce.jsxs("div",{className:"p-6 border-b border-gray-700/50 flex items-center justify-between",children:[ce.jsxs("div",{children:[ce.jsx("h2",{className:"text-xl font-bold text-white",title:t("dashboard.tooltip.valuePicks"),children:t("dashboard.section.valuePicks")}),ce.jsx("p",{className:"text-sm text-gray-400",children:t("dashboard.section.valueSubtitle")})]}),ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("button",{onClick:()=>v("dashboard"),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("common.back")}),ce.jsx("input",{value:I,onChange:e=>D(e.target.value),placeholder:t("dashboard.filter.search"),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none"}),ce.jsxs("select",{value:L,onChange:e=>B(e.target.value),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none",children:[ce.jsx("option",{value:"edge",children:t("dashboard.sort.edge")}),ce.jsx("option",{value:"team",children:t("dashboard.sort.team")})]})]})]}),ce.jsxs("div",{className:"p-6 space-y-4",children:[pe(ne,e=>"team"===L?e.team:e.edge).map(e=>ce.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/30 rounded-lg",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-white font-semibold",children:e.team}),ce.jsxs("div",{className:"text-xs text-gray-400",children:[t("betting.pick.vs")," ",e.opponent]})]}),ce.jsxs("div",{className:"text-sm text-green-400",children:["+",(100*(e.edge||0)).toFixed(1),"%"]})]},`${e.game_id}:${e.team}`)),0===ne.length&&ce.jsx("div",{className:"text-sm text-gray-400",children:t("common.noData")}),ne.length>0&&ce.jsxs("div",{className:"flex items-center space-x-3 pt-2",children:[ce.jsx("button",{onClick:()=>Z("value-opportunities.csv",["Team","Opponent","Edge"],ne.map(e=>[e.team,e.opponent,(100*(e.edge||0)).toFixed(1)+"%"])),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("dashboard.actions.exportCsv")}),ce.jsx("button",{onClick:()=>Y(t("dashboard.section.valuePicks"),["Team","Opponent","Edge"],ne.map(e=>[e.team,e.opponent,(100*(e.edge||0)).toFixed(1)+"%"]),"value-opportunities.pdf"),className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:t("dashboard.actions.exportPdf")})]})]})]}):ce.jsxs(ce.Fragment,{children:[ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[ce.jsx(J,{value:r.length,subtitle:t("dashboard.stats.gamesScheduled"),icon:S,color:"bg-blue-600",onClick:()=>v("scheduled"),tooltip:t("dashboard.tooltip.stats.gamesScheduled")}),ce.jsx(J,{value:w.length,subtitle:t("dashboard.stats.teamsTracked"),icon:b,color:"bg-green-600",onClick:()=>v("tracked"),tooltip:t("dashboard.tooltip.stats.teamsTracked")}),ce.jsx(J,{value:te>0?te:t("common.noData"),subtitle:t("dashboard.stats.thisSeason"),icon:x,trend:"neutral",color:"bg-red-600",onClick:()=>v("season"),tooltip:t("dashboard.tooltip.stats.thisSeason")}),ce.jsx(J,{value:n.filter(e=>e.edge>0).length,subtitle:t("dashboard.stats.valueOpportunities"),icon:T,trend:"up",color:"bg-yellow-600",onClick:()=>v("value"),tooltip:t("dashboard.tooltip.stats.valueOpportunities")})]}),ce.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[ce.jsx("div",{className:"lg:col-span-2",children:ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("div",{className:"flex items-center justify-between",title:t("dashboard.tooltip.todaysGames"),children:[ce.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[ce.jsx(A,{className:"w-5 h-5 text-blue-400"}),ce.jsxs("div",{className:"flex flex-col leading-tight",children:[ce.jsx("span",{children:t("dashboard.section.todaysGames")}),ce.jsxs("span",{className:"text-sm font-normal text-gray-400",children:[M," (America/Chicago)"]})]})]}),ce.jsxs("span",{className:"text-sm text-gray-400",children:[r.length," ",t("dashboard.section.gamesSuffix")]})]})}),ce.jsx("div",{className:"p-6 space-y-4",children:r.map(e=>ce.jsx(Q,{game:e},e.id))})]})}),ce.jsx("div",{children:ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",title:t("dashboard.tooltip.focusTeams"),children:[ce.jsx(y,{className:"w-5 h-5 text-green-400"}),ce.jsx("span",{children:t("dashboard.section.focusTeams")})]})}),ce.jsxs("div",{className:"p-6 space-y-4",children:[n.map(e=>ce.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-white/5 rounded-lg transition-colors",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"font-semibold text-white",children:e.team}),ce.jsxs("div",{className:"text-xs text-gray-400",children:[t("betting.pick.vs")," ",e.opponent,"  ",t("betting.pick.edge"),": ",(100*(e.edge||0)).toFixed(1),"%"]})]}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsxs("div",{className:"px-2 py-1 rounded text-xs "+(e.edge>0?"bg-green-600/20 text-green-400":e.edge<0?"bg-red-600/20 text-red-400":"bg-yellow-600/20 text-yellow-400"),children:[e.best_price.toFixed(2)," (",e.best_book||t("common.noData"),")"]}),e.edge>0?ce.jsx(j,{className:"w-4 h-4 text-green-400"}):e.edge<0?ce.jsx(N,{className:"w-4 h-4 text-red-400"}):ce.jsx(f,{className:"w-4 h-4 text-yellow-400"})]})]},`${e.game_id}:${e.team}`)),0===n.length&&ce.jsx("div",{className:"text-sm text-gray-400",children:t("common.noData")})]})]})})]}),ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",title:t("dashboard.tooltip.leagueSpotlight"),children:[ce.jsx(x,{className:"w-5 h-5 text-red-400"}),ce.jsx("span",{children:t("dashboard.section.leagueSpotlight")}),ce.jsxs("div",{className:"ml-auto flex items-center space-x-2",children:[ce.jsx(k,{className:"w-4 h-4 text-yellow-400"}),ce.jsx("span",{className:"text-sm text-gray-400",title:t("dashboard.tooltip.liveMatchup"),children:t("dashboard.section.liveMatchup")})]})]})}),ce.jsx("div",{className:"p-6",children:0===r.length?ce.jsx("div",{className:"text-sm text-gray-400",children:t("common.noData")}):ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[ce.jsxs("div",{className:"text-center",children:[ce.jsxs("div",{className:"text-2xl font-bold text-blue-400 mb-2",children:[r[0].homeTeam," ",t("betting.pick.vs")," ",r[0].awayTeam]}),ce.jsx("div",{className:"text-gray-400",children:r[0].time}),ce.jsx("div",{className:"text-sm text-gray-500 mt-2",children:t("dashboard.spotlight.featuredGame")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:t("dashboard.spotlight.last5")}),ce.jsx("div",{className:"text-gray-400",children:ie?`${he(le,ie.homeTeam)} ${de(le)} / ${he(oe,ie.awayTeam)} ${de(oe)}`:t("common.noData")}),ce.jsx("div",{className:"text-sm text-gray-500 mt-2",children:t("dashboard.spotlight.strongForm")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:t("dashboard.spotlight.keyPlayers")}),ce.jsx("div",{className:"text-gray-400",children:ie?`${he(le,ie.homeTeam)}: ${ue(le)} | ${he(oe,ie.awayTeam)}: ${ue(oe)}`:t("common.noData")}),ce.jsx("div",{className:"text-sm text-gray-500 mt-2",children:t("dashboard.spotlight.fullRotation")})]})]})})]}),ce.jsxs("div",{className:"glass-card border-yellow-400/20",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",title:t("dashboard.tooltip.riskAlerts"),children:[ce.jsx(P,{className:"w-5 h-5 text-yellow-400"}),ce.jsx("span",{children:t("dashboard.section.riskAlerts")})]})}),ce.jsx("div",{className:"p-6",children:ce.jsx("div",{className:"text-sm text-gray-400",children:t("common.noData")})})]})]})]})},Fa=({items:e,activeSection:t,onSectionChange:s})=>{const{t:r,locale:a}=$a(),n=Oa(),[i,l]=g.useState(null),[o,c]=g.useState(null);return g.useEffect(()=>{let e=!1;return h(null,null,function*(){const t=yield n.getTodayGames();if(e)return;l(t.length);const s=(t||[]).map(e=>null==e?void 0:e.commence_time).filter(e=>"string"==typeof e&&""!==e.trim()).map(e=>({s:e,ms:Date.parse(e)})).filter(e=>Number.isFinite(e.ms)).sort((e,t)=>e.ms-t.ms)[0];c(s?new Date(s.ms).toLocaleTimeString(a,{hour:"2-digit",minute:"2-digit",timeZone:"America/Chicago"}):null)}),()=>{e=!0}},[n,a]),ce.jsxs("div",{className:"w-64 bg-gray-900/50 backdrop-blur-sm border-r border-gray-700/50 flex flex-col",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsx("div",{className:"flex items-center justify-center",children:ce.jsx("div",{className:"w-40 h-40 flex items-center justify-center",children:ce.jsx("img",{src:"/logo.png",alt:"MarekNBA Analytics logo",className:"w-40 h-40 object-contain"})})})}),ce.jsx("nav",{className:"flex-1 p-4",children:ce.jsx("ul",{className:"space-y-2",children:e.map(e=>{const r=e.icon,a=t===e.id;return ce.jsx("li",{children:ce.jsxs("button",{onClick:()=>s(e.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 "+(a?"bg-blue-600/20 text-blue-400 border border-blue-400/20 shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-800/50"),children:[ce.jsx(r,{className:"w-5 h-5 "+(a?"text-blue-400":"text-gray-400")}),ce.jsx("span",{className:"font-medium",children:e.label}),a&&ce.jsx("div",{className:"ml-auto w-2 h-2 bg-blue-400 rounded-full animate-pulse"})]})},e.id)})})}),ce.jsx("div",{className:"p-4 border-t border-gray-700/50",children:ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ce.jsx("span",{className:"text-sm font-medium text-gray-300",children:r("sidebar.leagueStatus")}),ce.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),ce.jsx("div",{className:"text-xs text-gray-400",children:null===i?r("common.noData"):r("sidebar.nextSlate",{count:i})}),ce.jsx("div",{className:"text-xs text-gray-500 mt-1",children:o?r("sidebar.tonight",{time:o}):r("common.noData")})]})})]})},Ma=({activeSection:e,lastUpdate:t,onRefresh:s,currentUser:r,onLogout:a,onToggleSidebar:n})=>{const{language:i,setLanguage:l,locale:o,t:c,supportedLanguages:d}=$a(),[u,h]=g.useState(!1),[m,p]=g.useState(!1),[y,f]=g.useState(!1),x=[];return ce.jsx("header",{className:"bg-gray-900/30 backdrop-blur-sm border-b border-gray-700/50 px-6 py-4",children:ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsxs("div",{children:[ce.jsx("h1",{className:"text-2xl font-bold text-white",children:(e=>{switch(e){case"dashboard":return c("header.section.dashboard");case"reports":return c("header.section.reports");case"teams":return c("header.section.teams");case"betting":return c("header.section.betting");case"odds":return c("header.section.odds");case"players":return c("header.section.players");case"analytics":return c("header.section.analytics");default:return c("header.section.default")}})(e)}),ce.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[c("header.lastUpdated"),": ",(v=t,v.toLocaleTimeString(o,{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"America/Chicago"}))," CT"]})]}),ce.jsxs("div",{className:"flex items-center space-x-4",children:[n&&ce.jsx("button",{onClick:n,className:"glass-card p-2 hover:bg-white/10 transition-colors duration-200 md:hidden",title:"Menu","aria-label":"Toggle sidebar",children:ce.jsx(E,{className:"w-5 h-5 text-gray-400 hover:text-white"})}),ce.jsxs("div",{className:"flex items-center space-x-2 glass-card px-3 py-2",children:[ce.jsxs("span",{className:"text-sm text-gray-400",children:[c("header.language"),":"]}),ce.jsx("div",{className:"flex items-center",children:d.map(e=>ce.jsx("button",{type:"button",onClick:()=>l(e.id),className:"px-2 py-1 text-xs rounded-md transition-colors duration-200 "+(i===e.id?"bg-blue-600/20 text-blue-300 border border-blue-400/30":"text-gray-300 hover:text-white hover:bg-white/10"),children:e.label},e.id))})]}),ce.jsxs("div",{className:"flex items-center space-x-2 glass-card px-3 py-2",children:[ce.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),ce.jsx("span",{className:"text-sm text-gray-300",children:c("app.status.liveData")})]}),ce.jsx("button",{onClick:s,className:"glass-card p-2 hover:bg-white/10 transition-colors duration-200",title:c("header.refreshData"),children:ce.jsx(R,{className:"w-5 h-5 text-gray-400 hover:text-white"})}),ce.jsxs("button",{className:"glass-card p-2 hover:bg-white/10 transition-colors duration-200 relative",onClick:()=>{h(e=>!e),p(!1),f(!1)},title:c("header.notifications"),children:[ce.jsx(O,{className:"w-5 h-5 text-gray-400 hover:text-white"}),x.length>0&&ce.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),u&&ce.jsxs("div",{className:"absolute right-28 top-16 z-50 w-80 glass-card p-4 border border-gray-700/50",children:[ce.jsx("div",{className:"text-sm font-semibold text-white mb-2",children:c("header.notifications")}),ce.jsx("div",{className:"space-y-2 text-sm",children:x.length>0?x.map((e,t)=>ce.jsx("div",{className:"p-2 bg-gray-800/50 rounded",children:e},t)):ce.jsx("div",{className:"p-2 bg-gray-800/50 rounded text-gray-400",children:c("common.noData")})}),ce.jsx("div",{className:"mt-3 text-right",children:ce.jsx("button",{className:"text-xs text-gray-400 hover:text-white",onClick:()=>h(!1),children:c("header.close")})})]}),ce.jsx("button",{className:"glass-card p-2 hover:bg-white/10 transition-colors duration-200",onClick:()=>{p(e=>!e),h(!1),f(!1)},title:c("header.settings"),children:ce.jsx(C,{className:"w-5 h-5 text-gray-400 hover:text-white"})}),m&&ce.jsxs("div",{className:"absolute right-16 top-16 z-50 w-72 glass-card p-4 border border-gray-700/50",children:[ce.jsx("div",{className:"text-sm font-semibold text-white mb-3",children:c("header.quickSettings")}),ce.jsx("div",{className:"text-sm text-gray-400 py-2",children:c("common.noData")}),ce.jsx("div",{className:"mt-3 text-right",children:ce.jsx("button",{className:"text-xs text-gray-400 hover:text-white",onClick:()=>p(!1),children:c("header.close")})})]}),ce.jsxs("button",{className:"flex items-center space-x-2 glass-card px-3 py-2 hover:bg-white/10 transition-colors duration-200",onClick:()=>{f(e=>!e),h(!1),p(!1)},title:c("header.profile"),children:[ce.jsx(b,{className:"w-5 h-5 text-gray-400"}),ce.jsx("span",{className:"text-sm text-gray-300",children:r||c("header.analyst")})]}),y&&ce.jsxs("div",{className:"absolute right-4 top-16 z-50 w-56 glass-card p-2 border border-gray-700/50",children:[ce.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:r||c("header.analyst")}),a&&ce.jsx("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-white/10 text-sm text-red-300",onClick:()=>{f(!1),a()},children:"Sign out"}),ce.jsx("button",{className:"w-full text-left px-3 py-2 rounded hover:bg-white/10 text-sm",onClick:()=>f(!1),children:c("header.close")})]})]})]})});var v},Ga=({onLogin:e})=>{const[t,s]=g.useState("login"),[r,a]=g.useState(""),[n,i]=g.useState(""),[l,o]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState(!1),p=pa;return ce.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100 flex items-center justify-center px-6",children:[ce.jsx("div",{className:"absolute inset-0 opacity-20",children:ce.jsx("div",{className:"absolute inset-0 background-gradient"})}),ce.jsx("div",{className:"relative z-10 w-full max-w-md",children:ce.jsxs("div",{className:"glass-card p-8 border border-gray-800/60",children:[ce.jsxs("div",{className:"mb-6 text-center",children:[ce.jsx("img",{src:"/logo.png",alt:"MarekNBA Analytics logo",className:"mx-auto h-60 w-auto object-contain"}),ce.jsx("h1",{className:"text-3xl font-semibold text-white",children:"MarekNBA Analytics"}),ce.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Sign in to continue"})]}),ce.jsxs("form",{onSubmit:s=>h(null,null,function*(){s.preventDefault(),o(""),d(""),m(!0);try{if("signup"===t){const t=yield function(e,t){return h(this,null,function*(){if(!pa||!ga)throw new Error("Sign up is not available");const{data:s,error:r}=yield ga.auth.signUp({email:e,password:t});if(r||!(null==s?void 0:s.user))throw new Error((null==r?void 0:r.message)||"Sign up failed");if(s.session){const e={username:s.user.email||s.user.id,role:s.user.role||"user",accessToken:s.session.access_token};return xa(e),{state:e,needsEmailConfirmation:!1}}return{state:null,needsEmailConfirmation:!0}})}(r.trim(),n);t.state?e(t.state):d("Account created. Check your email to confirm the address.")}else{const t=yield ja(r.trim(),n);e(t)}}catch(a){o("signup"===t?"Sign up failed. Check your email and password.":"Invalid username or password.")}finally{m(!1)}}),className:"space-y-4",children:[ce.jsxs("div",{children:[ce.jsx("label",{className:"block text-sm text-gray-300 mb-1",htmlFor:"email",children:p?"Email":"Username"}),ce.jsx("input",{id:"email",type:p?"email":"text",autoComplete:p?"email":"username",value:r,onChange:e=>a(e.target.value),className:"w-full rounded-md bg-gray-900/70 border border-gray-700/80 px-3 py-2 text-gray-100 placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/60",placeholder:p?"name@example.com":"admin",required:!0})]}),ce.jsxs("div",{children:[ce.jsx("label",{className:"block text-sm text-gray-300 mb-1",htmlFor:"password",children:"Password"}),ce.jsx("input",{id:"password",type:"password",autoComplete:"current-password",value:n,onChange:e=>i(e.target.value),className:"w-full rounded-md bg-gray-900/70 border border-gray-700/80 px-3 py-2 text-gray-100 placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/60",placeholder:"Enter your password",required:!0})]}),l&&ce.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 px-3 py-2 rounded",children:l}),c&&ce.jsx("div",{className:"text-sm text-blue-200 bg-blue-500/10 border border-blue-500/20 px-3 py-2 rounded",children:c}),ce.jsx("button",{type:"submit",disabled:u,className:"w-full rounded-md bg-blue-600/80 hover:bg-blue-600 text-white font-medium py-2 transition-colors disabled:opacity-60",children:u?"signup"===t?"Creating account...":"Signing in...":"signup"===t?"Create account":"Sign in"}),p&&ce.jsx("button",{type:"button",onClick:()=>{s(e=>"login"===e?"signup":"login"),o(""),d("")},className:"w-full text-sm text-gray-400 hover:text-gray-200 transition-colors",children:"signup"===t?"Already have an account? Sign in":"Need an account? Create one"})]})]})})]})},Wa=()=>{const{t:e,locale:t}=$a(),s={pace_trends:e("reports.trends.label.pace_trends"),offensive_efficiency:e("reports.trends.label.offensive_efficiency"),defensive_efficiency:e("reports.trends.label.defensive_efficiency"),three_point_shooting:e("reports.trends.label.three_point_shooting"),free_throw_trends:e("reports.trends.label.free_throw_trends"),ats_performance:e("reports.trends.label.ats_performance"),bulls:e("reports.trends.label.bulls"),focus_teams:e("reports.trends.label.focus_teams"),league_context:e("reports.trends.label.league_context"),betting_impact:e("reports.trends.label.betting_impact"),current:e("reports.trends.label.current"),avg:e("reports.trends.label.avg"),range:e("reports.trends.label.range"),trend:e("reports.trends.label.trend"),significance:e("reports.trends.label.significance"),ortg:e("reports.trends.label.ortg"),drtg:e("reports.trends.label.drtg"),pct:e("reports.trends.label.pct"),volume:e("reports.trends.label.volume"),attempts:e("reports.trends.label.attempts"),record:e("reports.trends.label.record"),home:e("reports.trends.label.home"),road:e("reports.trends.label.road"),combined:e("reports.trends.label.combined"),percentage:e("reports.trends.label.percentage"),rank:e("reports.trends.label.rank"),top:e("reports.trends.label.top"),bottom:e("reports.trends.label.bottom"),best:e("reports.trends.label.best"),worst:e("reports.trends.label.worst"),avg_ortg:e("reports.trends.label.avg_ortg"),avg_drtg:e("reports.trends.label.avg_drtg"),"7day_avg":e("reports.trends.label.7day_avg"),"7day_change":e("reports.trends.label.7day_change")},r=e=>{if(!e)return e;if(s[e])return s[e];const t=e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return s[t]?s[t]:e.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2")},a=e=>!!e&&/(^|_)(offrtg|defrtg|netrtg|ortg|drtg|rtg)(_|$)/i.test(e),n=(e,t)=>null==e?"-":"number"==typeof e&&Number.isFinite(e)?a(t)?e.toFixed(1):String(e):"string"==typeof e||"boolean"==typeof e?String(e):Array.isArray(e)?e.map(e=>n(e,t)).join(", "):"object"==typeof e?Object.entries(e).map(([e,t])=>`${r(e)}: ${n(t,e)}`).join(" | "):String(e),i=t=>{if("number"==typeof t&&Number.isFinite(t))return t.toFixed(1);if("string"==typeof t){const e=t.split(":");return e.length>1?e[1].trim():t}return e("common.noData")},l=(e,t)=>null==e?ce.jsx("span",{className:"text-gray-500",children:"-"}):"number"==typeof e&&Number.isFinite(e)?ce.jsx("span",{className:"text-white font-medium",children:a(t)?e.toFixed(1):String(e)}):"string"==typeof e||"boolean"==typeof e?ce.jsx("span",{className:"text-white font-medium",children:String(e)}):Array.isArray(e)?ce.jsx("div",{className:"space-y-1 text-sm text-gray-200",children:e.map((e,s)=>ce.jsx("div",{children:n(e,t)},s))}):"object"==typeof e?ce.jsx("div",{className:"space-y-1 text-sm text-gray-200",children:Object.entries(e).map(([e,t])=>ce.jsxs("div",{children:[ce.jsxs("span",{className:"text-gray-400",children:[r(e),":"]})," ",ce.jsx("span",{className:"text-white",children:n(t,e)})]},e))}):ce.jsx("span",{className:"text-white font-medium",children:String(e)}),o=e=>e&&"object"==typeof e?e:{},u=(e,t="")=>"string"==typeof e?e:t,m=e=>Array.isArray(e)?e.map(o):[],p=e=>Array.isArray(e)?e:[],[y,b]=g.useState([]),[f,x]=g.useState(null),[v,w]=g.useState(!0),[N,k]=g.useState(!1),[_,S]=g.useState({}),T=g.useCallback(()=>h(null,null,function*(){w(!0);try{const t=((yield Pa.getSaved(20)).reports||[]).map(t=>{const s=o(t),r=String(s.report_type||"");let a=null,n=e("reports.title.generic");r.startsWith("750am")?(a="750am",n=e("reports.title.750am")):r.startsWith("800am")?(a="800am",n=e("reports.title.800am")):r.startsWith("1100am")&&(a="1100am",n=e("reports.title.1100am"));const i=(e=>{if(!e)return{};if("string"==typeof e)try{const t=JSON.parse(e);return"object"==typeof t&&null!==t?{content:t}:{error:"invalid_json"}}catch(t){return{error:"invalid_json"}}return"object"==typeof e?{content:e}:{error:"unsupported_content"}})(s.content),l=i.error?"error":i.content?"ready":"error";return{id:String(s.id||""),type:a||"750am",title:n,generated:u(s.created_at,""),status:l,content:i.content||void 0,contentError:i.error}});b(t);const s=t.find(e=>"ready"===e.status)||t[0]||null;x(s)}catch(t){console.error("Failed to load reports:",t),b([]),x(null)}w(!1)}),[e]);g.useEffect(()=>{T()},[T]);const P=e=>{switch(e){case"ready":return"text-green-400";case"generating":return"text-yellow-400";case"error":return"text-red-400";default:return"text-gray-400"}},E=({report:s})=>{const r=(e=>{switch(e){case"750am":return j;case"800am":default:return I;case"1100am":return $}})(s.type),a=o(s.content);return ce.jsxs("div",{className:"glass-card p-4 cursor-pointer transition-all duration-300 hover:bg-white/10 "+((null==f?void 0:f.id)===s.id?"neon-border":""),onClick:()=>x(s),children:[ce.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("div",{className:"p-2 bg-blue-600/20 rounded-lg",children:ce.jsx(r,{className:"w-5 h-5 text-blue-400"})}),ce.jsxs("div",{children:[ce.jsx("h3",{className:"text-white font-semibold",children:s.title}),ce.jsxs("p",{className:"text-sm text-gray-400",children:[e("reports.generated"),": ",(n=s.generated,new Date(n).toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit",timeZone:"America/Chicago"}))]})]})]}),ce.jsxs("div",{className:`text-sm font-medium ${P(s.status)}`,children:["generating"===s.status&&ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400/30 border-t-yellow-400 rounded-full animate-spin"}),ce.jsx("span",{children:e("reports.status.generating")})]}),"ready"===s.status&&e("reports.status.ready"),"error"===s.status&&e("reports.status.error")]})]}),"ready"===s.status&&s.content&&ce.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:["750am"===s.type&&ce.jsxs("div",{children:[ce.jsxs("div",{children:[e("reports.summary.gamesAnalyzed"),": ",u(a.gamesAnalyzed,e("common.noData"))]}),ce.jsxs("div",{children:[e("reports.summary.featuredTeamLastGame"),": ",u(o(a.bullsAnalysis).lastGame,e("common.noData"))]})]}),"800am"===s.type&&ce.jsxs("div",{children:[ce.jsxs("div",{children:[e("reports.summary.yesterdayResults"),": ",p(a.yesterdayResults).length," ",e("reports.summary.gamesSuffix")]}),ce.jsxs("div",{children:[e("reports.summary.teamOffRtg"),": ",i(o(a.trends7Day).offRtg)]})]})]})]});var n},R=({report:s})=>{var a,i,g,y,b,f,x,v,w,N,k,T,A,P,E;if("ready"!==s.status||!s.content)return ce.jsx("div",{className:"text-center py-12",children:ce.jsx("div",{className:"text-gray-400 mb-4",children:"generating"===s.status?e("reports.empty.generating"):(s.contentError,e("reports.empty.noContent"))})});const R=o(s.content);return ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsx("h2",{className:"text-2xl font-bold text-white",title:"800am"===s.type?e("reports.tooltip.morningSummary"):void 0,children:s.title}),ce.jsxs("button",{className:"flex items-center space-x-2 glass-card px-4 py-2 hover:bg-white/10 transition-colors",onClick:()=>(s=>{h(null,null,function*(){var r,a,n,i,l,c,d,g,y,b,f,x,v,w,j,N,k,_,S;const{jsPDF:T}=yield me(()=>h(null,null,function*(){const{jsPDF:e}=yield import("./jspdf.es.min-D_8MiN8l.js").then(e=>e.j);return{jsPDF:e}}),[]),A=new T({unit:"pt",format:"a4"}),P=A.internal.pageSize.getWidth(),E=A.internal.pageSize.getHeight(),R=P-80,O=(e,t,s)=>{A.setFont("helvetica","normal"),A.setFontSize(s);const r=A.splitTextToSize(e,R);for(const a of r)t>E-48&&(A.addPage(),t=48),A.text(String(a),40,t),t+=s+4;return t},C=(e,t)=>(A.setFont("helvetica","bold"),A.setFontSize(12),t>E-48&&(A.addPage(),t=48),A.text(String(e),40,t),t+16),$=(e,t,s,r=0)=>{const a=r>0?" ".repeat(r):"";if(null==t)return O(`${a}${e}:`,s,10);if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return O(`${a}${e}: ${String(t)}`,s,10);try{const r=JSON.stringify(t);return O(`${a}${e}: ${r}`,s,9)}catch(n){return O(`${a}${e}: [object]`,s,9)}},z=s.title||s.type,I=s.generated?new Date(s.generated):new Date;let D=48;A.setFont("helvetica","bold"),A.setFontSize(16),A.text(String(z),40,D),D+=22,D=O(`${e("reports.generated")}: ${I.toLocaleString(t)}`,D,10),D+=6;const L=o(s.content);if("750am"===s.type){const t=m(null!=(r=L.resultsVsLine)?r:L.results_vs_line);if(t.length){D=C(e("reports.section.resultsVsClosingLine"),D);for(const e of t)D=O(`- ${u(e.team)}: ${u(e.result)}, ATS: ${u(e.ats)}, O/U: ${u(e.ou)}`,D,10);D+=8}const s=p(null!=(a=L.topTrends)?a:L.top_trends);if(s.length){D=C(e("reports.section.topTrends"),D);for(const e of s)D=O(`- ${String(e)}`,D,10);D+=8}const l=o(null!=(n=L.bullsAnalysis)?n:L.bulls_analysis);if(Object.keys(l).length){D=C(`${e("reports.section.teamPlayerAnalysis")} (Bulls)`,D);const t=u(l.lastGame);t&&(D=O(`Last Game: ${t}`,D,10));const s=m(null!=(i=l.keyPlayers)?i:l.key_players);if(s.length)for(const e of s)D=O(`- ${u(e.name)}: ${u(e.stats)} (${u(e.minutes)} min)`,D,10);D+=8}}else if("800am"===s.type){const t=o(null!=(l=L.executive_summary)?l:L.executiveSummary);if(Object.keys(t).length){D=C(e("reports.section.executiveSummary"),D);const s=u(t.headline);s&&(D=O(String(s),D,10));const r=p(null!=(c=t.key_takeaways)?c:t.keyTakeaways);if(r.length)for(const e of r)D=O(`- ${String(e)}`,D,10);const a=u(t.market_impact),n=u(t.bulls_highlight);a&&(D=O(`Market impact: ${String(a)}`,D,10)),n&&(D=O(`Bulls highlight: ${String(n)}`,D,10)),D+=8}const s=p(null!=(y=null!=(g=null!=(d=L.yesterday_performance)?d:L.yesterdayPerformance)?g:L.yesterdayResults)?y:L.yesterday_results);if(s.length){D=C(e("reports.section.yesterdayResults"),D);for(const e of s)if("string"==typeof e)D=O(`- ${e}`,D,10);else{const t=o(e);D=O(`- ${u(t.game)} | ATS: ${u(t.ats)} | O/U: ${u(t.ou)}`,D,10);const s=u(t.key_stats),r=u(t.betting_notes);s&&(D=O(`  ${String(s)}`,D,9)),r&&(D=O(`  Notes: ${String(r)}`,D,9))}D+=8}const r=null!=(f=null!=(b=L.seven_day_trends)?b:L.sevenDayTrends)?f:L.trends7Day;if(r&&"object"==typeof r){D=C(e("reports.section.sevenDayTrends"),D);for(const[e,t]of Object.entries(r))if(t&&"object"==typeof t&&!Array.isArray(t)){D=O(String(e).replace(/_/g," "),D,10);for(const[e,s]of Object.entries(t))D=$(String(e),s,D,2);D+=4}else D=$(String(e),t,D);D+=8}const a=o(null!=(w=null!=(v=null!=(x=L.bulls_form_analysis)?x:L.bulls_current_form)?v:L.bullsFormAnalysis)?w:L.bullsPlayers);if(Object.keys(a).length){D=C(`${e("reports.section.teamPlayersForm")} (Bulls)`,D);const t=m(null!=(N=null!=(j=a.player_form_l5)?j:a.playerFormL5)?N:a.players);if(t.length)for(const e of t){const t=u(e.name),s=u(e.stats)||u(e.form);D=O(`- ${t}: ${s}`,D,10)}D+=8}}else if("1100am"===s.type){const t=o(null!=(k=L.slate_overview)?k:L.slateOverview);if(Object.keys(t).length){D=C(e("reports.section.slateOverview"),D);for(const[e,s]of Object.entries(t))D=$(String(e).replace(/_/g," "),s,D);D+=8}const s=o(null!=(_=L.injury_intelligence)?_:L.injuryIntelligence);if(Object.keys(s).length){D=C(e("reports.section.injuryIntelligence"),D);for(const[e,t]of Object.entries(s))if(Array.isArray(t)){D=O(`${String(e).replace(/_/g," ")}:`,D,10);for(const e of t)if("string"==typeof e)D=O(`- ${e}`,D,10);else{const t=o(e);D=O(`- ${u(t.player)} (${u(t.team)}) - ${u(t.status||t.impact)}`,D,10)}}else D=$(String(e).replace(/_/g," "),t,D);D+=8}const r=m(null!=(S=L.matchup_analysis)?S:L.matchupAnalysis);if(r.length){D=C(e("reports.section.matchupAnalysis"),D);for(const e of r){D=O(`- ${u(e.game)} (${u(e.time)})`,D,10);const t=u(e.location);t&&(D=O(`  ${t}`,D,9))}D+=8}}else{D=C(e("reports.pdf.reportData"),D);const t=Object.keys(L||{});D=O(`${e("reports.pdf.keys")}: ${t.join(", ")}`,D,10)}const B=I.toISOString().replace(/[:.]/g,"-");A.save(`${s.type}-${B}.pdf`)}).catch(e=>{console.error("PDF export failed:",e)})})(s),title:e("reports.exportPdf"),children:[ce.jsx(z,{className:"w-4 h-4"}),ce.jsx("span",{children:e("reports.export")})]})]}),"750am"===s.type&&ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2 cursor-pointer",role:"button",tabIndex:0,onClick:()=>S(e=>{var t;return d(c({},e),{[`${s.id}:750:results`]:!(null==(t=e[`${s.id}:750:results`])||t)})}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),S(e=>{var t;return d(c({},e),{[`${s.id}:750:results`]:!(null==(t=e[`${s.id}:750:results`])||t)})}))},title:e("reports.tooltip.resultsVsClosingLine"),children:[ce.jsx(j,{className:"w-5 h-5 text-green-400"}),ce.jsx("span",{children:e("reports.section.resultsVsClosingLine")})]}),(null==(a=_[`${s.id}:750:results`])||a)&&ce.jsx("div",{className:"space-y-3",children:m(null!=(i=R.resultsVsLine)?i:R.results_vs_line).map((t,s)=>{const r=u(t.team,e("common.noData")),a=u(t.result,"-"),n=u(t.ats,"-"),i=u(t.ou,"-");return ce.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/30 rounded-lg",children:[ce.jsx("div",{className:"font-semibold text-white",children:r}),ce.jsxs("div",{className:"flex items-center space-x-4",children:[ce.jsx("span",{className:"px-2 py-1 rounded text-xs "+("W"===a?"bg-green-600/20 text-green-400":"bg-red-600/20 text-red-400"),children:a}),ce.jsx("span",{className:"px-2 py-1 rounded text-xs "+("COVER"===n?"bg-green-600/20 text-green-400":"PUSH"===n?"bg-yellow-600/20 text-yellow-400":"bg-red-600/20 text-red-400"),children:n}),ce.jsx("span",{className:"px-2 py-1 rounded text-xs "+("OVER"===i?"bg-blue-600/20 text-blue-400":"bg-purple-600/20 text-purple-400"),children:i})]})]},s)})})]}),ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsx("h3",{className:"text-lg font-semibold text-white mb-4 cursor-pointer",role:"button",tabIndex:0,onClick:()=>S(e=>{var t;return d(c({},e),{[`${s.id}:750:trends`]:!(null==(t=e[`${s.id}:750:trends`])||t)})}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),S(e=>{var t;return d(c({},e),{[`${s.id}:750:trends`]:!(null==(t=e[`${s.id}:750:trends`])||t)})}))},title:e("reports.tooltip.topTrends"),children:e("reports.section.topTrends")}),(null==(g=_[`${s.id}:750:trends`])||g)&&ce.jsx("div",{className:"space-y-2",children:p(null!=(y=R.topTrends)?y:R.top_trends).map((e,t)=>ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),ce.jsx("span",{className:"text-gray-300",children:n(e)})]},t))})]}),ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2 cursor-pointer",role:"button",tabIndex:0,onClick:()=>S(e=>{var t;return d(c({},e),{[`${s.id}:750:bulls`]:!(null==(t=e[`${s.id}:750:bulls`])||t)})}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),S(e=>{var t;return d(c({},e),{[`${s.id}:750:bulls`]:!(null==(t=e[`${s.id}:750:bulls`])||t)})}))},title:e("reports.tooltip.teamPlayerAnalysis"),children:[ce.jsx("span",{className:"text-red-400",children:""}),ce.jsx("span",{children:e("reports.section.teamPlayerAnalysis")})]}),(null==(b=_[`${s.id}:750:bulls`])||b)&&ce.jsxs("div",{className:"space-y-4",children:[ce.jsxs("div",{className:"text-gray-300 mb-4",children:[e("reports.label.lastGame"),": ",u(o(null!=(f=R.bullsAnalysis)?f:R.bulls_analysis).lastGame,e("common.noData"))]}),m(null!=(w=o(null!=(x=R.bullsAnalysis)?x:R.bulls_analysis).keyPlayers)?w:o(null!=(v=R.bullsAnalysis)?v:R.bulls_analysis).key_players).map((t,s)=>ce.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/30 rounded-lg",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"font-semibold text-white",children:u(t.name,e("common.noData"))}),ce.jsx("div",{className:"text-sm text-gray-400",children:u(t.stats,e("common.noData"))})]}),ce.jsx("div",{className:"text-right",children:ce.jsxs("div",{className:"text-gray-300",children:[u(t.minutes,e("common.noData"))," ",e("reports.label.minutesShort")]})})]},s))]})]})]}),"800am"===s.type&&ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsx("h3",{className:"text-lg font-semibold text-white mb-4 cursor-pointer",role:"button",tabIndex:0,onClick:()=>S(e=>{var t;return d(c({},e),{[`${s.id}:800:yesterday`]:!(null==(t=e[`${s.id}:800:yesterday`])||t)})}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),S(e=>{var t;return d(c({},e),{[`${s.id}:800:yesterday`]:!(null==(t=e[`${s.id}:800:yesterday`])||t)})}))},title:e("reports.tooltip.yesterdayResults"),children:e("reports.section.yesterdayResults")}),(null==(N=_[`${s.id}:800:yesterday`])||N)&&ce.jsx("div",{className:"space-y-2",children:p(R.yesterdayResults||R.yesterday_results||R.yesterdayPerformance||R.yesterday_performance).map((e,t)=>{const s=o(e);return ce.jsx("div",{className:"p-3 bg-gray-800/30 rounded-lg text-gray-300",children:"string"==typeof e?e:`${u(s.game)} - ATS: ${u(s.ats)} - O/U: ${u(s.ou)}`},t)})})]}),ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsx("h3",{className:"text-lg font-semibold text-white mb-4 cursor-pointer",role:"button",tabIndex:0,onClick:()=>S(e=>{var t;return d(c({},e),{[`${s.id}:800:trends`]:!(null==(t=e[`${s.id}:800:trends`])||t)})}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),S(e=>{var t;return d(c({},e),{[`${s.id}:800:trends`]:!(null==(t=e[`${s.id}:800:trends`])||t)})}))},title:e("reports.tooltip.sevenDayTrends"),children:e("reports.section.sevenDayTrends")}),(null==(k=_[`${s.id}:800:trends`])||k)&&ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(R.trends7Day||R.sevenDayTrends||R.seven_day_trends||{}).map(([e,t])=>ce.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:[ce.jsx("div",{className:"text-sm text-gray-400 capitalize",children:r(e)}),l(t,e)]},e))})]}),ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsx("h3",{className:"text-lg font-semibold text-white mb-4 cursor-pointer",role:"button",tabIndex:0,onClick:()=>S(e=>{var t;return d(c({},e),{[`${s.id}:800:form`]:!(null==(t=e[`${s.id}:800:form`])||t)})}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),S(e=>{var t;return d(c({},e),{[`${s.id}:800:form`]:!(null==(t=e[`${s.id}:800:form`])||t)})}))},title:e("reports.tooltip.teamPlayersForm"),children:e("reports.section.teamPlayersForm")}),(null==(T=_[`${s.id}:800:form`])||T)&&ce.jsx("div",{className:"space-y-3",children:m(o(R.bullsPlayers).players||o(R.bulls_form_analysis).player_form_l5||o(R.bulls_current_form).player_form_l5).map((t,s)=>{const r=u(t.trend),a=u(t.form);return ce.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/30 rounded-lg",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"font-semibold text-white",children:u(t.name,e("common.noData"))}),ce.jsx("div",{className:"text-sm text-gray-400",children:a||u(t.stats,e("common.noData"))})]}),ce.jsx("div",{className:"px-2 py-1 rounded text-xs "+(r.toLowerCase().includes("excellent")?"bg-green-600/20 text-green-400":r.toLowerCase().includes("solid")||a.toLowerCase().includes("solid")?"bg-blue-600/20 text-blue-400":"bg-yellow-600/20 text-yellow-400"),children:r||a||"-"})]},s)})})]})]}),"1100am"===s.type&&ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsx("h3",{className:"text-lg font-semibold text-white mb-4 cursor-pointer",role:"button",tabIndex:0,onClick:()=>S(e=>{var t;return d(c({},e),{[`${s.id}:1100:slate`]:!(null==(t=e[`${s.id}:1100:slate`])||t)})}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),S(e=>{var t;return d(c({},e),{[`${s.id}:1100:slate`]:!(null==(t=e[`${s.id}:1100:slate`])||t)})}))},title:e("reports.tooltip.slateOverview"),children:e("reports.section.slateOverview")}),(null==(A=_[`${s.id}:1100:slate`])||A)&&ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(R.slate_overview||R.slateOverview||{}).map(([e,t])=>ce.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:[ce.jsx("div",{className:"text-sm text-gray-400 capitalize",children:e.replace(/_/g," ")}),ce.jsx("div",{className:"text-white font-medium",children:"string"==typeof t||"number"==typeof t?String(t):JSON.stringify(t)})]},e))})]}),ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsx("h3",{className:"text-lg font-semibold text-white mb-4 cursor-pointer",role:"button",tabIndex:0,onClick:()=>S(e=>{var t;return d(c({},e),{[`${s.id}:1100:injuries`]:!(null==(t=e[`${s.id}:1100:injuries`])||t)})}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),S(e=>{var t;return d(c({},e),{[`${s.id}:1100:injuries`]:!(null==(t=e[`${s.id}:1100:injuries`])||t)})}))},title:e("reports.tooltip.injuryIntelligence"),children:e("reports.section.injuryIntelligence")}),(null==(P=_[`${s.id}:1100:injuries`])||P)&&ce.jsx("div",{className:"space-y-3",children:Object.entries(R.injury_intelligence||R.injuryIntelligence||{}).map(([e,t])=>ce.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg",children:[ce.jsx("div",{className:"text-sm text-gray-400 capitalize mb-2",children:e.replace(/_/g," ")}),Array.isArray(t)?ce.jsx("div",{className:"space-y-2",children:t.map((e,t)=>{const s=o(e),r=u(s.player),a=u(s.team),n=u(s.status),i=u(s.impact);return ce.jsx("div",{className:"text-gray-300",children:"string"==typeof e?e:`${r} (${a})${n?` - ${n}`:""}${i?` - ${i}`:""}`},t)})}):ce.jsx("div",{className:"text-gray-300",children:"string"==typeof t?t:JSON.stringify(t)})]},e))})]}),ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsx("h3",{className:"text-lg font-semibold text-white mb-4 cursor-pointer",role:"button",tabIndex:0,onClick:()=>S(e=>{var t;return d(c({},e),{[`${s.id}:1100:matchups`]:!(null==(t=e[`${s.id}:1100:matchups`])||t)})}),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),S(e=>{var t;return d(c({},e),{[`${s.id}:1100:matchups`]:!(null==(t=e[`${s.id}:1100:matchups`])||t)})}))},title:e("reports.tooltip.matchupAnalysis"),children:e("reports.section.matchupAnalysis")}),(null==(E=_[`${s.id}:1100:matchups`])||E)&&ce.jsx("div",{className:"space-y-2",children:m(R.matchup_analysis||R.matchupAnalysis).map((t,s)=>ce.jsxs("div",{className:"p-3 bg-gray-800/30 rounded-lg text-gray-300",children:[ce.jsx("div",{className:"text-white font-semibold",children:u(t.game,e("common.noData"))}),ce.jsxs("div",{className:"text-sm text-gray-400",children:[u(t.time),u(t.location)?` - ${u(t.location)}`:""]})]},s))})]})]})]})};return v?ce.jsx("div",{className:"flex items-center justify-center h-64",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"w-12 h-12 border-4 border-blue-400/30 border-t-blue-400 rounded-full animate-spin mx-auto mb-4"}),ce.jsx("p",{className:"text-gray-400",children:e("reports.loading")})]})}):ce.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[ce.jsx("div",{className:"xl:col-span-1",children:ce.jsxs("div",{className:"glass-card",children:[ce.jsxs("div",{className:"p-6 border-b border-gray-700/50",children:[ce.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",title:e("reports.tooltip.dailyReports"),children:[ce.jsx($,{className:"w-5 h-5 text-blue-400"}),ce.jsx("span",{children:e("reports.list.titleDailyReports")})]}),ce.jsx("p",{className:"text-sm text-gray-400 mt-1",children:e("reports.list.timezoneChicago")}),ce.jsx("button",{className:"mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold py-2 px-4 rounded transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed",onClick:()=>h(null,null,function*(){k(!0);try{yield Promise.all([Pa.get750Report(),Pa.get800Report(),Pa.get1100Report()])}catch(e){console.error("Failed to generate reports:",e)}finally{yield T(),k(!1)}}),disabled:N,children:e(N?"reports.list.generatingReports":"reports.list.generateNow")}),ce.jsxs("div",{className:"mt-4 rounded-lg border border-gray-700/60 bg-gray-900/40 p-4",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:e("reports.setupChecklist.title")}),ce.jsxs("div",{className:"mt-3 space-y-2 text-sm text-gray-300",children:[ce.jsxs("div",{children:["[ ] ",e("reports.setupChecklist.supabaseConnected")]}),ce.jsxs("div",{children:["[ ] ",e("reports.setupChecklist.schedulerOn")]}),ce.jsxs("div",{children:["[ ] ",e("reports.setupChecklist.scrapingEnabled")]}),ce.jsxs("div",{children:["[ ] ",e("reports.setupChecklist.historicalImportDone")]})]})]})]}),ce.jsx("div",{className:"p-6 space-y-4",children:y.map(e=>ce.jsx(E,{report:e},e.id))})]})}),ce.jsx("div",{className:"xl:col-span-2",children:ce.jsx("div",{className:"glass-card",children:f?ce.jsx("div",{className:"p-6",children:ce.jsx(R,{report:f})}):ce.jsxs("div",{className:"p-12 text-center",children:[ce.jsx(A,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),ce.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:e("reports.selectReport.title")}),ce.jsx("p",{className:"text-gray-500",children:e("reports.selectReport.subtitle")})]})})})]})},qa=()=>{const{t:e,locale:t}=$a(),[s,r]=g.useState([]),[a,n]=g.useState(1e3),[i,l]=g.useState("all"),[o,c]=g.useState(!0),[d,u]=g.useState(null),[m,p]=g.useState(""),[y,b]=g.useState(""),[f,v]=g.useState(null);g.useEffect(()=>{h(null,null,function*(){c(!0),u(null);try{const e=yield Ra.getRecommendations();r(Array.isArray(null==e?void 0:e.picks)?e.picks:[])}catch(t){r([]),u(e("common.error"))}finally{c(!1)}})},[e]);const w=e=>!Number.isFinite(e)||e<=1?null:e>=2?Math.round(100*(e-1)):-Math.round(100/(e-1)),j=t=>null!==t&&Number.isFinite(t)?t>0?`+${t}`:`${t}`:e("common.noData"),N=(t,s=1)=>null!==t&&Number.isFinite(t)?`${(100*t).toFixed(s)}%`:e("common.noData"),k=t=>Number.isFinite(t)?`${(100*t).toFixed(1)}%`:e("common.noData"),_=new Set([...s].sort((e,t)=>{var s,r;return(null!=(s=t.edge)?s:0)-(null!=(r=e.edge)?r:0)}).slice(0,3).map(e=>`${e.game_id}:${e.team}`)),S="all"===i?s:"value"===i?s.filter(e=>{var t;return(null!=(t=e.edge)?t:0)>0}):"featured"===i?s.filter(e=>_.has(`${e.game_id}:${e.team}`)):s.filter(e=>!_.has(`${e.game_id}:${e.team}`)),A=[...s].filter(e=>{var t;return(null!=(t=e.edge)?t:0)>0}).sort((e,t)=>{var s,r;return(null!=(s=t.edge)?s:0)-(null!=(r=e.edge)?r:0)}).slice(0,5);return o?ce.jsx("div",{className:"flex items-center justify-center h-64",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"w-12 h-12 border-4 border-green-400/30 border-t-green-400 rounded-full animate-spin mx-auto mb-4"}),ce.jsx("p",{className:"text-gray-400",children:e("betting.loading")})]})}):ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-2",children:[ce.jsx(T,{className:"w-6 h-6 text-green-400"}),ce.jsx("span",{children:e("betting.title")})]}),ce.jsx("div",{className:"glass-card px-4 py-2",children:ce.jsxs("div",{className:"flex items-center space-x-4",children:[ce.jsxs("div",{className:"text-sm text-gray-400",children:[e("betting.bankroll"),":"]}),ce.jsxs("div",{className:"text-lg font-bold text-green-400",children:["$",a]}),ce.jsx("input",{type:"number",value:a,onChange:e=>n(Number(e.target.value)),"aria-label":e("betting.bankroll"),title:e("betting.bankroll"),className:"w-20 bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm text-white"})]})})]}),ce.jsx("div",{className:"flex space-x-2",children:["all","featured","general","value"].map(t=>ce.jsx("button",{onClick:()=>l(t),className:"px-4 py-2 rounded-lg text-sm transition-colors capitalize "+(i===t?"bg-blue-600/20 text-blue-400 border border-blue-400/30":"glass-card text-gray-300 hover:text-white hover:bg-white/10"),children:e(`betting.category.${t}`)},t))}),ce.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[ce.jsx("div",{className:"xl:col-span-2",children:ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center justify-between",title:e("betting.tooltip.recommendedBets"),children:[ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(x,{className:"w-5 h-5 text-blue-400"}),ce.jsx("span",{children:e("betting.section.recommendedBets")})]}),ce.jsxs("span",{className:"text-sm text-gray-400",children:[S.length," ",e("betting.section.betsSuffix")]})]})}),ce.jsxs("div",{className:"p-6 space-y-4",children:[d&&ce.jsx("div",{className:"glass-card p-4 border border-red-500/30 text-red-300",children:d}),0!==S.length||d?S.map(s=>{var r;const a=(e=>{if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:t})(s.commence_time),n=w(s.best_price),i=_.has(`${s.game_id}:${s.team}`),l=(null!=(r=s.edge)?r:0)>0,o=i?"border-purple-400/30 bg-purple-600/5":l?"border-green-400/30 bg-green-600/5":"border-blue-400/30 bg-blue-600/5";return ce.jsxs("div",{className:`glass-card p-4 border ${o}`,children:[ce.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ce.jsxs("div",{children:[ce.jsxs("h4",{className:"text-lg font-semibold text-white",children:[s.team," ",e("betting.pick.vs")," ",s.opponent]}),ce.jsxs("div",{className:"text-sm text-gray-400",children:[e("betting.pick.market"),": ",e("betting.pick.market.h2h"),a?`  ${a.toLocaleTimeString(t,{timeZone:"America/Chicago"})}`:""]})]}),ce.jsxs("div",{className:"text-right",children:[ce.jsx("div",{className:"text-lg font-bold text-green-400",children:j(n)}),ce.jsxs("div",{className:"text-xs text-gray-400",children:[e("betting.pick.book"),": ",s.best_book||e("common.noData")]})]})]}),ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[ce.jsxs("div",{className:"bg-gray-800/30 rounded p-3",children:[ce.jsx("div",{className:"text-xs text-gray-400",children:e("betting.pick.edge")}),ce.jsx("div",{className:"text-white font-semibold",children:k(s.edge)})]}),ce.jsxs("div",{className:"bg-gray-800/30 rounded p-3",children:[ce.jsx("div",{className:"text-xs text-gray-400",children:e("betting.pick.consensusProb")}),ce.jsx("div",{className:"text-white font-semibold",children:N(s.consensus_prob,1)})]}),ce.jsxs("div",{className:"bg-gray-800/30 rounded p-3",children:[ce.jsx("div",{className:"text-xs text-gray-400",children:e("betting.pick.bestPrice")}),ce.jsx("div",{className:"text-white font-semibold",children:s.best_price.toFixed(3)})]})]})]},`${s.game_id}:${s.team}`)}):ce.jsx("div",{className:"glass-card p-4 text-gray-400",children:e("common.noData")})]})]})}),ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",title:e("betting.tooltip.valueBets"),children:[ce.jsx(D,{className:"w-5 h-5 text-green-400"}),ce.jsx("span",{children:e("betting.section.valueBets")})]})}),ce.jsx("div",{className:"p-6 space-y-3",children:0===A.length?ce.jsx("div",{className:"glass-card p-3 text-gray-400",children:e("common.noData")}):A.map(t=>{const s=w(t.best_price);return ce.jsxs("div",{className:"glass-card p-3 border border-green-400/20",children:[ce.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ce.jsxs("div",{className:"text-sm font-medium text-white",children:[t.team," ",e("betting.pick.mlShort")]}),ce.jsx("div",{className:"text-green-400 font-bold",children:k(t.edge)})]}),ce.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[t.team," ",e("betting.pick.vs")," ",t.opponent]}),ce.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[ce.jsxs("div",{children:[ce.jsxs("span",{className:"text-gray-400",children:[e("betting.value.book"),":"]})," ",j(s)]}),ce.jsxs("div",{children:[ce.jsxs("span",{className:"text-gray-400",children:[e("betting.value.fairProb"),":"]})," ",N(t.consensus_prob,1)]}),ce.jsxs("div",{children:[ce.jsxs("span",{className:"text-gray-400",children:[e("betting.pick.book"),":"]})," ",t.best_book||e("common.noData")]}),ce.jsxs("div",{children:[ce.jsxs("span",{className:"text-gray-400",children:[e("betting.pick.bestPrice"),":"]})," ",t.best_price.toFixed(3)]})]})]},`${t.game_id}:${t.team}`)})})]}),ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",title:e("betting.tooltip.kellyCalculator"),children:[ce.jsx(L,{className:"w-5 h-5 text-purple-400"}),ce.jsx("span",{children:e("betting.section.kellyCalculator")})]})}),ce.jsx("div",{className:"p-6",children:ce.jsxs("div",{className:"space-y-4",children:[ce.jsxs("div",{children:[ce.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:e("betting.kelly.oddsLabel")}),ce.jsx("input",{type:"number",placeholder:"-110",value:m,onChange:e=>p(e.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white"})]}),ce.jsxs("div",{children:[ce.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:e("betting.kelly.winProbLabel")}),ce.jsx("input",{type:"number",placeholder:"55",value:y,onChange:e=>b(e.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white"})]}),ce.jsx("button",{onClick:()=>{const e=parseFloat(m),t=parseFloat(y)/100;if(isNaN(e)||isNaN(t)||t<=0||t>=1)return void v(null);const s=(e>0?e/100+1:100/Math.abs(e)+1)-1,r=(s*t-(1-t))/s;if(r<=0)return void v({fraction:0,percentage:0,stake:0});const n=.25*r;v({fraction:n,percentage:100*n,stake:n*a})},className:"w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded transition-colors",children:e("betting.kelly.calculate")}),f?ce.jsxs("div",{className:"text-center p-3 bg-purple-600/10 border border-purple-600/30 rounded",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:e("betting.kelly.recommendedStake")}),ce.jsxs("div",{className:"text-lg font-bold text-purple-400",children:[f.percentage.toFixed(2),"% ",e("betting.kelly.ofBankroll")]}),ce.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["$",f.stake.toFixed(2)," ",e("betting.kelly.from")," $",a]}),0===f.fraction&&ce.jsx("div",{className:"text-xs text-red-400 mt-2",children:e("betting.kelly.negativeExpectation")})]}):ce.jsx("div",{className:"text-center p-3 bg-purple-600/10 border border-purple-600/30 rounded",children:ce.jsx("div",{className:"text-sm text-gray-400",children:e("betting.kelly.enterToCalculate")})})]})})]}),ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",title:e("betting.tooltip.sessionStats"),children:[ce.jsx(B,{className:"w-5 h-5 text-yellow-400"}),ce.jsx("span",{children:e("betting.section.sessionStats")})]})}),ce.jsx("div",{className:"p-6",children:ce.jsx("div",{className:"glass-card p-4 text-gray-400",children:e("common.noData")})})]}),ce.jsxs("div",{className:"glass-card border-yellow-400/20",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",title:e("betting.tooltip.riskAlerts"),children:[ce.jsx(P,{className:"w-5 h-5 text-yellow-400"}),ce.jsx("span",{children:e("betting.section.riskAlerts")})]})}),ce.jsx("div",{className:"p-6",children:ce.jsx("div",{className:"glass-card p-4 text-gray-400",children:e("common.noData")})})]})]})]})]})},Ka=({selectedGameId:e})=>{const{t:t,locale:s}=$a(),[r,a]=g.useState([]),[n,i]=g.useState([]),[l,o]=g.useState(null),[c,d]=g.useState(new Date),[u,m]=g.useState(!0),[p,y]=g.useState(!1),b=e=>!Number.isFinite(e)||e<=1?null:e>=2?Math.round(100*(e-1)):-Math.round(100/(e-1)),x=g.useCallback(()=>h(null,null,function*(){m(!0);try{const e=(yield Ta.getToday()).games||[],r=yield Promise.all(e.filter(e=>"string"==typeof(null==e?void 0:e.id)&&""!==e.id.trim()).map(e=>h(null,null,function*(){const r=String(e.id),a=String(e.home_team||""),n=String(e.away_team||""),i=e.commence_time?new Date(e.commence_time).toLocaleTimeString(s,{timeZone:"America/Chicago"}):t("common.tbd"),l=(yield Ta.getOdds(r)).odds||[],o={};for(const e of l){const t=String(e.bookmaker_title||e.bookmaker_key||"");t&&(o[t]=o[t]||[],o[t].push(e))}const c=Object.entries(o).map(([e,t])=>{var s,r,i,l;const o=t.filter(e=>"h2h"===e.market_type),c=t.filter(e=>"spread"===e.market_type||"spreads"===e.market_type),d=t.filter(e=>"totals"===e.market_type),u=(e,t)=>e.find(e=>String(e.team||"").trim().toLowerCase()===t.trim().toLowerCase()),h=u(o,a),m=u(o,n),p=u(c,a),g=u(c,n),y=d.find(e=>"over"===String(e.outcome_name||"").toLowerCase()),f=d.find(e=>"under"===String(e.outcome_name||"").toLowerCase()),x=null!=(r=null!=(s=null==p?void 0:p.point)?s:null==g?void 0:g.point)?r:null,v=null!=(l=null!=(i=null==y?void 0:y.point)?i:null==f?void 0:f.point)?l:null,w=b(Number(null==h?void 0:h.price)),j=b(Number(null==m?void 0:m.price)),N=b(Number(null==p?void 0:p.price)),k=b(Number(null==g?void 0:g.price)),_=b(Number(null==y?void 0:y.price)),S=b(Number(null==f?void 0:f.price));return{name:e,moneyline:{home:w,away:j},spread:{line:null==x?null:Number(x),home:N,away:k},total:{line:null==v?null:Number(v),over:_,under:S}}});return{gameId:r,homeTeam:a,awayTeam:n,startTime:i,bookmakers:c,movements:[]}})));a(r),i([])}catch(r){console.error("Failed to load odds:",r),a([]),i([])}finally{m(!1),e&&o(e)}}),[e,t,s]);g.useEffect(()=>{x()},[x]),g.useEffect(()=>{!u&&e&&o(e)},[e,u]);const v=(e,s)=>"number"==typeof e&&Number.isFinite(e)?(e=>e>0?`+${e}`:`${e}`)(e):s||t("common.noData"),w=e=>e.some(e=>{var t,s,r;return"number"==typeof(null==(t=null==e?void 0:e.spread)?void 0:t.line)||Number.isFinite(null==(s=null==e?void 0:e.spread)?void 0:s.home)||Number.isFinite(null==(r=null==e?void 0:e.spread)?void 0:r.away)}),k=(e,t,s)=>{let r=null,a=null;return e.forEach(e=>{let n;"moneyline"===t?n="home"===s?e.moneyline.home:e.moneyline.away:"spread"===t?n="home"===s?e.spread.home:e.spread.away:"total"===t&&(n="over"===s?e.total.over:e.total.under),"number"==typeof n&&Number.isFinite(n)&&(null===a||n>a)&&(a=n,r=e.name)}),{value:a,book:r}},_=e=>{switch(e){case"high":return"border-red-400/30 bg-red-600/10 text-red-400";case"medium":return"border-yellow-400/30 bg-yellow-600/10 text-yellow-400";case"low":return"border-blue-400/30 bg-blue-600/10 text-blue-400";default:return"border-gray-400/30 bg-gray-600/10 text-gray-400"}};return u?ce.jsx("div",{className:"flex items-center justify-center h-64",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"w-12 h-12 border-4 border-blue-400/30 border-t-blue-400 rounded-full animate-spin mx-auto mb-4"}),ce.jsx("p",{className:"text-gray-400",children:t("odds.loading")})]})}):ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-2",children:[ce.jsx(f,{className:"w-6 h-6 text-blue-400"}),ce.jsx("span",{children:t("odds.title")})]}),ce.jsxs("div",{className:"flex items-center space-x-4",children:[l&&ce.jsxs("div",{className:"glass-card px-3 py-2 flex items-center space-x-2",children:[ce.jsxs("span",{className:"text-sm text-gray-300",children:[t("odds.selectedGame"),":"]}),ce.jsx("span",{className:"text-sm text-blue-400",children:l}),ce.jsx("button",{onClick:()=>{o(null),y(!1)},className:"text-xs text-gray-400 hover:text-white",children:t("common.clear")})]}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx("input",{type:"checkbox",checked:p,onChange:e=>y(e.target.checked),disabled:!l,"aria-label":t("odds.onlySelected"),title:t("odds.onlySelected"),className:"rounded"}),ce.jsx("span",{className:"text-sm "+(l?"text-gray-300":"text-gray-500"),children:t("odds.onlySelected")})]}),ce.jsx("button",{onClick:()=>h(null,null,function*(){yield x(),d(new Date)}),"aria-label":t("odds.refresh"),title:t("odds.refresh"),className:"glass-card p-2 hover:bg-white/10 transition-colors",children:ce.jsx(R,{className:"w-5 h-5 text-gray-400 hover:text-white"})}),ce.jsx("div",{className:"glass-card px-3 py-2",children:ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),ce.jsxs("span",{className:"text-sm text-gray-300",children:[t("odds.lastUpdate"),": ",c.toLocaleTimeString(s,{timeZone:"America/Chicago"})]})]})})]})]}),ce.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[ce.jsx("div",{className:"xl:col-span-1",children:ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",title:t("odds.tooltip.liveAlerts"),children:[ce.jsx(P,{className:"w-5 h-5 text-yellow-400"}),ce.jsx("span",{children:t("odds.liveAlerts")})]})}),ce.jsx("div",{className:"p-6 space-y-3",children:n.map(e=>ce.jsxs("div",{className:`p-3 rounded-lg border ${_(e.severity)}`,children:[ce.jsxs("div",{className:"flex items-start justify-between mb-2",children:[ce.jsx("div",{className:"text-sm font-medium",children:e.game}),ce.jsx("div",{className:"text-xs opacity-70",children:e.time})]}),ce.jsx("div",{className:"text-sm opacity-90",children:e.message}),ce.jsxs("div",{className:"flex items-center justify-between mt-2",children:[ce.jsx("span",{className:"text-xs px-2 py-1 rounded "+("movement"===e.type?"bg-blue-600/20 text-blue-400":"value"===e.type?"bg-green-600/20 text-green-400":"bg-red-600/20 text-red-400"),children:t(`odds.alertType.${e.type}`)}),ce.jsx("span",{className:"text-xs opacity-60 capitalize",children:t(`odds.severity.${e.severity}`)})]})]},e.id))})]})}),ce.jsx("div",{className:"xl:col-span-3",children:ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center justify-between",title:t("odds.tooltip.comparison"),children:[ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(j,{className:"w-5 h-5 text-green-400"}),ce.jsx("span",{children:t("odds.comparisonTitle")})]}),ce.jsxs("span",{className:"text-sm text-gray-400",children:[r.length," ",t("odds.gamesSuffix")]})]})}),ce.jsx("div",{className:"p-6 space-y-6",children:(p&&l?r.filter(e=>e.gameId===l):r).map(e=>{var s,r,a;return ce.jsxs("div",{className:"glass-card p-4 cursor-pointer transition-all duration-300 "+(l===e.gameId?"neon-border":"hover:bg-white/5"),onClick:()=>o(l===e.gameId?null:e.gameId),children:[ce.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ce.jsxs("div",{children:[ce.jsxs("div",{className:"text-lg font-semibold text-white",children:[e.homeTeam," vs ",e.awayTeam]}),ce.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[ce.jsxs("div",{className:"flex items-center space-x-1",children:[ce.jsx(A,{className:"w-4 h-4"}),ce.jsx("span",{children:e.startTime})]}),e.movements.length>0&&ce.jsxs("div",{className:"flex items-center space-x-1",children:[ce.jsx(f,{className:"w-4 h-4 text-yellow-400"}),ce.jsxs("span",{children:[e.movements.length," movements"]})]})]})]}),ce.jsx("div",{className:"text-right",children:ce.jsx("span",{className:"px-2 py-1 bg-blue-600/20 text-blue-400 text-xs rounded",children:t("odds.featured")})})]}),ce.jsxs("div",{className:"grid gap-4 mb-4 "+(w(e.bookmakers)?"grid-cols-3":"grid-cols-2"),children:[w(e.bookmakers)&&ce.jsxs("div",{className:"text-center p-3 bg-gray-800/30 rounded-lg",children:[ce.jsx("div",{className:"text-xs text-gray-400 mb-1",children:t("odds.label.spread")}),ce.jsx("div",{className:"text-white font-semibold",children:(()=>{const s=(e=>{var t;const s=e.find(e=>{var t;return"number"==typeof(null==(t=null==e?void 0:e.spread)?void 0:t.line)});return"number"==typeof(null==(t=null==s?void 0:s.spread)?void 0:t.line)?s.spread.line:null})(e.bookmakers);return"number"!=typeof s?t("common.noData"):`${s>0?"+":""}${s}`})()}),ce.jsxs("div",{className:"text-xs text-green-400",children:[t("odds.best"),": ",v(k(e.bookmakers,"spread","home").value,t("common.noData"))]})]}),ce.jsxs("div",{className:"text-center p-3 bg-gray-800/30 rounded-lg",children:[ce.jsx("div",{className:"text-xs text-gray-400 mb-1",children:t("odds.label.total")}),ce.jsx("div",{className:"text-white font-semibold",children:"number"==typeof(null==(s=e.bookmakers[0])?void 0:s.total.line)?e.bookmakers[0].total.line:t("common.noData")}),ce.jsxs("div",{className:"text-xs text-green-400",children:["O: ",v(k(e.bookmakers,"total","over").value)]})]}),ce.jsxs("div",{className:"text-center p-3 bg-gray-800/30 rounded-lg",children:[ce.jsx("div",{className:"text-xs text-gray-400 mb-1",children:t("odds.label.moneyline")}),ce.jsx("div",{className:"text-white font-semibold",children:v(null!=(a=null==(r=e.bookmakers[0])?void 0:r.moneyline.home)?a:null)}),ce.jsxs("div",{className:"text-xs text-green-400",children:[t("odds.best"),": ",v(k(e.bookmakers,"moneyline","home").value)]})]})]}),e.movements.length>0&&ce.jsxs("div",{className:"border-t border-gray-700/50 pt-3",children:[ce.jsx("div",{className:"text-sm font-medium text-gray-300 mb-2",children:t("odds.recentMovements")}),ce.jsx("div",{className:"flex space-x-4",children:e.movements.slice(0,3).map((e,t)=>{return ce.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[(s=e.direction,"up"===s?ce.jsx(j,{className:"w-4 h-4 text-green-400"}):ce.jsx(N,{className:"w-4 h-4 text-red-400"})),ce.jsxs("span",{className:"text-gray-400",children:[e.type,": ",e.from,"  ",e.to]}),ce.jsxs("span",{className:"text-xs text-gray-500",children:["(",e.time,")"]})]},t);var s})})]}),l===e.gameId&&ce.jsx("div",{className:"border-t border-gray-700/50 pt-4 mt-4",children:ce.jsx("div",{className:"overflow-x-auto",children:ce.jsxs("table",{className:"w-full text-sm",children:[ce.jsx("thead",{children:ce.jsxs("tr",{className:"border-b border-gray-700/50",children:[ce.jsx("th",{className:"text-left py-2 text-gray-400",children:t("odds.table.sportsbook")}),w(e.bookmakers)&&ce.jsx("th",{className:"text-center py-2 text-gray-400",children:t("odds.label.spread")}),ce.jsx("th",{className:"text-center py-2 text-gray-400",children:t("odds.label.total")}),ce.jsx("th",{className:"text-center py-2 text-gray-400",children:t("odds.label.moneyline")})]})}),ce.jsx("tbody",{children:e.bookmakers.map((s,r)=>ce.jsxs("tr",{className:"border-b border-gray-800/50",children:[ce.jsx("td",{className:"py-2 font-medium text-white",children:s.name}),w(e.bookmakers)&&ce.jsxs("td",{className:"text-center py-2",children:[ce.jsx("div",{className:"text-white",children:"number"==typeof s.spread.line?`${s.spread.line>0?"+":""}${s.spread.line}`:t("common.noData")}),ce.jsxs("div",{className:"text-xs text-gray-400",children:[v(s.spread.home,t("common.noData"))," / ",v(s.spread.away,t("common.noData"))]})]}),ce.jsxs("td",{className:"text-center py-2",children:[ce.jsx("div",{className:"text-white",children:s.total.line}),ce.jsxs("div",{className:"text-xs text-gray-400",children:[v(s.total.over)," / ",v(s.total.under)]})]}),ce.jsx("td",{className:"text-center py-2",children:ce.jsxs("div",{className:"text-xs text-gray-400",children:[v(s.moneyline.home)," / ",v(s.moneyline.away)]})})]},r))})]})})})]},e.gameId)})})]})})]})]})},Va=e=>e&&"object"==typeof e?e:{},Ha=(e,t="")=>"string"==typeof e?e:t,Ja=e=>{const t=Va(e),s=Ha(t.id),r=Ha(t.name);if(!s||!r)return null;const a=Va(t.teams);return{id:s,name:r,team_abbreviation:Ha(t.team_abbreviation)||void 0,position:Ha(t.position)||void 0,jersey_number:"number"==typeof t.jersey_number?t.jersey_number:void 0,is_active:"boolean"==typeof t.is_active?t.is_active:void 0,basketball_reference_id:Ha(t.basketball_reference_id)||void 0,basketball_reference_url:Ha(t.basketball_reference_url)||void 0,teams:a.abbreviation?{abbreviation:Ha(a.abbreviation),full_name:Ha(a.full_name)}:void 0,stats:t.stats||void 0,bio:t.bio||void 0,recent_games:t.recent_games||void 0}},Za=e=>{const t=Va(e),s=Ha(t.abbreviation);return s?{abbreviation:s}:null},Ya=()=>{var e;const{t:t}=$a(),[s,r]=g.useState([]),[a,n]=g.useState(!0),[i,l]=g.useState(""),[o,d]=g.useState("All"),[u,m]=g.useState("All"),[p,f]=g.useState(null),[x,N]=g.useState(null),[k,_]=g.useState(!1),[S,T]=g.useState([]),[A,P]=g.useState(!1),[E,R]=g.useState([]),O=e=>({ppg:t("players.stats.ppg"),rpg:t("players.stats.rpg"),apg:t("players.stats.apg"),fg_percentage:t("players.stats.fgPct"),three_point_percentage:t("players.stats.tpPct"),ft_percentage:t("players.stats.ftPct"),steals:t("players.stats.steals"),blocks:t("players.stats.blocks"),turnovers:t("players.stats.turnovers"),minutes_per_game:t("players.stats.mpg")}[e]||e),C=({values:e,tone:s})=>{if(!e.length)return ce.jsx("div",{className:"text-xs text-gray-500",children:t("common.noData")});const r=((e,t,s)=>{if(0===e.length)return"";const r=Math.min(...e),a=Math.max(...e)-r||1,n=e.length>1?t/(e.length-1):0;return`M ${e.map((e,t)=>{const i=s-(e-r)/a*s;return`${(t*n).toFixed(1)},${i.toFixed(1)}`}).join(" L ")}`})(e,120,32),a="up"===s?"#34d399":"down"===s?"#f87171":"#60a5fa";return ce.jsx("svg",{width:120,height:32,viewBox:"0 0 120 32",className:"mx-auto",children:ce.jsx("path",{d:r,fill:"none",stroke:a,strokeWidth:"2"})})},$=e=>{if(e.length<6)return null;const t=e.slice(-5),s=e.slice(-10,-5);if(0===s.length)return null;const r=e=>e.reduce((e,t)=>e+t,0)/e.length,a=r(s),n=r(t);return 0===a?null:(n-a)/a*100};g.useEffect(()=>{h(null,null,function*(){n(!0);try{const e=((yield Sa.getAll(c(c({active:!0,includeStats:!0},"All"!==o&&{team:o}),"All"!==u&&{position:u}))).players||[]).map(Ja).filter(e=>Boolean(e));r(e);const t=((yield _a.getAll()).teams||[]).map(Za).filter(e=>Boolean(e));R([{abbreviation:"All"},...t])}catch(e){console.error("Error fetching players:",e)}finally{n(!1)}})},[o,u]);const z=e=>{let t=e.basketball_reference_id;if(!t&&e.basketball_reference_url){const s=e.basketball_reference_url.match(/\/players\/[a-z]\/([a-z0-9]+)\.html/i);s&&(t=s[1])}return t?`https://www.basketball-reference.com/req/202106291/images/players/${t}.jpg`:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&size=200&background=1f2937&color=fff`},I=s.filter(e=>{var t,s;return e.name.toLowerCase().includes(i.toLowerCase())||(null==(t=e.team_abbreviation)?void 0:t.toLowerCase().includes(i.toLowerCase()))||(null==(s=e.position)?void 0:s.toLowerCase().includes(i.toLowerCase()))}),D=e=>{S.length>=4?alert(t("players.comparison.maxPlayersAlert",{max:4})):S.find(t=>t.id===e.id)||T([...S,e])},L=e=>h(null,null,function*(){f(e),N(null),_(!0);try{const t=yield Sa.getById(e.id);if(null==t?void 0:t.player){const e=Ja(t.player);e&&N(e)}}catch(t){console.error("Failed to load player details:",t)}finally{_(!1)}});return a?ce.jsx("div",{className:"flex items-center justify-center h-64",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"w-12 h-12 border-4 border-blue-400/30 border-t-blue-400 rounded-full animate-spin mx-auto mb-4"}),ce.jsx("p",{className:"text-gray-400",children:t("players.loading")})]})}):ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsxs("div",{children:[ce.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center space-x-2",children:[ce.jsx(b,{className:"w-8 h-8 text-blue-400"}),ce.jsx("span",{children:t("players.title")})]}),ce.jsx("p",{className:"text-gray-400",children:t("players.subtitle")})]}),S.length>0&&ce.jsxs("button",{onClick:()=>{A&&0===S.length||P(!A)},className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors",children:[ce.jsx(y,{className:"w-5 h-5"}),ce.jsx("span",{children:t("players.actions.compare",{count:S.length})})]})]}),ce.jsx("div",{className:"glass-card p-6",children:ce.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[ce.jsxs("div",{className:"relative flex-1 max-w-md",children:[ce.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),ce.jsx("input",{type:"text",placeholder:t("players.search.placeholder"),value:i,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none"})]}),ce.jsxs("div",{className:"flex items-center space-x-4",children:[ce.jsxs("div",{className:"flex items-center space-x-2",children:[ce.jsx(w,{className:"w-4 h-4 text-gray-400"}),ce.jsx("select",{"aria-label":t("players.filter.teamLabel"),title:t("players.filter.teamLabel"),value:o,onChange:e=>d(e.target.value),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none",children:E.map(e=>ce.jsx("option",{value:e.abbreviation,children:"All"===e.abbreviation?t("players.filter.allTeams"):e.abbreviation},e.abbreviation))})]}),ce.jsx("select",{"aria-label":t("players.filter.positionLabel"),title:t("players.filter.positionLabel"),value:u,onChange:e=>m(e.target.value),className:"bg-gray-700/50 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm focus:border-blue-400 focus:outline-none",children:["All","PG","SG","SF","PF","C"].map(e=>ce.jsx("option",{value:e,children:"All"===e?t("players.filter.allPositions"):e},e))})]})]})}),A&&S.length>0&&ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsxs("div",{className:"flex items-center justify-between mb-6",children:[ce.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-2",children:[ce.jsx(y,{className:"w-6 h-6 text-purple-400"}),ce.jsx("span",{children:t("players.comparison.title")})]}),ce.jsx("button",{onClick:()=>T([]),className:"text-sm text-gray-400 hover:text-white",children:t("common.clearAll")})]}),ce.jsx("div",{className:"overflow-x-auto",children:ce.jsxs("table",{className:"w-full text-sm",children:[ce.jsx("thead",{children:ce.jsxs("tr",{className:"border-b border-gray-700/50",children:[ce.jsx("th",{className:"text-left py-3 px-4 text-gray-400",children:t("players.comparison.table.stat")}),S.map(e=>ce.jsx("th",{className:"text-center py-3 px-4 text-white",children:ce.jsxs("div",{className:"flex flex-col items-center",children:[ce.jsx("img",{src:z(e),alt:e.name,className:"w-16 h-16 rounded-full mb-2 object-cover",onError:t=>{t.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&size=64&background=1f2937&color=fff`}}),ce.jsx("div",{className:"font-semibold",children:e.name}),ce.jsxs("div",{className:"text-xs text-gray-400",children:[e.team_abbreviation," - ",e.position]})]})},e.id))]})}),ce.jsx("tbody",{children:(null==(e=S[0])?void 0:e.stats)?Object.entries(S[0].stats).map(([e])=>{const s=S.map(t=>{var s;return null==(s=t.stats)?void 0:s[e]}).filter(e=>"number"==typeof e&&Number.isFinite(e)),r=s.length?Math.max(...s):null,a=e.includes("percentage");return ce.jsxs("tr",{className:"border-b border-gray-800/50",children:[ce.jsx("td",{className:"py-3 px-4 text-gray-300 font-medium",children:O(e)}),S.map(n=>{var i;const l=null==(i=n.stats)?void 0:i[e],o="number"==typeof l&&Number.isFinite(l),c=o&&null!==r&&l===r&&1===s.filter(e=>e===r).length;return ce.jsx("td",{className:"py-3 px-4 text-center",children:ce.jsxs("div",{className:"flex items-center justify-center space-x-2 "+(c?"text-green-400 font-bold":"text-white"),children:[ce.jsx("span",{children:o?a?`${(100*l).toFixed(1)}%`:l.toFixed(1):t("common.noData")}),c&&ce.jsx(j,{className:"w-4 h-4"})]})},n.id)})]},e)}):ce.jsx("tr",{className:"border-b border-gray-800/50",children:ce.jsx("td",{className:"py-6 px-4 text-center text-gray-400",colSpan:S.length+1,children:t("common.noData")})})})]})})]}),ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:I.map(e=>{var s;const r=S.some(t=>t.id===e.id);return ce.jsxs("div",{className:"glass-card p-6 hover:neon-border transition-all duration-300 cursor-pointer group",onClick:()=>L(e),children:[ce.jsxs("div",{className:"flex flex-col items-center mb-4",children:[ce.jsx("img",{src:z(e),alt:e.name,className:"w-32 h-32 rounded-full mb-3 object-cover border-4 border-gray-700 group-hover:border-blue-500 transition-colors",onError:t=>{t.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&size=128&background=1f2937&color=fff`}}),ce.jsx("h3",{className:"text-lg font-bold text-white text-center group-hover:text-blue-400 transition-colors",children:e.name}),ce.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["#",null!=(s=e.jersey_number)?s:t("common.unknownShort")," - ",e.position||t("common.na")," - ",e.team_abbreviation||t("common.na")]})]}),e.stats&&ce.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mb-4",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-lg font-bold text-white",children:"number"==typeof e.stats.ppg?e.stats.ppg.toFixed(1):t("common.noData")}),ce.jsx("div",{className:"text-xs text-gray-400",children:t("players.statShort.ppg")})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-lg font-bold text-white",children:"number"==typeof e.stats.rpg?e.stats.rpg.toFixed(1):t("common.noData")}),ce.jsx("div",{className:"text-xs text-gray-400",children:t("players.statShort.rpg")})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-lg font-bold text-white",children:"number"==typeof e.stats.apg?e.stats.apg.toFixed(1):t("common.noData")}),ce.jsx("div",{className:"text-xs text-gray-400",children:t("players.statShort.apg")})]})]}),ce.jsxs("div",{className:"flex items-center justify-between",children:[ce.jsx("button",{onClick:t=>{var s;t.stopPropagation(),r?(s=e.id,T(S.filter(e=>e.id!==s))):D(e)},className:"px-3 py-1 rounded text-sm transition-colors "+(r?"bg-purple-600 hover:bg-purple-700 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"),children:t(r?"players.actions.removeFromComparison":"players.actions.addToComparison")}),ce.jsx("button",{onClick:t=>{t.stopPropagation(),L(e)},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm text-white",children:t("common.details")})]})]},e.id)})}),0===I.length&&ce.jsxs("div",{className:"glass-card p-12 text-center",children:[ce.jsx(U,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),ce.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:t("players.empty.title")}),ce.jsx("p",{className:"text-gray-400",children:t("players.empty.subtitle")})]}),p&&ce.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[ce.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>f(null)}),ce.jsx("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-gray-900 border border-gray-700/50 rounded-lg overflow-auto",children:(()=>{var e;const s=x||p,r=s.stats,a=s.bio,n=(null==r?void 0:r.season_year)?` - ${r.season_year}`:"",i=s.recent_games||[],l=i.map(e=>e.points).filter(e=>"number"==typeof e),o=i.map(e=>e.rebounds).filter(e=>"number"==typeof e),c=i.map(e=>e.assists).filter(e=>"number"==typeof e),d=i.map(e=>e.steals).filter(e=>"number"==typeof e),u=i.map(e=>e.blocks).filter(e=>"number"==typeof e),h=i.map(e=>e.turnovers).filter(e=>"number"==typeof e);return ce.jsxs(ce.Fragment,{children:[ce.jsxs("div",{className:"p-6 border-b border-gray-700/50 flex items-center justify-between",children:[ce.jsxs("div",{className:"flex items-center space-x-4",children:[ce.jsx("img",{src:z(s),alt:s.name,className:"w-20 h-20 rounded-full object-cover",onError:e=>{e.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(s.name)}&size=80&background=1f2937&color=fff`}}),ce.jsxs("div",{children:[ce.jsx("h2",{className:"text-2xl font-bold text-white",children:s.name}),ce.jsxs("div",{className:"text-gray-400",children:["#",null!=(e=s.jersey_number)?e:t("common.unknownShort")," - ",s.position||t("common.na")," - ",s.team_abbreviation||t("common.na"),n]})]})]}),ce.jsx("button",{onClick:()=>f(null),"aria-label":t("common.close"),title:t("common.close"),className:"p-2 hover:bg-white/10 rounded transition-colors",children:ce.jsx(F,{className:"w-6 h-6 text-gray-400"})})]}),ce.jsxs("div",{className:"p-6",children:[k&&ce.jsx("div",{className:"glass-card p-6 text-center text-gray-400 mb-6",children:t("players.details.loading")}),!k&&r?ce.jsxs("div",{className:"space-y-6 mb-6",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500 mb-3",children:t("players.details.seasonStats")}),ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"PPG"}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.ppg?r.ppg.toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"RPG"}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.rpg?r.rpg.toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"APG"}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.apg?r.apg.toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:t("players.details.gamesPlayed")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.games_played?r.games_played:t("common.noData")})]})]})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500 mb-3",title:t("players.tooltip.gameMetrics"),children:t("players.details.gameMetrics")}),ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:t("players.stats.fgPct")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.fg_percentage?`${(100*r.fg_percentage).toFixed(1)}%`:t("common.noData")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:t("players.stats.tpPct")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.three_point_percentage?`${(100*r.three_point_percentage).toFixed(1)}%`:t("common.noData")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:t("players.stats.ftPct")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.ft_percentage?`${(100*r.ft_percentage).toFixed(1)}%`:t("common.noData")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:t("players.stats.mpg")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.mpg?r.mpg.toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:t("players.stats.steals")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.spg?r.spg.toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:t("players.stats.blocks")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.bpg?r.bpg.toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"glass-card p-4 text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:t("players.stats.turnovers")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:"number"==typeof r.tov?r.tov.toFixed(1):t("common.noData")})]})]})]})]}):!k&&ce.jsx("div",{className:"glass-card p-6 text-center text-gray-400 mb-6",children:t("common.noData")}),ce.jsxs("div",{className:"glass-card p-4 mb-6",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500 mb-3",title:t("players.tooltip.recentTrends"),children:t("players.details.recentTrends")}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"PTS"}),ce.jsx(C,{values:l,tone:null===$(l)?"flat":$(l)>=0?"up":"down"}),ce.jsx("div",{className:"text-sm text-gray-300 mt-2",children:l.length?l[l.length-1].toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"REB"}),ce.jsx(C,{values:o,tone:null===$(o)?"flat":$(o)>=0?"up":"down"}),ce.jsx("div",{className:"text-sm text-gray-300 mt-2",children:o.length?o[o.length-1].toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"AST"}),ce.jsx(C,{values:c,tone:null===$(c)?"flat":$(c)>=0?"up":"down"}),ce.jsx("div",{className:"text-sm text-gray-300 mt-2",children:c.length?c[c.length-1].toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"STL"}),ce.jsx(C,{values:d,tone:null===$(d)?"flat":$(d)>=0?"up":"down"}),ce.jsx("div",{className:"text-sm text-gray-300 mt-2",children:d.length?d[d.length-1].toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"BLK"}),ce.jsx(C,{values:u,tone:null===$(u)?"flat":$(u)>=0?"up":"down"}),ce.jsx("div",{className:"text-sm text-gray-300 mt-2",children:u.length?u[u.length-1].toFixed(1):t("common.noData")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"TOV"}),ce.jsx(C,{values:h,tone:null===$(h)?"flat":$(h)>=0?"up":"down"}),ce.jsx("div",{className:"text-sm text-gray-300 mt-2",children:h.length?h[h.length-1].toFixed(1):t("common.noData")})]})]})]}),ce.jsxs("div",{className:"glass-card p-4 mb-6",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500 mb-3",title:t("players.tooltip.trendSummary"),children:t("players.details.trendSummary")}),ce.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[{label:"PTS",values:l},{label:"REB",values:o},{label:"AST",values:c},{label:"STL",values:d},{label:"BLK",values:u},{label:"TOV",values:h}].map(e=>{const s=$(e.values),r=null===s?t("common.noData"):`${s>0?"+":""}${s.toFixed(1)}%`,a=null===s?"text-gray-400":s>=0?"text-green-400":"text-red-400",n=null===s?null:s>=5?"hot":s<=-5?"cold":"steady",i="hot"===n?"bg-green-600/20 text-green-300":"cold"===n?"bg-red-600/20 text-red-300":"bg-gray-600/20 text-gray-300";return ce.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-800/40 px-3 py-2",children:[ce.jsx("span",{className:"text-sm text-gray-300",children:e.label}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[n&&ce.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] uppercase tracking-widest ${i}`,children:n}),ce.jsx("span",{className:`text-sm font-semibold ${a}`,children:r})]})]},e.label)})})]}),ce.jsxs("div",{className:"glass-card p-4 mb-6",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500 mb-3",title:t("players.tooltip.bio"),children:t("players.details.bio")}),ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[ce.jsxs("div",{className:"text-gray-300",children:[ce.jsxs("span",{className:"text-gray-500",children:[t("players.details.height"),": "]}),(null==a?void 0:a.height)||t("common.noData")]}),ce.jsxs("div",{className:"text-gray-300",children:[ce.jsxs("span",{className:"text-gray-500",children:[t("players.details.weight"),": "]}),"number"==typeof(null==a?void 0:a.weight)?`${a.weight} lb`:t("common.noData")]}),ce.jsxs("div",{className:"text-gray-300",children:[ce.jsxs("span",{className:"text-gray-500",children:[t("players.details.birthDate"),": "]}),(null==a?void 0:a.birth_date)||t("common.noData")]}),ce.jsxs("div",{className:"text-gray-300",children:[ce.jsxs("span",{className:"text-gray-500",children:[t("players.details.experience"),": "]}),"number"==typeof(null==a?void 0:a.experience)?a.experience:t("common.noData")]}),ce.jsxs("div",{className:"text-gray-300",children:[ce.jsxs("span",{className:"text-gray-500",children:[t("players.details.college"),": "]}),(null==a?void 0:a.college)||t("common.noData")]})]})]}),ce.jsxs("div",{className:"flex items-center space-x-4",children:[ce.jsx("button",{onClick:()=>{D(s),f(null)},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded text-white",disabled:S.some(e=>e.id===s.id)||S.length>=4,children:t("players.actions.addToComparison")}),ce.jsx("button",{onClick:()=>f(null),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-white",children:t("common.close")})]})]})]})})()})]})]})},Xa=""!=="https://api.mareknba.pl".trim()?"https://api.mareknba.pl".trim():"undefined"!=typeof window?`http://${window.location.hostname}:8000`:"http://localhost:8000",Qa=()=>{const{t:e}=$a(),[t,s]=g.useState("Zach LaVine"),[r,a]=g.useState("points"),[n,i]=g.useState(24.5),[l,o]=g.useState(""),[c,d]=g.useState(20),[u,m]=g.useState(!1),[p,y]=g.useState(null),[b,f]=g.useState(null);return ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsxs("div",{className:"flex items-start justify-between gap-4 mb-6",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-blue-500/20 px-3 py-1 text-xs uppercase tracking-widest text-blue-200",children:e("prop.badge.signalDesk")}),ce.jsx("h2",{className:"text-2xl font-bold mt-3 text-white",children:e("prop.title")}),ce.jsx("p",{className:"text-sm text-gray-400 mt-2",children:e("prop.subtitle")})]}),ce.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-right",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:e("prop.mode.label")}),ce.jsx("div",{className:"text-sm font-semibold text-white mt-1",children:e("prop.mode.value")})]})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"prop-player-name",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:e("prop.form.playerName.label")}),ce.jsx("input",{id:"prop-player-name","aria-label":e("prop.form.playerName.label"),title:e("prop.form.playerName.label"),type:"text",value:t,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 rounded-md bg-gray-900/60 border border-gray-700 text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("prop.form.playerName.placeholder")})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"prop-stat-type",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:e("prop.form.statType.label")}),ce.jsxs("select",{id:"prop-stat-type","aria-label":e("prop.form.statType.label"),title:e("prop.form.statType.label"),value:r,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 rounded-md bg-gray-900/60 border border-gray-700 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[ce.jsx("option",{value:"points",children:e("prop.stat.points")}),ce.jsx("option",{value:"rebounds_total",children:e("prop.stat.rebounds")}),ce.jsx("option",{value:"assists",children:e("prop.stat.assists")}),ce.jsx("option",{value:"three_pointers_made",children:e("prop.stat.threePointersMade")}),ce.jsx("option",{value:"steals",children:e("prop.stat.steals")}),ce.jsx("option",{value:"blocks",children:e("prop.stat.blocks")})]})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"prop-line",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:e("prop.form.line.label")}),ce.jsx("input",{id:"prop-line","aria-label":e("prop.form.line.label"),title:e("prop.form.line.label"),type:"number",step:"0.5",value:n,onChange:e=>i(parseFloat(e.target.value)),className:"w-full px-3 py-2 rounded-md bg-gray-900/60 border border-gray-700 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"prop-opponent",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:e("prop.form.opponent.label")}),ce.jsx("input",{id:"prop-opponent","aria-label":e("prop.form.opponent.label"),title:e("prop.form.opponent.label"),type:"text",value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 rounded-md bg-gray-900/60 border border-gray-700 text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("prop.form.opponent.placeholder")})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"prop-games",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:e("prop.form.games.label")}),ce.jsx("input",{id:"prop-games","aria-label":e("prop.form.games.label"),title:e("prop.form.games.label"),type:"number",value:c,onChange:e=>d(parseInt(e.target.value)),className:"w-full px-3 py-2 rounded-md bg-gray-900/60 border border-gray-700 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),ce.jsx("div",{className:"flex items-end",children:ce.jsx("button",{onClick:()=>h(null,null,function*(){m(!0),f(null);try{const e=new URLSearchParams({player_name:t,stat_type:r,line:n.toString(),games:c.toString()});l&&e.append("opponent",l);const s=yield fetch(`${Xa}/api/analytics/prop-bet?${e}`,{headers:wa()}),a=yield s.json();a.error?f(a.error):y(a)}catch(s){f(e("prop.error.analyzeFailed"))}finally{m(!1)}}),disabled:u,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed transition-colors",children:e(u?"prop.actions.analyzing":"prop.actions.analyze")})})]}),u&&ce.jsxs("div",{className:"space-y-4 mb-6",children:[ce.jsx("div",{className:"skeleton h-24"}),ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[ce.jsx("div",{className:"skeleton h-16"}),ce.jsx("div",{className:"skeleton h-16"}),ce.jsx("div",{className:"skeleton h-16"}),ce.jsx("div",{className:"skeleton h-16"})]}),ce.jsx("div",{className:"skeleton h-20"})]}),b&&ce.jsxs("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-md flex items-start gap-2",children:[ce.jsx(M,{className:"text-red-300 flex-shrink-0 mt-0.5",size:20}),ce.jsxs("div",{children:[ce.jsx("p",{className:"text-red-200 font-medium",children:e("common.error")}),ce.jsx("p",{className:"text-red-200 text-sm",children:b})]})]}),p&&!b&&ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:`p-6 rounded-lg border ${(e=>{switch(e){case"OVER":return"text-green-300 bg-green-900/30 border-green-500/30";case"UNDER":return"text-red-300 bg-red-900/30 border-red-500/30";default:return"text-gray-300 bg-gray-800/50 border-gray-600/30"}})(p.value)}`,children:[ce.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ce.jsx("h3",{className:"text-2xl font-bold",children:(t=>{switch(t){case"OVER":return e("prop.value.over");case"UNDER":return e("prop.value.under");default:return e("prop.value.noValue")}})(p.value)}),ce.jsxs("span",{className:"text-3xl font-bold "+(x=p.confidence,x>=75?"text-green-300":x>=60?"text-yellow-300":"text-gray-300"),children:[p.confidence,"%"]})]}),ce.jsx("p",{className:"text-sm font-medium mb-3",children:p.recommendation}),ce.jsx("div",{className:"flex items-center gap-2 text-sm",children:p.trend>0?ce.jsxs(ce.Fragment,{children:[ce.jsx(j,{size:16,className:"text-green-300"}),ce.jsx("span",{children:e("prop.trend.up",{value:p.trend.toFixed(1)})})]}):p.trend<0?ce.jsxs(ce.Fragment,{children:[ce.jsx(N,{size:16,className:"text-red-300"}),ce.jsx("span",{children:e("prop.trend.down",{value:Math.abs(p.trend).toFixed(1)})})]}):ce.jsxs(ce.Fragment,{children:[ce.jsx(G,{size:16,className:"text-gray-300"}),ce.jsx("span",{children:e("prop.trend.stable")})]})})]}),ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("p",{className:"text-sm text-gray-400",children:e("prop.stats.predictionAvg")}),ce.jsx("p",{className:"text-2xl font-bold text-white",children:p.prediction})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("p",{className:"text-sm text-gray-400",children:e("prop.stats.hitRate")}),ce.jsxs("p",{className:"text-2xl font-bold text-white",children:[p.hit_rate,"%"]})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("p",{className:"text-sm text-gray-400",children:e("prop.stats.median")}),ce.jsx("p",{className:"text-2xl font-bold text-white",children:p.median})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("p",{className:"text-sm text-gray-400",children:e("prop.stats.sampleSize")}),ce.jsx("p",{className:"text-2xl font-bold text-white",children:p.sample_size})]})]}),ce.jsxs("div",{children:[ce.jsx("h4",{className:"font-semibold text-white mb-3",children:e("prop.recentGames.title")}),ce.jsx("div",{className:"flex gap-2 flex-wrap",children:p.recent_games.map((e,t)=>ce.jsx("div",{className:"px-3 py-2 rounded font-semibold text-sm "+(e>p.line?"bg-green-900/40 text-green-200":"bg-red-900/40 text-red-200"),children:e},t))})]}),p.vs_opponent&&ce.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[ce.jsx("h4",{className:"font-semibold text-blue-200 mb-3",children:e("prop.vsOpponent.title",{opponent:l.toUpperCase(),games:p.vs_opponent.games})}),ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[ce.jsxs("div",{children:[ce.jsx("p",{className:"text-sm text-blue-300",children:e("prop.vsOpponent.avg")}),ce.jsx("p",{className:"text-xl font-bold text-blue-100",children:p.vs_opponent.avg.toFixed(1)})]}),ce.jsxs("div",{children:[ce.jsx("p",{className:"text-sm text-blue-300",children:e("prop.vsOpponent.high")}),ce.jsx("p",{className:"text-xl font-bold text-blue-100",children:p.vs_opponent.high})]}),ce.jsxs("div",{children:[ce.jsx("p",{className:"text-sm text-blue-300",children:e("prop.vsOpponent.low")}),ce.jsx("p",{className:"text-xl font-bold text-blue-100",children:p.vs_opponent.low})]}),ce.jsxs("div",{children:[ce.jsx("p",{className:"text-sm text-blue-300",children:e("prop.vsOpponent.overRate")}),ce.jsxs("p",{className:"text-xl font-bold text-blue-100",children:[p.vs_opponent.over_rate.toFixed(1),"%"]})]})]})]})]})]});var x},en=""!=="https://api.mareknba.pl".trim()?"https://api.mareknba.pl".trim():"undefined"!=typeof window?`http://${window.location.hostname}:8000`:"http://localhost:8000",tn=()=>{const{t:e}=$a(),[t,s]=g.useState("Zach LaVine"),[r,a]=g.useState(15),[n,i]=g.useState(!1),[l,o]=g.useState(null),[c,d]=g.useState(null),[u,m]=g.useState("points");return ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsxs("div",{className:"flex items-start justify-between gap-4 mb-6",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-500/20 px-3 py-1 text-xs uppercase tracking-widest text-emerald-200",children:e("form.badge.momentumMonitor")}),ce.jsx("h2",{className:"text-2xl font-bold mt-3 text-white",children:e("form.title")}),ce.jsx("p",{className:"text-sm text-gray-400 mt-2",children:e("form.subtitle")})]}),ce.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-right",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:e("form.window.label")}),ce.jsx("div",{className:"text-sm font-semibold text-white mt-1",children:e("form.window.value",{games:r})})]})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"form-player-name",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:e("form.form.playerName.label")}),ce.jsx("input",{id:"form-player-name","aria-label":e("form.form.playerName.label"),title:e("form.form.playerName.label"),type:"text",value:t,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 rounded-md bg-gray-900/60 border border-gray-700 text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("form.form.playerName.placeholder")})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"form-games",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:e("form.form.games.label")}),ce.jsx("input",{id:"form-games","aria-label":e("form.form.games.label"),title:e("form.form.games.label"),type:"number",value:r,onChange:e=>a(parseInt(e.target.value)),className:"w-full px-3 py-2 rounded-md bg-gray-900/60 border border-gray-700 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),ce.jsx("div",{className:"flex items-end",children:ce.jsx("button",{onClick:()=>h(null,null,function*(){i(!0),d(null);try{const e=new URLSearchParams({player_name:t,games:r.toString()}),s=yield fetch(`${en}/api/analytics/form?${e}`,{headers:wa()}),a=yield s.json();a.error?d(a.error):o(a)}catch(s){d(e("form.error.fetchFailed"))}finally{i(!1)}}),disabled:n,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed transition-colors",children:e(n?"form.actions.loading":"form.actions.track")})})]}),n&&ce.jsxs("div",{className:"space-y-4 mb-6",children:[ce.jsx("div",{className:"skeleton h-20"}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ce.jsx("div",{className:"skeleton h-28"}),ce.jsx("div",{className:"skeleton h-28"})]}),ce.jsx("div",{className:"skeleton h-56"}),ce.jsx("div",{className:"skeleton h-40"})]}),c&&ce.jsxs("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-md",children:[ce.jsx("p",{className:"text-red-200 font-medium",children:e("common.error")}),ce.jsx("p",{className:"text-red-200 text-sm",children:c})]}),l&&!c&&ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:`p-6 rounded-lg border-2 ${(e=>{switch(e){case"IMPROVING":return"bg-green-900/30 border-green-500/30 text-green-200";case"DECLINING":return"bg-red-900/30 border-red-500/30 text-red-200";default:return"bg-gray-800/60 border-gray-600/30 text-gray-200"}})(l.trend.direction)}`,children:[ce.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[(e=>{switch(e){case"IMPROVING":return ce.jsx(j,{className:"text-green-600",size:24});case"DECLINING":return ce.jsx(N,{className:"text-red-600",size:24});default:return ce.jsx(G,{className:"text-gray-600",size:24})}})(l.trend.direction),ce.jsx("h3",{className:"text-2xl font-bold",children:(t=>{switch(t){case"IMPROVING":return e("form.trend.improving");case"DECLINING":return e("form.trend.declining");default:return e("form.trend.stable")}})(l.trend.direction)})]}),ce.jsx("p",{className:"text-sm font-medium",children:l.trend.description})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ce.jsxs("div",{children:[ce.jsx("h4",{className:"font-semibold text-white mb-3",children:e("form.overallAverages.title",{games:l.games_analyzed})}),ce.jsxs("div",{className:"space-y-2",children:[ce.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/60 rounded",children:[ce.jsx("span",{className:"text-gray-300",children:e("form.stat.points")}),ce.jsx("span",{className:"font-bold text-lg text-white",children:l.current_averages.points})]}),ce.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/60 rounded",children:[ce.jsx("span",{className:"text-gray-300",children:e("form.stat.rebounds")}),ce.jsx("span",{className:"font-bold text-lg text-white",children:l.current_averages.rebounds})]}),ce.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-800/60 rounded",children:[ce.jsx("span",{className:"text-gray-300",children:e("form.stat.assists")}),ce.jsx("span",{className:"font-bold text-lg text-white",children:l.current_averages.assists})]})]})]}),ce.jsxs("div",{children:[ce.jsx("h4",{className:"font-semibold text-white mb-3",children:e("form.last5.title")}),ce.jsxs("div",{className:"space-y-2",children:[ce.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-900/30 rounded",children:[ce.jsx("span",{className:"text-blue-200",children:e("form.stat.points")}),ce.jsx("span",{className:"font-bold text-lg text-blue-100",children:l.last_5_games.points})]}),ce.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-900/30 rounded",children:[ce.jsx("span",{className:"text-blue-200",children:e("form.stat.rebounds")}),ce.jsx("span",{className:"font-bold text-lg text-blue-100",children:l.last_5_games.rebounds})]}),ce.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-900/30 rounded",children:[ce.jsx("span",{className:"text-blue-200",children:e("form.stat.assists")}),ce.jsx("span",{className:"font-bold text-lg text-blue-100",children:l.last_5_games.assists})]})]})]})]}),ce.jsxs("div",{className:"flex gap-2",children:[ce.jsx("button",{onClick:()=>m("points"),className:"px-4 py-2 rounded font-medium transition-colors "+("points"===u?"bg-blue-600 text-white":"bg-gray-800/60 text-gray-300 hover:bg-gray-700/60"),children:e("form.stat.points")}),ce.jsx("button",{onClick:()=>m("rebounds"),className:"px-4 py-2 rounded font-medium transition-colors "+("rebounds"===u?"bg-blue-600 text-white":"bg-gray-800/60 text-gray-300 hover:bg-gray-700/60"),children:e("form.stat.rebounds")}),ce.jsx("button",{onClick:()=>m("assists"),className:"px-4 py-2 rounded font-medium transition-colors "+("assists"===u?"bg-blue-600 text-white":"bg-gray-800/60 text-gray-300 hover:bg-gray-700/60"),children:e("form.stat.assists")})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("h4",{className:"font-semibold text-white mb-4",children:e("form.chart.title",{stat:(t=>{switch(t){case"points":return e("form.stat.points");case"rebounds":return e("form.stat.rebounds");default:return e("form.stat.assists")}})(u)})}),ce.jsx(Z,{width:"100%",height:300,children:ce.jsxs(Y,{data:l.games,children:[ce.jsx(X,{strokeDasharray:"3 3",stroke:"#374151"}),ce.jsx(Q,{dataKey:"opponent",tick:{fontSize:12,fill:"#9ca3af"},axisLine:{stroke:"#4b5563"},tickLine:{stroke:"#4b5563"}}),ce.jsx(ee,{tick:{fill:"#9ca3af"},axisLine:{stroke:"#4b5563"},tickLine:{stroke:"#4b5563"}}),ce.jsx(te,{content:({active:t,payload:s})=>{if(t&&s&&s.length){const t=s[0].payload;return ce.jsxs("div",{className:"bg-gray-900 border border-gray-700 p-3 rounded shadow-lg",children:[ce.jsx("p",{className:"font-semibold text-white",children:e("form.tooltip.vsOpponent",{opponent:t.opponent})}),ce.jsx("p",{className:"text-sm text-gray-400",children:t.date}),ce.jsxs("p",{className:"text-sm mt-1 text-gray-200",children:[e("form.tooltip.actualLabel"),": ",ce.jsx("span",{className:"font-bold",children:t[`actual_${u}`]})]}),ce.jsxs("p",{className:"text-sm text-gray-200",children:[e("form.tooltip.avgLabel"),": ",ce.jsx("span",{className:"font-bold",children:t[`rolling_avg_${u}`]})]}),ce.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e("form.tooltip.minutes",{minutes:t.minutes})})]})}return null}}),ce.jsx(se,{wrapperStyle:{color:"#e5e7eb"}}),ce.jsx(re,{type:"monotone",dataKey:`actual_${u}`,stroke:"#3b82f6",strokeWidth:2,name:e("form.legend.actual"),dot:{r:4}}),ce.jsx(re,{type:"monotone",dataKey:`rolling_avg_${u}`,stroke:"#f97316",strokeWidth:2,strokeDasharray:"5 5",name:e("form.legend.rollingAvg")})]})})]}),ce.jsxs("div",{children:[ce.jsx("h4",{className:"font-semibold text-white mb-3",children:e("form.table.titleRecent")}),ce.jsx("div",{className:"overflow-x-auto",children:ce.jsxs("table",{className:"w-full text-sm",children:[ce.jsx("thead",{className:"bg-gray-800/60",children:ce.jsxs("tr",{children:[ce.jsx("th",{className:"text-left p-2 text-gray-300",children:e("form.table.header.date")}),ce.jsx("th",{className:"text-left p-2 text-gray-300",children:e("form.table.header.opponent")}),ce.jsx("th",{className:"text-center p-2 text-gray-300",children:e("form.table.header.pts")}),ce.jsx("th",{className:"text-center p-2 text-gray-300",children:e("form.table.header.reb")}),ce.jsx("th",{className:"text-center p-2 text-gray-300",children:e("form.table.header.ast")}),ce.jsx("th",{className:"text-center p-2 text-gray-300",children:e("form.table.header.min")})]})}),ce.jsx("tbody",{children:l.games.slice().reverse().slice(0,10).map((t,s)=>ce.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/40",children:[ce.jsx("td",{className:"p-2 text-gray-200",children:t.date}),ce.jsx("td",{className:"p-2 text-gray-200",children:e("form.table.cell.vs",{opponent:t.opponent})}),ce.jsx("td",{className:"text-center p-2 font-semibold text-white",children:t.actual_points}),ce.jsx("td",{className:"text-center p-2 text-gray-200",children:t.actual_rebounds}),ce.jsx("td",{className:"text-center p-2 text-gray-200",children:t.actual_assists}),ce.jsx("td",{className:"text-center p-2 text-gray-500",children:t.minutes})]},s))})]})})]})]})]})},sn=""!=="https://api.mareknba.pl".trim()?"https://api.mareknba.pl".trim():"undefined"!=typeof window?`http://${window.location.hostname}:8000`:"http://localhost:8000",rn=()=>{var e,t,s,r,a,n,i,l,o,c,d,u,m,p,y,v,w,N,k,_,S,T,A,P,E,R,O,C,$,z,I,D,L,B;const{t:U}=$a(),[F,M]=g.useState("overview"),[G,J]=g.useState("CHI"),[Z,Y]=g.useState("LAL"),[X,Q]=g.useState(3),[ee,te]=g.useState(null),[se,re]=g.useState(!1),[ae,ne]=g.useState(null),[ie,le]=g.useState("Zach LaVine"),[oe,de]=g.useState("LAL"),[ue,he]=g.useState(3),[me,pe]=g.useState(null),[ge,ye]=g.useState(!1),[be,fe]=g.useState(null),[xe,ve]=g.useState("CHI"),[we,je]=g.useState("Zach LaVine"),[Ne,ke]=g.useState(2),[_e,Se]=g.useState(null),[Te,Ae]=g.useState(!1),[Pe,Ee]=g.useState(null),Re=g.useMemo(()=>[{id:"overview",label:U("analytics.tabs.overview.label"),icon:W,helper:U("analytics.tabs.overview.helper")},{id:"props",label:U("analytics.tabs.props.label"),icon:x,helper:U("analytics.tabs.props.helper")},{id:"form",label:U("analytics.tabs.form.label"),icon:q,helper:U("analytics.tabs.form.helper")},{id:"matchup",label:U("analytics.tabs.matchup.label"),icon:b,helper:U("analytics.tabs.matchup.helper")},{id:"injury",label:U("analytics.tabs.injury.label"),icon:K,helper:U("analytics.tabs.injury.helper")}],[U]),Oe=e=>null==e?"":e,Ce=e=>"number"!=typeof e||Number.isNaN(e)?0:e,$e=g.useMemo(()=>[{title:U("analytics.insights.base1.title"),description:U("analytics.insights.base1.description"),metricPrimary:U("analytics.insights.base1.metricPrimary"),metricSecondary:U("analytics.insights.base1.metricSecondary"),signal:U("analytics.insights.base1.signal"),focus:U("analytics.insights.base1.focus")},{title:U("analytics.insights.base2.title"),description:U("analytics.insights.base2.description"),metricPrimary:U("analytics.insights.base2.metricPrimary"),metricSecondary:U("analytics.insights.base2.metricSecondary"),signal:U("analytics.insights.base2.signal"),focus:U("analytics.insights.base2.focus")},{title:U("analytics.insights.base3.title"),description:U("analytics.insights.base3.description"),metricPrimary:U("analytics.insights.base3.metricPrimary"),metricSecondary:U("analytics.insights.base3.metricSecondary"),signal:U("analytics.insights.base3.signal"),focus:U("analytics.insights.base3.focus")}],[U]),[ze,Ie]=g.useState($e[0]),[De,Le]=g.useState([]),[Be,Ue]=g.useState(null),[Fe,Me]=g.useState(0),[Ge,We]=g.useState(!1),qe=(e,t=140,s=36,r=4)=>{const a=e.length?e:[0],n=Math.min(...a),i=Math.max(...a)-n||1;return a.map((e,l)=>`${r+l/Math.max(a.length-1,1)*(t-2*r)},${r+(1-(e-n)/i)*(s-2*r)}`).join(" ")},Ke=({values:e,stroke:t,fill:s})=>ce.jsx("svg",{width:"100%",height:"40",viewBox:"0 0 140 36",className:"block",children:ce.jsx("polyline",{fill:s||"none",stroke:t,strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round",points:qe(e)})}),Ve=g.useMemo(()=>ze,[ze]),He=Boolean(void 0!==(null==(e=null==_e?void 0:_e.team_impact)?void 0:e.points_difference)||void 0!==(null==(t=null==me?void 0:me.averages)?void 0:t.points)||void 0!==(null==(s=null==ee?void 0:ee.home_away_split)?void 0:s.home_advantage));g.useEffect(()=>{var e,t,s;if(void 0!==(null==(e=null==_e?void 0:_e.team_impact)?void 0:e.points_difference)){const e=_e.team_impact.points_difference;return Ie({title:U("analytics.insights.dynamic.injury.title"),description:U("analytics.insights.dynamic.injury.description"),metricPrimary:U("analytics.insights.dynamic.injury.metricPrimary",{value:`${e>0?"+":""}${e.toFixed(1)}`}),metricSecondary:U("analytics.insights.dynamic.injury.metricSecondary",{count:(_e.beneficiaries||[]).length}),signal:U("analytics.insights.dynamic.injury.signal"),focus:U("analytics.insights.dynamic.injury.focus")}),void Ue(new Date)}if(void 0!==(null==(t=null==me?void 0:me.averages)?void 0:t.points)){const e=me.averages.points;return Ie({title:U("analytics.insights.dynamic.player.title"),description:U("analytics.insights.dynamic.player.description"),metricPrimary:U("analytics.insights.dynamic.player.metricPrimary",{value:e.toFixed(1)}),metricSecondary:U("analytics.insights.dynamic.player.metricSecondary",{games:me.games_played}),signal:U("analytics.insights.dynamic.player.signal"),focus:U("analytics.insights.dynamic.player.focus")}),void Ue(new Date)}if(void 0!==(null==(s=null==ee?void 0:ee.home_away_split)?void 0:s.home_advantage)){const e=ee.home_away_split.home_advantage;return Ie({title:U("analytics.insights.dynamic.team.title"),description:U("analytics.insights.dynamic.team.description"),metricPrimary:U("analytics.insights.dynamic.team.metricPrimary",{value:`${e>0?"+":""}${e.toFixed(1)}`}),metricSecondary:U("analytics.insights.dynamic.team.metricSecondary",{games:ee.total_games}),signal:U("analytics.insights.dynamic.team.signal"),focus:U("analytics.insights.dynamic.team.focus")}),void Ue(new Date)}const r=$e[Fe%$e.length];Ie(r),Ue(new Date)},[_e,me,ee,Fe,$e,U]),g.useEffect(()=>{Le(e=>{var t;return(null==(t=e[0])?void 0:t.title)===Ve.title?e:[Ve,...e].slice(0,5)})},[Ve]),g.useEffect(()=>{if(!Ge)return;const e=setTimeout(()=>We(!1),2e3);return()=>clearTimeout(e)},[Ge]);return ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-white/10 bg-gradient-to-br from-slate-900/90 via-slate-950/80 to-slate-900/90 p-6 md:p-8",children:[ce.jsx("div",{className:"absolute -top-24 -right-16 h-56 w-56 rounded-full bg-blue-500/20 blur-3xl"}),ce.jsx("div",{className:"absolute -bottom-16 -left-12 h-52 w-52 rounded-full bg-cyan-400/20 blur-3xl"}),ce.jsxs("div",{className:"relative flex flex-col gap-6",children:[ce.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 text-xs uppercase tracking-widest text-blue-200",children:U("analytics.hero.badge")}),ce.jsx("h2",{className:"font-display mt-3 text-3xl font-semibold text-white",children:U("analytics.hero.title")}),ce.jsx("p",{className:"mt-2 max-w-2xl text-sm text-gray-300",children:U("analytics.hero.description")})]}),ce.jsxs("div",{className:"glass-card flex items-center gap-3 px-4 py-3",children:[ce.jsx(V,{className:"h-5 w-5 text-emerald-300"}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-xs text-gray-400",children:U("analytics.hero.dataFreshness.label")}),ce.jsx("div",{className:"text-sm font-semibold text-white",children:U("analytics.hero.dataFreshness.value")})]})]})]}),ce.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[ce.jsxs("div",{className:"glass-card p-4",title:U("analytics.hero.stats.modulesOnline.helper"),children:[ce.jsx("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:U("analytics.hero.stats.modulesOnline.label")}),ce.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:"4"}),ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.hero.stats.modulesOnline.helper")})]}),ce.jsxs("div",{className:"glass-card p-4",title:U("analytics.hero.stats.historicalSeasons.helper"),children:[ce.jsx("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:U("analytics.hero.stats.historicalSeasons.label")}),ce.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:"2010-2024"}),ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.hero.stats.historicalSeasons.helper")})]}),ce.jsxs("div",{className:"glass-card p-4",title:U("analytics.hero.stats.focus.helper"),children:[ce.jsx("div",{className:"text-xs uppercase tracking-wider text-gray-400",children:U("analytics.hero.stats.focus.label")}),ce.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:U("analytics.hero.stats.focus.value")}),ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.hero.stats.focus.helper")})]})]})]})]}),ce.jsx("div",{className:"flex flex-wrap gap-3 rounded-2xl border border-white/10 bg-gray-900/40 p-2",children:Re.map(e=>((e,t,s,r)=>ce.jsxs("button",{onClick:()=>M(e),title:r,className:"group flex items-center gap-3 px-4 py-2 rounded-lg text-sm font-medium transition-all "+(F===e?"bg-blue-600 text-white shadow-lg shadow-blue-600/20":"text-gray-400 hover:text-white hover:bg-gray-700/50"),children:[ce.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-md "+(F===e?"bg-white/15":"bg-gray-800/80 group-hover:bg-gray-700/70"),children:ce.jsx(s,{className:"h-4 w-4"})}),ce.jsxs("span",{className:"text-left",children:[ce.jsx("div",{className:"leading-tight",children:t}),ce.jsx("div",{className:"text-xs text-gray-500 group-hover:text-gray-300",children:r})]})]}))(e.id,e.label,e.icon,e.helper))}),"overview"===F&&ce.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[ce.jsxs("div",{className:"relative overflow-hidden glass-card p-6",title:U("analytics.overview.props.description"),children:[ce.jsx("div",{className:"absolute -right-10 -top-10 h-32 w-32 rounded-full bg-blue-500/20 blur-2xl"}),ce.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[ce.jsx("div",{className:"p-3 bg-blue-600/20 rounded-lg",children:ce.jsx(x,{className:"w-6 h-6 text-blue-400"})}),ce.jsxs("div",{children:[ce.jsx("h2",{className:"text-xl font-bold text-white",children:U("analytics.overview.props.title")}),ce.jsx("p",{className:"text-sm text-gray-400",children:U("analytics.overview.props.subtitle")})]})]}),ce.jsx("p",{className:"text-gray-300 mb-4",children:U("analytics.overview.props.description")}),ce.jsxs("button",{onClick:()=>M("props"),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white",children:[U("analytics.overview.props.action"),ce.jsx(H,{className:"h-4 w-4"})]})]}),ce.jsxs("div",{className:"relative overflow-hidden glass-card p-6",title:U("analytics.overview.form.description"),children:[ce.jsx("div",{className:"absolute -right-10 -top-10 h-32 w-32 rounded-full bg-emerald-500/20 blur-2xl"}),ce.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[ce.jsx("div",{className:"p-3 bg-green-600/20 rounded-lg",children:ce.jsx(j,{className:"w-6 h-6 text-green-400"})}),ce.jsxs("div",{children:[ce.jsx("h2",{className:"text-xl font-bold text-white",children:U("analytics.overview.form.title")}),ce.jsx("p",{className:"text-sm text-gray-400",children:U("analytics.overview.form.subtitle")})]})]}),ce.jsx("p",{className:"text-gray-300 mb-4",children:U("analytics.overview.form.description")}),ce.jsxs("button",{onClick:()=>M("form"),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white",children:[U("analytics.overview.form.action"),ce.jsx(H,{className:"h-4 w-4"})]})]}),ce.jsxs("div",{className:"relative overflow-hidden glass-card p-6",title:U("analytics.overview.matchup.description"),children:[ce.jsx("div",{className:"absolute -right-10 -top-10 h-32 w-32 rounded-full bg-purple-500/20 blur-2xl"}),ce.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[ce.jsx("div",{className:"p-3 bg-purple-600/20 rounded-lg",children:ce.jsx(b,{className:"w-6 h-6 text-purple-400"})}),ce.jsxs("div",{children:[ce.jsx("h2",{className:"text-xl font-bold text-white",children:U("analytics.overview.matchup.title")}),ce.jsx("p",{className:"text-sm text-gray-400",children:U("analytics.overview.matchup.subtitle")})]})]}),ce.jsx("p",{className:"text-gray-300 mb-4",children:U("analytics.overview.matchup.description")}),ce.jsxs("button",{onClick:()=>M("matchup"),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white",children:[U("analytics.overview.matchup.action"),ce.jsx(H,{className:"h-4 w-4"})]})]}),ce.jsxs("div",{className:"relative overflow-hidden glass-card p-6",title:U("analytics.overview.injury.description"),children:[ce.jsx("div",{className:"absolute -right-10 -top-10 h-32 w-32 rounded-full bg-red-500/20 blur-2xl"}),ce.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[ce.jsx("div",{className:"p-3 bg-red-600/20 rounded-lg",children:ce.jsx(K,{className:"w-6 h-6 text-red-400"})}),ce.jsxs("div",{children:[ce.jsx("h2",{className:"text-xl font-bold text-white",children:U("analytics.overview.injury.title")}),ce.jsx("p",{className:"text-sm text-gray-400",children:U("analytics.overview.injury.subtitle")})]})]}),ce.jsx("p",{className:"text-gray-300 mb-4",children:U("analytics.overview.injury.description")}),ce.jsxs("button",{onClick:()=>M("injury"),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white",children:[U("analytics.overview.injury.action"),ce.jsx(H,{className:"h-4 w-4"})]})]}),ce.jsxs("div",{className:"lg:col-span-2 glass-card p-6",children:[Ge&&ce.jsx("div",{className:"mb-4 rounded-xl border border-emerald-500/30 bg-emerald-900/20 px-4 py-2 text-sm text-emerald-200",children:U("analytics.overview.insight.toastUpdated")}),ce.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:U("analytics.overview.insight.heading")}),ce.jsx("h3",{className:"text-2xl font-semibold text-white mt-2",children:Ve.title}),ce.jsx("p",{className:"text-sm text-gray-400 mt-2 max-w-2xl",children:Ve.description})]}),ce.jsxs("div",{className:"flex gap-3",children:[ce.jsxs("div",{className:"rounded-xl border border-emerald-500/30 bg-emerald-900/20 px-4 py-3",children:[ce.jsx("div",{className:"text-xs text-emerald-200 uppercase tracking-widest",children:U("analytics.overview.insight.edgeBoost")}),ce.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:Ve.metricPrimary})]}),ce.jsxs("div",{className:"rounded-xl border border-blue-500/30 bg-blue-900/20 px-4 py-3",children:[ce.jsx("div",{className:"text-xs text-blue-200 uppercase tracking-widest",children:U("analytics.overview.insight.confidence")}),ce.jsx("div",{className:"text-xl font-semibold text-white mt-1",children:Ve.metricSecondary})]}),ce.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 px-4 py-3",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:U("analytics.overview.insight.lastUpdated")}),ce.jsx("div",{className:"text-sm font-semibold text-white mt-1",children:Be?Be.toLocaleString():""})]}),ce.jsxs("button",{onClick:()=>{He||(Me(e=>e+1),We(!0))},disabled:He,className:"rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-left hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:U("analytics.overview.insight.button.label")}),ce.jsx("div",{className:"text-sm font-semibold text-white mt-1",children:U(He?"analytics.overview.insight.button.locked":"analytics.overview.insight.button.refresh")})]})]})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[ce.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:U("analytics.overview.insight.signalStack")}),ce.jsx("div",{className:"mt-2 text-sm text-gray-300",children:Ve.signal})]}),ce.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:U("analytics.overview.insight.idealUse")}),ce.jsx("div",{className:"mt-2 text-sm text-gray-300",children:U("analytics.overview.insight.idealUse.value")})]}),ce.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500",children:U("analytics.overview.insight.nextAction")}),ce.jsx("div",{className:"mt-2 text-sm text-gray-300",children:Ve.focus})]})]}),ce.jsxs("div",{className:"mt-6",children:[ce.jsx("div",{className:"text-xs uppercase tracking-widest text-gray-500 mb-3",children:U("analytics.overview.insight.historyHeading")}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[De.map((e,t)=>ce.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[ce.jsx("div",{className:"text-sm font-semibold text-white",children:e.title}),ce.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[e.metricPrimary,"  ",e.metricSecondary]})]},`${e.title}-${t}`)),!De.length&&ce.jsx("div",{className:"rounded-xl border border-dashed border-white/10 p-4 text-sm text-gray-400",children:U("analytics.overview.insight.historyEmpty")})]})]})]})]}),"props"===F&&ce.jsxs("div",{className:"space-y-6",children:[ce.jsx("div",{className:"glass-card p-6",children:ce.jsxs("div",{className:"flex items-start justify-between gap-4",children:[ce.jsxs("div",{children:[ce.jsx("h3",{className:"text-2xl font-semibold text-white",children:U("analytics.props.header.title")}),ce.jsx("p",{className:"text-sm text-gray-400",children:U("analytics.props.header.description")})]}),ce.jsx("div",{className:"rounded-full bg-blue-500/20 px-3 py-1 text-xs uppercase tracking-widest text-blue-200",children:U("analytics.props.header.badge")})]})}),ce.jsx(Qa,{})]}),"form"===F&&ce.jsxs("div",{className:"space-y-6",children:[ce.jsx("div",{className:"glass-card p-6",children:ce.jsxs("div",{className:"flex items-start justify-between gap-4",children:[ce.jsxs("div",{children:[ce.jsx("h3",{className:"text-2xl font-semibold text-white",children:U("analytics.form.header.title")}),ce.jsx("p",{className:"text-sm text-gray-400",children:U("analytics.form.header.description")})]}),ce.jsx("div",{className:"rounded-full bg-emerald-500/20 px-3 py-1 text-xs uppercase tracking-widest text-emerald-200",children:U("analytics.form.header.badge")})]})}),ce.jsx(tn,{})]}),"matchup"===F&&ce.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[ce.jsx(b,{className:"w-5 h-5 text-blue-400"}),ce.jsx("h2",{className:"text-xl font-bold text-white",children:U("analytics.matchup.team.title")}),ce.jsx("span",{className:"ml-auto rounded-full bg-white/10 px-2 py-1 text-xs text-gray-300",children:"/api/analytics/matchup/team"})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"analytics-team",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:U("analytics.matchup.team.form.team.label")}),ce.jsx("input",{id:"analytics-team",value:G,onChange:e=>J(e.target.value),"aria-label":U("analytics.matchup.team.form.team.label"),title:U("analytics.matchup.team.form.team.label"),placeholder:U("analytics.matchup.team.form.team.placeholder"),className:"w-full px-3 py-2 rounded bg-gray-900/60 border border-gray-700 text-gray-100"})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"analytics-opponent",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:U("analytics.matchup.team.form.opponent.label")}),ce.jsx("input",{id:"analytics-opponent",value:Z,onChange:e=>Y(e.target.value),"aria-label":U("analytics.matchup.team.form.opponent.label"),title:U("analytics.matchup.team.form.opponent.label"),placeholder:U("analytics.matchup.team.form.opponent.placeholder"),className:"w-full px-3 py-2 rounded bg-gray-900/60 border border-gray-700 text-gray-100"})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"analytics-seasonsBack",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:U("analytics.matchup.team.form.seasonsBack.label")}),ce.jsx("input",{id:"analytics-seasonsBack",type:"number",value:X,min:1,onChange:e=>Q(parseInt(e.target.value,10)||1),"aria-label":U("analytics.matchup.team.form.seasonsBack.label"),title:U("analytics.matchup.team.form.seasonsBack.label"),className:"w-full px-3 py-2 rounded bg-gray-900/60 border border-gray-700 text-gray-100"})]})]}),ce.jsx("button",{onClick:()=>h(null,null,function*(){re(!0),ne(null),te(null);try{const e=new URLSearchParams({team:G,opponent:Z,seasons_back:X.toString()}),t=yield fetch(`${sn}/api/analytics/matchup/team?${e}`,{headers:wa()}),s=yield t.json();s.error?ne(s.error):te(s)}catch(e){ne(U("analytics.error.teamMatchupFailed"))}finally{re(!1)}}),disabled:se,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white disabled:bg-gray-600",children:U(se?"analytics.actions.loading":"analytics.matchup.team.actions.analyze")}),se&&ce.jsxs("div",{className:"mt-6 space-y-3",children:[ce.jsx("div",{className:"skeleton h-20"}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[ce.jsx("div",{className:"skeleton h-16"}),ce.jsx("div",{className:"skeleton h-16"}),ce.jsx("div",{className:"skeleton h-16"})]}),ce.jsx("div",{className:"skeleton h-14"})]}),ae&&ce.jsx("div",{className:"mt-4 p-4 border border-red-500/30 bg-red-900/20 text-red-200 rounded",children:ae}),ee&&ce.jsxs("div",{className:"mt-6 space-y-4",children:[ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.matchup.team.stats.totalGames")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:ee.total_games})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:[ce.jsx("span",{children:U("analytics.matchup.team.sections.homeAwayScoring.title")}),ce.jsx("span",{className:"text-xs text-gray-500",children:U("analytics.matchup.team.sections.homeAwayScoring.helper")})]}),ce.jsx(Ke,{values:[Ce(null==(r=ee.home_away_split)?void 0:r.away_ppg),Ce(null==(a=ee.home_away_split)?void 0:a.home_ppg)],stroke:"#6366f1"}),ce.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-400",children:[ce.jsxs("span",{children:[U("analytics.matchup.team.labels.away")," ",Oe(null==(n=ee.home_away_split)?void 0:n.away_ppg)]}),ce.jsxs("span",{children:[U("analytics.matchup.team.labels.home")," ",Oe(null==(i=ee.home_away_split)?void 0:i.home_ppg)]})]})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:[ce.jsx("span",{children:U("analytics.matchup.team.sections.teamAverages.title")}),ce.jsx("span",{className:"text-xs text-gray-500",children:U("analytics.matchup.team.sections.teamAverages.helper")})]}),ce.jsx(Ke,{values:[Ce(null==(l=ee.averages)?void 0:l.points),Ce(null==(o=ee.averages)?void 0:o.rebounds),Ce(null==(c=ee.averages)?void 0:c.assists)],stroke:"#38bdf8"})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.matchup.team.stats.avgPoints")}),ce.jsx("div",{className:"text-xl text-white",children:Oe(null==(d=ee.averages)?void 0:d.points)})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.matchup.team.stats.avgRebounds")}),ce.jsx("div",{className:"text-xl text-white",children:Oe(null==(u=ee.averages)?void 0:u.rebounds)})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.matchup.team.stats.avgAssists")}),ce.jsx("div",{className:"text-xl text-white",children:Oe(null==(m=ee.averages)?void 0:m.assists)})]})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:U("analytics.matchup.team.sections.homeAwaySplit.title")}),ce.jsxs("div",{className:"flex flex-wrap gap-2 text-gray-200",children:[ce.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs",children:[U("analytics.matchup.team.labels.homePpg")," ",Oe(null==(p=ee.home_away_split)?void 0:p.home_ppg)]}),ce.jsxs("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs",children:[U("analytics.matchup.team.labels.awayPpg")," ",Oe(null==(y=ee.home_away_split)?void 0:y.away_ppg)]}),ce.jsxs("span",{className:"rounded-full bg-blue-500/20 px-3 py-1 text-xs text-blue-100",children:[U("analytics.matchup.team.labels.advantage")," ",Oe(null==(v=ee.home_away_split)?void 0:v.home_advantage)]})]})]})]}),!ee&&!se&&!ae&&ce.jsx("div",{className:"mt-6 rounded-xl border border-dashed border-white/10 p-6 text-sm text-gray-400",children:U("analytics.matchup.team.empty")})]}),ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[ce.jsx(f,{className:"w-5 h-5 text-green-400"}),ce.jsx("h2",{className:"text-xl font-bold text-white",children:U("analytics.matchup.player.title")}),ce.jsx("span",{className:"ml-auto rounded-full bg-white/10 px-2 py-1 text-xs text-gray-300",children:"/api/analytics/matchup/player"})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"analytics-player",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:U("analytics.matchup.player.form.player.label")}),ce.jsx("input",{id:"analytics-player",value:ie,onChange:e=>le(e.target.value),"aria-label":U("analytics.matchup.player.form.player.label"),title:U("analytics.matchup.player.form.player.label"),placeholder:U("analytics.matchup.player.form.player.placeholder"),className:"w-full px-3 py-2 rounded bg-gray-900/60 border border-gray-700 text-gray-100"})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"analytics-playerOpponent",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:U("analytics.matchup.player.form.opponent.label")}),ce.jsx("input",{id:"analytics-playerOpponent",value:oe,onChange:e=>de(e.target.value),"aria-label":U("analytics.matchup.player.form.opponent.label"),title:U("analytics.matchup.player.form.opponent.label"),placeholder:U("analytics.matchup.player.form.opponent.placeholder"),className:"w-full px-3 py-2 rounded bg-gray-900/60 border border-gray-700 text-gray-100"})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"analytics-playerSeasonsBack",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:U("analytics.matchup.player.form.seasonsBack.label")}),ce.jsx("input",{id:"analytics-playerSeasonsBack",type:"number",value:ue,min:1,onChange:e=>he(parseInt(e.target.value,10)||1),"aria-label":U("analytics.matchup.player.form.seasonsBack.label"),title:U("analytics.matchup.player.form.seasonsBack.label"),className:"w-full px-3 py-2 rounded bg-gray-900/60 border border-gray-700 text-gray-100"})]})]}),ce.jsx("button",{onClick:()=>h(null,null,function*(){ye(!0),fe(null),pe(null);try{const e=new URLSearchParams({player_name:ie,opponent:oe,seasons_back:ue.toString()}),t=yield fetch(`${sn}/api/analytics/matchup/player?${e}`,{headers:wa()}),s=yield t.json();s.error?fe(s.error):pe(s)}catch(e){fe(U("analytics.error.playerMatchupFailed"))}finally{ye(!1)}}),disabled:ge,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white disabled:bg-gray-600",children:U(ge?"analytics.actions.loading":"analytics.matchup.player.actions.analyze")}),ge&&ce.jsxs("div",{className:"mt-6 space-y-3",children:[ce.jsx("div",{className:"skeleton h-20"}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[ce.jsx("div",{className:"skeleton h-16"}),ce.jsx("div",{className:"skeleton h-16"}),ce.jsx("div",{className:"skeleton h-16"})]})]}),be&&ce.jsx("div",{className:"mt-4 p-4 border border-red-500/30 bg-red-900/20 text-red-200 rounded",children:be}),me&&ce.jsxs("div",{className:"mt-6 space-y-4",children:[ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.matchup.player.stats.gamesPlayed")}),ce.jsx("div",{className:"text-2xl font-bold text-white",children:me.games_played})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:[ce.jsx("span",{children:U("analytics.matchup.player.sections.productionMix.title")}),ce.jsx("span",{className:"text-xs text-gray-500",children:U("analytics.matchup.player.sections.productionMix.helper")})]}),ce.jsx(Ke,{values:[Ce(null==(w=me.averages)?void 0:w.points),Ce(null==(N=me.averages)?void 0:N.rebounds),Ce(null==(k=me.averages)?void 0:k.assists)],stroke:"#22c55e"}),ce.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-gray-400",children:[ce.jsxs("span",{children:["PTS ",Oe(null==(_=me.averages)?void 0:_.points)]}),ce.jsxs("span",{children:["REB ",Oe(null==(S=me.averages)?void 0:S.rebounds)]}),ce.jsxs("span",{children:["AST ",Oe(null==(T=me.averages)?void 0:T.assists)]})]})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:[ce.jsx("span",{children:U("analytics.matchup.player.sections.scoringShape.title")}),ce.jsx("span",{className:"text-xs text-gray-500",children:U("analytics.matchup.player.sections.scoringShape.helper")})]}),ce.jsx(Ke,{values:[Ce(null==(A=me.averages)?void 0:A.points),Ce(null==(P=me.averages)?void 0:P.rebounds),Ce(null==(E=me.averages)?void 0:E.assists)],stroke:"#34d399"})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.matchup.player.stats.avgPoints")}),ce.jsx("div",{className:"text-xl text-white",children:Oe(null==(R=me.averages)?void 0:R.points)})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.matchup.player.stats.avgRebounds")}),ce.jsx("div",{className:"text-xl text-white",children:Oe(null==(O=me.averages)?void 0:O.rebounds)})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.matchup.player.stats.avgAssists")}),ce.jsx("div",{className:"text-xl text-white",children:Oe(null==(C=me.averages)?void 0:C.assists)})]})]})]}),!me&&!ge&&!be&&ce.jsx("div",{className:"mt-6 rounded-xl border border-dashed border-white/10 p-6 text-sm text-gray-400",children:U("analytics.matchup.player.empty")})]})]}),"injury"===F&&ce.jsxs("div",{className:"glass-card p-6",children:[ce.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[ce.jsx(K,{className:"w-5 h-5 text-red-400"}),ce.jsx("h2",{className:"text-xl font-bold text-white",children:U("analytics.injury.title")}),ce.jsx("span",{className:"ml-auto rounded-full bg-white/10 px-2 py-1 text-xs text-gray-300",children:"/api/analytics/injury-impact"})]}),ce.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"analytics-injuryTeam",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:U("analytics.injury.form.team.label")}),ce.jsx("input",{id:"analytics-injuryTeam",value:xe,onChange:e=>ve(e.target.value),"aria-label":U("analytics.injury.form.team.label"),title:U("analytics.injury.form.team.label"),placeholder:U("analytics.injury.form.team.placeholder"),className:"w-full px-3 py-2 rounded bg-gray-900/60 border border-gray-700 text-gray-100"})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"analytics-missingPlayer",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:U("analytics.injury.form.missingPlayer.label")}),ce.jsx("input",{id:"analytics-missingPlayer",value:we,onChange:e=>je(e.target.value),"aria-label":U("analytics.injury.form.missingPlayer.label"),title:U("analytics.injury.form.missingPlayer.label"),placeholder:U("analytics.injury.form.missingPlayer.placeholder"),className:"w-full px-3 py-2 rounded bg-gray-900/60 border border-gray-700 text-gray-100"})]}),ce.jsxs("div",{children:[ce.jsx("label",{htmlFor:"analytics-injurySeasonsBack",className:"block text-xs uppercase tracking-widest text-gray-500 mb-2",children:U("analytics.injury.form.seasonsBack.label")}),ce.jsx("input",{id:"analytics-injurySeasonsBack",type:"number",value:Ne,min:1,onChange:e=>ke(parseInt(e.target.value,10)||1),"aria-label":U("analytics.injury.form.seasonsBack.label"),title:U("analytics.injury.form.seasonsBack.label"),className:"w-full px-3 py-2 rounded bg-gray-900/60 border border-gray-700 text-gray-100"})]})]}),ce.jsx("button",{onClick:()=>h(null,null,function*(){Ae(!0),Ee(null),Se(null);try{const e=new URLSearchParams({team:xe,missing_player:we,seasons_back:Ne.toString()}),t=yield fetch(`${sn}/api/analytics/injury-impact?${e}`,{headers:wa()}),s=yield t.json();s.error?Ee(s.error):Se(s)}catch(e){Ee(U("analytics.error.injuryImpactFailed"))}finally{Ae(!1)}}),disabled:Te,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white disabled:bg-gray-600",children:U(Te?"analytics.actions.loading":"analytics.injury.actions.analyze")}),Te&&ce.jsxs("div",{className:"mt-6 space-y-3",children:[ce.jsx("div",{className:"skeleton h-20"}),ce.jsx("div",{className:"skeleton h-24"})]}),Pe&&ce.jsx("div",{className:"mt-4 p-4 border border-red-500/30 bg-red-900/20 text-red-200 rounded",children:Pe}),_e&&ce.jsxs("div",{className:"mt-6 space-y-4",children:[ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400",children:U("analytics.injury.sections.teamImpact.title")}),ce.jsx("div",{className:"text-xl text-white",children:null!=(z=null==($=_e.team_impact)?void 0:$.description)?z:U("common.na")}),ce.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[U("analytics.injury.sections.teamImpact.pointsDifference")," ",null!=(D=null==(I=_e.team_impact)?void 0:I.points_difference)?D:U("common.na")]}),ce.jsx("div",{className:"mt-4",children:ce.jsx(Ke,{values:[0,Math.abs(Ce(null==(L=_e.team_impact)?void 0:L.points_difference))],stroke:"#fb7185"})})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-2",children:[ce.jsx("span",{children:U("analytics.injury.sections.beneficiarySurge.title")}),ce.jsx("span",{className:"text-xs text-gray-500",children:U("analytics.injury.sections.beneficiarySurge.helper")})]}),ce.jsx(Ke,{values:(_e.beneficiaries||[]).slice(0,5).map(e=>Ce(e.percent_increase)),stroke:"#f59e0b"})]}),ce.jsxs("div",{className:"glass-card p-4",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-2",children:U("analytics.injury.sections.beneficiaries.title")}),ce.jsxs("div",{className:"space-y-2",children:[(_e.beneficiaries||[]).slice(0,5).map(e=>{var t;const s=Ce(e.percent_increase),r=Math.max(...(_e.beneficiaries||[]).slice(0,5).map(e=>Ce(e.percent_increase)),1);return ce.jsxs("div",{className:"space-y-2",children:[ce.jsxs("div",{className:"flex items-center justify-between text-gray-200 text-sm",children:[ce.jsx("span",{children:e.player}),ce.jsxs("span",{className:"text-gray-400",children:["+",null!=(t=e.increase)?t:0," (",s,"%)"]})]}),ce.jsx("progress",{value:Math.min(s,r),max:r,className:"h-2 w-full overflow-hidden rounded-full bg-white/10"})]},e.player)}),!(null==(B=_e.beneficiaries)?void 0:B.length)&&ce.jsx("div",{className:"text-sm text-gray-500",children:U("analytics.injury.sections.beneficiaries.empty")})]})]})]}),!_e&&!Te&&!Pe&&ce.jsx("div",{className:"mt-6 rounded-xl border border-dashed border-white/10 p-6 text-sm text-gray-400",children:U("analytics.injury.empty")})]})]})},an=()=>{var e,t,s,r,a,n;const[i,l]=g.useState([]),[o,d]=g.useState(null),[u,m]=g.useState(null),[p,y]=g.useState([]),[v,w]=g.useState(!0),k=Oa(),{t:_}=$a(),S=(e,t)=>"string"==typeof e?e:t;g.useEffect(()=>{h(null,null,function*(){var e,t;w(!0);try{const[s,r]=yield Promise.all([k.getBullsPlayers(),k.getBullsAnalysis().catch(()=>null)]),a=r&&"object"==typeof r?r:null,n=Array.isArray(null==a?void 0:a.players)?null==a?void 0:a.players:null,i=n?n.map(e=>{var t,s,r;return{name:S(null==e?void 0:e.name,_("bulls.fallback.unknownName")),position:S(null==e?void 0:e.position,_("common.na")),role:S(null==e?void 0:e.role,S(null==e?void 0:e.position,_("bulls.fallback.playerRole"))),stats:null!=(t=null==e?void 0:e.stats)?t:null,form:null!=(s=null==e?void 0:e.form)?s:null,minutes:"number"==typeof(null==e?void 0:e.minutes)?e.minutes:null,trend:null!=(r=null==e?void 0:e.trend)?r:null}}):(s||[]).slice(0,12).map(e=>({name:S(null==e?void 0:e.name,_("bulls.fallback.unknownName")),position:S(null==e?void 0:e.position,_("common.na")),role:S(null==e?void 0:e.position,_("bulls.fallback.playerRole")),stats:null,form:null,minutes:null,trend:null}));l(i),d(null!=(e=null==a?void 0:a.next_game)?e:null),m(null!=(t=null==a?void 0:a.team_stats)?t:null),y(Array.isArray(null==a?void 0:a.risk_factors)?null==a?void 0:a.risk_factors:[])}catch(s){console.error("Error fetching Bulls data:",s),l([]),d(null),m(null),y([])}finally{w(!1)}})},[k,_]);const T=e=>{const t={pace:"bulls.trends.pace",offRtg:"bulls.trends.offRtg",defRtg:"bulls.trends.defRtg",threePointPct:"bulls.trends.threePointPct",freeThrowPct:"bulls.trends.freeThrowPct"}[e];return t?_(t):e},E=e=>{switch(e){case"excellent":return"text-green-400 bg-green-600/20";case"good":return"text-blue-400 bg-blue-600/20";case"average":return"text-yellow-400 bg-yellow-600/20";case"poor":return"text-red-400 bg-red-600/20";default:return"text-gray-400 bg-gray-600/20"}},R=e=>{switch(e){case"up":return ce.jsx(j,{className:"w-4 h-4 text-green-400"});case"down":return ce.jsx(N,{className:"w-4 h-4 text-red-400"});case"stable":return ce.jsx(f,{className:"w-4 h-4 text-yellow-400"});default:return null}},O=e=>{const t=null==e?void 0:e.wins,s=null==e?void 0:e.losses;return"number"!=typeof t||"number"!=typeof s?_("common.noData"):`${t}-${s}`},C=e=>{const t=null==e?void 0:e.wins,s=null==e?void 0:e.losses,r=null==e?void 0:e.pushes;return"number"!=typeof t||"number"!=typeof s?_("common.noData"):"number"==typeof r?`${t}-${s}-${r}`:`${t}-${s}`},$=e=>e.toFixed(2).replace(/\.?0+$/,""),z=e=>"number"==typeof e?$(e):_("common.noData"),I=e=>"number"==typeof e?`${$(100*e)}%`:_("common.noData"),D=(e,t)=>"number"!=typeof e?_("common.noData"):"threePointPct"===t||"freeThrowPct"===t?`${(100*e).toFixed(1)}%`:e.toFixed(1);return v?ce.jsx("div",{className:"flex items-center justify-center h-64",children:ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"w-12 h-12 border-4 border-red-400/30 border-t-red-400 rounded-full animate-spin mx-auto mb-4"}),ce.jsx("p",{className:"text-gray-400",children:_("bulls.loading")})]})}):ce.jsxs("div",{className:"space-y-6",children:[ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[ce.jsx("div",{className:"w-10 h-10 bulls-gradient rounded-lg flex items-center justify-center",children:ce.jsx("span",{className:"text-white font-bold",children:""})}),ce.jsx("span",{children:_("bulls.header.title")}),ce.jsxs("div",{className:"ml-auto flex items-center space-x-2",children:[ce.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),ce.jsx("span",{className:"text-sm text-gray-400",children:_("bulls.header.liveData")})]})]})}),ce.jsx("div",{className:"p-6",children:ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-white",children:O(null==u?void 0:u.record)}),ce.jsx("div",{className:"text-sm text-gray-400",children:_("bulls.overview.overallRecord")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-green-400",children:C((null==u?void 0:u.ats)?{wins:null!=(e=u.ats.covers)?e:null,losses:null!=(t=u.ats.misses)?t:null,pushes:null!=(s=u.ats.pushes)?s:null}:null)}),ce.jsx("div",{className:"text-sm text-gray-400",children:_("bulls.overview.atsRecord")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-blue-400",children:C((null==u?void 0:u.ou)?{wins:null!=(r=u.ou.overs)?r:null,losses:null!=(a=u.ou.unders)?a:null,pushes:null!=(n=u.ou.pushes)?n:null}:null)}),ce.jsx("div",{className:"text-sm text-gray-400",children:_("bulls.overview.ouRecord")})]}),ce.jsxs("div",{className:"text-center",children:[ce.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:O(null==u?void 0:u.last5)}),ce.jsx("div",{className:"text-sm text-gray-400",children:_("bulls.overview.last5Games")})]})]})})]}),ce.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[ce.jsx("div",{className:"xl:col-span-2",children:ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[ce.jsx(b,{className:"w-5 h-5 text-blue-400"}),ce.jsx("span",{children:_("bulls.sections.playerAnalysis")})]})}),ce.jsx("div",{className:"p-6 space-y-4",children:0===i.length?ce.jsx("div",{className:"text-center text-gray-400 py-8",children:_("common.noData")}):i.map((e,t)=>{var s,r,a,n,i,l;return ce.jsxs("div",{className:"glass-card p-4 hover:bg-white/5 transition-colors",children:[ce.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4",children:[ce.jsxs("div",{className:"flex items-center space-x-3",children:[ce.jsx("div",{className:"w-12 h-12 bg-red-600/20 rounded-lg flex items-center justify-center",children:ce.jsx("span",{className:"text-red-400 font-bold text-sm",children:e.position||_("common.na")})}),ce.jsxs("div",{children:[ce.jsx("div",{className:"font-semibold text-white",children:e.name}),ce.jsx("div",{className:"text-sm text-gray-400",children:e.role})]})]}),ce.jsxs("div",{className:"flex items-center space-x-2",children:[e.form?ce.jsx("span",{className:`px-2 py-1 rounded text-xs ${E(e.form)}`,children:(l=e.form,_(l?`bulls.form.${l}`:"common.noData"))}):ce.jsx("span",{className:"px-2 py-1 rounded text-xs text-gray-400 bg-gray-600/20",children:_("common.noData")}),e.trend?R(e.trend):null]})]}),ce.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3 text-center",children:[ce.jsxs("div",{children:[ce.jsx("div",{className:"text-lg font-bold text-white",children:z(null==(s=e.stats)?void 0:s.ppg)}),ce.jsx("div",{className:"text-xs text-gray-400",children:"PTS"})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-lg font-bold text-white",children:z(null==(r=e.stats)?void 0:r.rpg)}),ce.jsx("div",{className:"text-xs text-gray-400",children:"REB"})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-lg font-bold text-white",children:z(null==(a=e.stats)?void 0:a.apg)}),ce.jsx("div",{className:"text-xs text-gray-400",children:"AST"})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-lg font-bold text-white",children:I(null==(n=e.stats)?void 0:n.fgPct)}),ce.jsx("div",{className:"text-xs text-gray-400",children:"FG%"})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-lg font-bold text-white",children:I(null==(i=e.stats)?void 0:i.ftPct)}),ce.jsx("div",{className:"text-xs text-gray-400",children:"FT%"})]}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-lg font-bold text-white",children:z(e.minutes)}),ce.jsx("div",{className:"text-xs text-gray-400",children:"MIN"})]})]})]},t)})})]})}),ce.jsx("div",{children:ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[ce.jsx(x,{className:"w-5 h-5 text-green-400"}),ce.jsx("span",{children:_("bulls.sections.nextGame")})]})}),ce.jsx("div",{className:"p-6 space-y-4",children:o?ce.jsxs(ce.Fragment,{children:[ce.jsx("div",{className:"text-center mb-6",children:(()=>{var e,t;const s=(null==o?void 0:o.home_team)||"",r=(null==o?void 0:o.away_team)||"",a=(e=>"chicago bulls"===(e||"").trim().toLowerCase())(s),n=(a?r:s)||_("common.noData"),i=_(a?"bulls.nextGame.location.home":"bulls.nextGame.location.away"),l=(null==o?void 0:o.commence_time)?new Date(o.commence_time).toLocaleString(void 0,{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}):_("common.noData"),c=null==(e=null==o?void 0:o.spread)?void 0:e.home_line,d="number"==typeof c?a?c:-c:null,u="number"==typeof d?`${d>0?"+":""}${d}`:_("common.noData"),h=null==(t=null==o?void 0:o.total)?void 0:t.line,m="number"==typeof h?h:_("common.noData");return ce.jsxs(ce.Fragment,{children:[ce.jsx("div",{className:"text-lg font-bold text-white mb-1",children:_("bulls.nextGame.vsOpponent",{opponent:n})}),ce.jsx("div",{className:"text-gray-400 mb-2",children:_("bulls.nextGame.dateLocation",{date:l,location:i})}),ce.jsxs("div",{className:"flex justify-center space-x-4 text-sm",children:[ce.jsx("span",{className:"text-blue-400",children:_("bulls.nextGame.spread",{value:u})}),ce.jsx("span",{className:"text-purple-400",children:_("bulls.nextGame.total",{value:m})})]})]})})()}),ce.jsx("div",{className:"glass-card p-4 border border-green-600/20",children:ce.jsxs("div",{className:"text-center mb-3",children:[ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:_("bulls.nextGame.prediction")}),ce.jsx("div",{className:"text-lg font-bold text-gray-300",children:_("common.noData")})]})}),ce.jsxs("div",{children:[ce.jsx("div",{className:"text-sm font-semibold text-gray-300 mb-3",children:_("bulls.nextGame.positionalMatchups")}),ce.jsx("div",{className:"text-center text-gray-400 py-4",children:_("common.noData")})]})]}):ce.jsx("div",{className:"text-center text-gray-400 py-6",children:_("common.noData")})})]})})]}),ce.jsxs("div",{className:"glass-card",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[ce.jsx(f,{className:"w-5 h-5 text-purple-400"}),ce.jsx("span",{children:_("bulls.trends.title",{games:7})})]})}),ce.jsx("div",{className:"p-6",children:ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:(null==u?void 0:u.trends)?Object.entries(u.trends).map(([e,t])=>{const s=t;return ce.jsxs("div",{className:"text-center",children:[ce.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[ce.jsx("span",{className:"text-lg font-bold text-white",children:D(s.value,e)}),s.trend?R(s.trend):null]}),ce.jsx("div",{className:"text-sm text-gray-400 mb-1",children:T(e)}),ce.jsx("div",{className:"text-xs text-gray-400",children:s.change||_("common.noData")})]},e)}):ce.jsx("div",{className:"col-span-full text-center text-gray-400 py-4",children:_("common.noData")})})})]}),ce.jsxs("div",{className:"glass-card border-yellow-400/20",children:[ce.jsx("div",{className:"p-6 border-b border-gray-700/50",children:ce.jsxs("h3",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[ce.jsx(P,{className:"w-5 h-5 text-yellow-400"}),ce.jsx("span",{children:_("bulls.risk.title")})]})}),ce.jsx("div",{className:"p-6",children:p.length>0?ce.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map((e,t)=>{var s;const r="back_to_back"===e.key,a="home_court"===e.key,n=r?"bulls.risk.backToBack.title":a?"bulls.risk.homeCourt.title":"bulls.risk.title",i=r?"bulls.risk.backToBack.desc":a?"bulls.risk.homeCourt.desc":null,l=r?ce.jsx(P,{className:"w-5 h-5 text-yellow-400 flex-shrink-0"}):ce.jsx(A,{className:"w-5 h-5 text-blue-400 flex-shrink-0"}),o=i?_(i,c(c({},r?{isBackToBack:e.value?_("common.yes"):_("common.no")}:{}),a?{record:S(null==(s=null==e?void 0:e.meta)?void 0:s.home_record,_("common.noData"))}:{})):_("common.noData");return ce.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border "+(r?"bg-yellow-600/10 border-yellow-600/20":"bg-blue-600/10 border-blue-600/20"),children:[l,ce.jsxs("div",{children:[ce.jsx("div",{className:"text-white font-medium",children:_(n)}),ce.jsx("div",{className:"text-sm text-gray-400",children:o})]})]},`${e.key}-${t}`)})}):ce.jsx("div",{className:"text-center text-gray-400 py-2",children:_("common.noData")})})]})]})},nn=""!=="https://api.mareknba.pl".trim()?"https://api.mareknba.pl".trim():"undefined"!=typeof window?`http://${window.location.hostname}:8000`:"http://localhost:8000";function ln(){const{t:e}=$a(),[t,s]=g.useState(()=>fa()),[r,a]=g.useState("dashboard"),[n,i]=g.useState(null),[l,o]=g.useState(!1),c=[{id:"dashboard",label:e("nav.dashboard"),icon:y},{id:"reports",label:e("nav.reports"),icon:I},{id:"teams",label:e("nav.teams"),icon:b},{id:"betting",label:e("nav.betting"),icon:T},{id:"odds",label:e("nav.odds"),icon:j},{id:"players",label:e("nav.players"),icon:J},{id:"analytics",label:e("nav.analytics"),icon:f},{id:"bulls",label:e("nav.bulls"),icon:k}],[d,u]=g.useState(new Date),[m,p]=g.useState(null),[x,v]=g.useState(null),[w,N]=g.useState(null),_=g.useMemo(()=>e(null===m?"app.status.checking":m?null===x?"app.status.online":x?"app.status.onlineData":"app.status.onlineNoData":"app.status.offline"),[m,x,e]);g.useEffect(()=>{let e=!1;const t=()=>h(null,null,function*(){try{const t=yield fetch(`${nn}/health`,{cache:"no-store"});if(!t.ok)throw new Error(`Health failed: ${t.status}`);const s=yield t.json();if(e)return;p(!0),v("boolean"==typeof s.supabase_connected?s.supabase_connected:null),N(new Date)}catch(t){if(e)return;p(!1),v(null),N(new Date)}});t();const s=window.setInterval(t,3e4);return()=>{e=!0,window.clearInterval(s)}},[]),g.useEffect(()=>{const e=e=>{const t=e.detail;s(null!=t?t:fa())};window.addEventListener("auth:changed",e);const{data:t}=pa&&ga?ga.auth.onAuthStateChange((e,t)=>{(null==t?void 0:t.access_token)&&(null==t?void 0:t.user)?xa({username:t.user.email||t.user.id,role:t.user.role||"user",accessToken:t.access_token,scheme:"bearer"}):va()}):{data:{subscription:{unsubscribe:()=>{}}}};return()=>{var s;window.removeEventListener("auth:changed",e),null==(s=null==t?void 0:t.subscription)||s.unsubscribe()}},[]);return t?ce.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100",children:[ce.jsx("div",{className:"fixed inset-0 opacity-5",children:ce.jsx("div",{className:"absolute inset-0 background-gradient"})}),ce.jsxs("div",{className:"relative z-10 flex h-screen",children:[l&&ce.jsx("div",{className:"fixed inset-0 z-30 bg-black/60 md:hidden",onClick:()=>o(!1),"aria-hidden":"true"}),ce.jsx("div",{className:"fixed inset-y-0 left-0 z-40 transform transition-transform duration-300 md:static md:translate-x-0 "+(l?"translate-x-0":"-translate-x-full"),children:ce.jsx(Fa,{items:c,activeSection:r,onSectionChange:e=>{a(e),o(!1)}})}),ce.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden w-full",children:[ce.jsx(Ma,{activeSection:r,lastUpdate:d,currentUser:null==t?void 0:t.username,onLogout:()=>{(function(){return h(this,null,function*(){pa&&ga&&(yield ga.auth.signOut()),va()})})().finally(()=>{va(),s(null)})},onToggleSidebar:()=>o(e=>!e),onRefresh:()=>{u(new Date),fetch(`${nn}/health`,{cache:"no-store"}).then(e=>e.ok?e.json():Promise.reject()).then(e=>{p(!0),v("boolean"==typeof(null==e?void 0:e.supabase_connected)?e.supabase_connected:null),N(new Date)}).catch(()=>{p(!1),v(null),N(new Date)})}}),ce.jsx("main",{className:"flex-1 overflow-auto p-6",children:(()=>{switch(r){case"dashboard":return ce.jsx(Ua,{onViewOdds:e=>{i(e),a("odds")}});case"reports":return ce.jsx(Wa,{});case"teams":return ce.jsx(Da,{});case"betting":return ce.jsx(qa,{});case"odds":return ce.jsx(Ka,{selectedGameId:n||void 0});case"players":return ce.jsx(Ya,{});case"analytics":return ce.jsx(rn,{});case"bulls":return ce.jsx(an,{});default:return ce.jsx(Ua,{})}})()})]})]}),ce.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:ce.jsxs("div",{className:"glass-card px-4 py-2 flex items-center space-x-2",children:[ce.jsx("div",{className:"w-2 h-2 rounded-full "+(null===m?"bg-gray-400":m?!1===x?"bg-yellow-400":"bg-green-400":"bg-red-400")}),ce.jsx("span",{className:"text-sm text-gray-300",children:_}),w&&ce.jsx("span",{className:"text-xs text-gray-500",children:e("app.status.checkedAt",{time:w.toLocaleTimeString("en-US",{timeZone:"America/Chicago"})})})]})})]}):ce.jsx(Ga,{onLogin:s})}const on=[{id:"en",label:"EN"},{id:"pl",label:"PL"}],cn={en:{"app.loading.title":"Analitics for Marek","app.loading.subtitle":"Loading real-time data...","app.loading.fetching":"Fetching NBA analysis & odds","app.status.liveData":"Live Data","app.status.checking":"Backend: checking","app.status.offline":"Backend: offline","app.status.online":"Backend: online","app.status.onlineData":"Backend: online (data connected)","app.status.onlineNoData":"Backend: online (no data source)","app.status.checkedAt":"checked {time}","nav.dashboard":"Dashboard","nav.reports":"Reports","nav.teams":"Teams Analysis","nav.betting":"Betting","nav.odds":"Live Odds","nav.players":"Players","nav.analytics":"Analytics","nav.bulls":"Bulls","header.section.dashboard":"NBA Analytics Dashboard","header.section.reports":"Daily Reports Center","header.section.teams":"NBA Teams Analysis","header.section.betting":"Betting Intelligence Hub","header.section.odds":"Live Odds Monitor","header.section.players":"Players Browser","header.section.analytics":"Advanced Analytics","header.section.default":"NBA Analytics","header.lastUpdated":"Last updated","header.refreshData":"Refresh Data","header.notifications":"Notifications","header.settings":"Settings","header.profile":"Profile","header.analyst":"Analyst","header.quickSettings":"Quick Settings","header.animations":"Animations","header.compactMode":"Compact mode","header.close":"Close","header.language":"Language","header.notifications.sample.lineMovement":"Line movement: Celtics -5.5 (2m ago)","header.notifications.sample.newReportReady":"New report ready: 8:00 AM","header.profile.preferences":"Preferences","sidebar.subtitle":"Betting Intelligence","sidebar.leagueStatus":"League Status","sidebar.nextSlate":"Next Slate: {count} games","sidebar.tonight":"Tonight {time}","common.live":"Live","common.clear":"Clear","common.clearAll":"Clear all","common.close":"Close","common.back":"Back","common.yes":"Yes","common.no":"No","common.done":"Done","common.error":"Error","common.details":"Details","common.na":"N/A","common.retry":"Try again","common.tbd":"TBD","common.noData":"No data","common.unknownShort":"?","reports.title.generic":"Report","reports.title.750am":"7:50 AM - Previous Day Analysis","reports.title.800am":"8:00 AM - Morning Summary","reports.tooltip.morningSummary":"Morning snapshot with yesterday results and 7-day trends.","reports.title.1100am":"11:00 AM - Game-Day Scouting","reports.generated":"Generated","reports.status.generating":"Generating...","reports.status.ready":"Ready","reports.status.error":"Error","reports.summary.gamesAnalyzed":"Games analyzed","reports.summary.featuredTeamLastGame":"Featured team last game","reports.summary.yesterdayResults":"Yesterday results","reports.summary.teamOffRtg":"Team OffRtg","reports.summary.gamesSuffix":"games","reports.empty.generating":"Report is being generated...","reports.empty.noContent":"Report content not available","reports.exportJson":"Export PDF","reports.exportPdf":"Export PDF","reports.export":"Export","reports.section.resultsVsClosingLine":"Results vs Closing Line","reports.tooltip.resultsVsClosingLine":"How picks performed vs closing lines.","reports.section.topTrends":"Top Trends","reports.tooltip.topTrends":"Top trend signals detected by the model.","reports.section.teamPlayerAnalysis":"Team Player Analysis","reports.tooltip.teamPlayerAnalysis":"Focused team/player analysis section.","reports.section.yesterdayResults":"Yesterday Results","reports.tooltip.yesterdayResults":"ATS and O/U outcomes from yesterday's games.","reports.section.sevenDayTrends":"7-Day Trends","reports.tooltip.sevenDayTrends":"Trend digest from the last 7 days across key metrics.","reports.trends.label.pace_trends":"Pace trends","reports.trends.label.offensive_efficiency":"Offensive efficiency","reports.trends.label.defensive_efficiency":"Defensive efficiency","reports.trends.label.three_point_shooting":"3PT shooting","reports.trends.label.free_throw_trends":"Free throws","reports.trends.label.ats_performance":"ATS performance","reports.trends.label.bulls":"Bulls","reports.trends.label.focus_teams":"Focus teams","reports.trends.label.league_context":"League context","reports.trends.label.betting_impact":"Betting impact","reports.trends.label.current":"Current","reports.trends.label.avg":"Average","reports.trends.label.range":"Range","reports.trends.label.trend":"Trend","reports.trends.label.significance":"Significance","reports.trends.label.ortg":"OffRtg","reports.trends.label.drtg":"DefRtg","reports.trends.label.pct":"Percentage","reports.trends.label.volume":"Volume","reports.trends.label.attempts":"Attempts","reports.trends.label.record":"Record","reports.trends.label.home":"Home","reports.trends.label.road":"Road","reports.trends.label.combined":"Combined","reports.trends.label.percentage":"Percentage","reports.trends.label.rank":"Rank","reports.trends.label.top":"Top","reports.trends.label.bottom":"Bottom","reports.trends.label.best":"Best","reports.trends.label.worst":"Worst","reports.trends.label.avg_ortg":"Avg OffRtg","reports.trends.label.avg_drtg":"Avg DefRtg","reports.trends.label.7day_avg":"7-day average","reports.trends.label.7day_change":"7-day change","reports.section.teamPlayersForm":"Team Players Form","reports.tooltip.teamPlayersForm":"Highlighted player form and streaks.","reports.section.executiveSummary":"Executive Summary","reports.section.slateOverview":"Slate Overview","reports.tooltip.slateOverview":"Schedule overview and key context for the slate.","reports.section.injuryIntelligence":"Injury Intelligence","reports.tooltip.injuryIntelligence":"Impact of injuries and absences on projections.","reports.section.matchupAnalysis":"Matchup Analysis","reports.tooltip.matchupAnalysis":"Matchup breakdowns and key advantages.","reports.pdf.keys":"Keys","reports.pdf.reportData":"Report Data","reports.label.lastGame":"Last Game","reports.label.minutesShort":"min","reports.loading":"Loading reports...","reports.list.titleDailyReports":"Daily Reports","reports.tooltip.dailyReports":"Generate and track daily report batches; status shows data readiness.","reports.list.timezoneChicago":"Chicago timezone (CST)","reports.list.generatingReports":"Generating reports...","reports.list.generateNow":"Generate reports now","reports.setupChecklist.title":"Setup checklist","reports.setupChecklist.supabaseConnected":"Supabase connected (SUPABASE_URL + SERVICE ROLE key)","reports.setupChecklist.schedulerOn":"Scheduler on (ENABLE_SCHEDULER=true)","reports.setupChecklist.scrapingEnabled":"Scraping enabled (AUTO_SCRAPE_ON_START=true)","reports.setupChecklist.historicalImportDone":"Historical import done (reports need data)","reports.selectReport.title":"Select a Report","reports.selectReport.subtitle":"Choose a report from the left to view detailed analysis","dashboard.loading":"Loading dashboard data...","dashboard.error.loadFailed":"Failed to load data. Please try again.","dashboard.tabs.dashboard":"Dashboard","dashboard.tabs.allTeams":"All teams","dashboard.stats.gamesScheduled":"Games scheduled","dashboard.stats.teamsTracked":"Teams tracked","dashboard.stats.thisSeason":"This season","dashboard.stats.valueOpportunities":"Value opportunities","dashboard.tooltip.stats.gamesScheduled":"Count of today's scheduled games from /api/games/today.","dashboard.tooltip.stats.teamsTracked":"Teams flagged with the best model edge from /api/focus-teams/today.","dashboard.tooltip.stats.thisSeason":"Season aggregates from /api/teams/analysis.","dashboard.tooltip.stats.valueOpportunities":"Number of positions with positive edge (edge > 0).","dashboard.section.todaysGames":"Today's Games","dashboard.section.gamesSuffix":"games","dashboard.section.focusTeams":"Focus Teams","dashboard.section.leagueSpotlight":"League Spotlight","dashboard.section.liveMatchup":"Live Matchup","dashboard.section.riskAlerts":"Risk Alerts","dashboard.tooltip.todaysGames":"List of today's games with best ML/spread/total odds, combining /api/games/today and /api/odds/{game_id}.","dashboard.tooltip.focusTeams":"Teams with positive edge today, edge = p_consensus * best_price - 1.","dashboard.tooltip.leagueSpotlight":"Highlighted matchup and context for tonight.","dashboard.tooltip.liveMatchup":"Live matchup card with key status signals.","dashboard.tooltip.riskAlerts":"Alerts about line movement or volume spikes.","dashboard.section.scheduledGames":"Scheduled games","dashboard.section.scheduledSubtitle":"Upcoming matchups with live lines","dashboard.section.trackedTeams":"Tracked teams","dashboard.section.trackedSubtitle":"Teams flagged by the model","dashboard.section.seasonOverview":"Season overview","dashboard.section.seasonSubtitle":"Top teams by win percentage","dashboard.section.valuePicks":"Value opportunities","dashboard.section.valueSubtitle":"Model edges worth monitoring","dashboard.tooltip.scheduledGames":"Upcoming matchups with best lines and export options.","dashboard.tooltip.trackedTeams":"Teams highlighted by the model for today, with edge values.","dashboard.tooltip.seasonOverview":"Season overview with win %, OffRtg/DefRtg/NetRtg.","dashboard.tooltip.valuePicks":"Model value opportunities with positive edge.","dashboard.filter.team":"Team","dashboard.filter.date":"Date","dashboard.filter.search":"Search","dashboard.sort.edge":"Sort by edge","dashboard.sort.team":"Sort by team","dashboard.sort.winPct":"Sort by win%","dashboard.sort.netRtg":"Sort by net rating","dashboard.sort.offRtg":"Sort by OffRtg","dashboard.sort.defRtg":"Sort by DefRtg","dashboard.actions.exportCsv":"Export CSV","dashboard.actions.exportPdf":"Export PDF","dashboard.label.edge":"edge","dashboard.label.spread":"Spread","dashboard.label.total":"Total","dashboard.actions.viewOdds":"View Odds","dashboard.actions.teamAnalysis":"Team Analysis","dashboard.spotlight.tonightTime":"Tonight 8:00 PM","dashboard.spotlight.featuredGame":"Featured national game","dashboard.spotlight.last5":"Last 5","dashboard.spotlight.strongForm":"Strong recent form","dashboard.spotlight.keyPlayers":"Key Players","dashboard.spotlight.starsActive":"Major stars active","dashboard.spotlight.fullRotation":"Full rotation expected","dashboard.risk.lineMovementTitle":"Line Movement Alert","dashboard.risk.lineMovementBody":"Line moved 2.0 points on late action (30min ago)","dashboard.risk.volumeSpikeTitle":"Volume Spike","dashboard.risk.volumeSpikeBody":"Heavy action on the top national game","teams.loading":"Loading teams analysis...","teams.title":"NBA Teams Analysis","teams.subtitle":"Comprehensive analysis of all 30 NBA teams","teams.tooltip.title":"Overview of all NBA teams with filters, cards, and table view.","teams.actions.tableView":"Table View","teams.actions.gridView":"Grid View","teams.stats.totalTeams":"Total Teams","teams.tooltip.totalTeams":"Total number of teams loaded in the dataset.","teams.stats.filtered":"Filtered","teams.tooltip.filtered":"Teams matching the current filters.","teams.conference.eastern":"Eastern","teams.conference.western":"Western","teams.search.placeholder":"Search teams...","teams.filter.conferenceLabel":"Conference","teams.filter.conferenceSuffix":"Conference","teams.filter.divisionLabel":"Division","teams.filter.divisionSuffix":"Division","teams.sort.label":"Sort by","teams.sort.winPct":"Win %","teams.sort.netRating":"Net Rating","teams.sort.pointsPerGame":"Points/Game","teams.sort.strength":"Strength","teams.sort.atsPct":"ATS %","teams.table.team":"Team","teams.table.record":"Record","teams.table.winPct":"Win %","teams.table.offRtg":"Off Rtg","teams.table.defRtg":"Def Rtg","teams.table.netRtg":"Net Rtg","teams.table.strength":"Strength","teams.empty.title":"No teams found","teams.empty.subtitle":"Try adjusting your search or filter criteria","teams.label.record":"Record","teams.label.winPct":"Win %","teams.label.offRtg":"Off Rtg","teams.label.defRtg":"Def Rtg","teams.card.formLast10":"Form (Last 10)","teams.card.atsRecord":"ATS Record","teams.card.strength":"Strength","teams.details.keyPlayers":"Key Players","teams.details.bettingStats":"Betting Stats","teams.details.overUnder":"Over/Under","teams.details.avgTotal":"Avg Total","teams.details.strength":"Strength","odds.loading":"Loading live odds...","odds.title":"Live Odds Monitor","odds.onlySelected":"Only selected","odds.refresh":"Refresh","odds.selectedGame":"Selected game","odds.lastUpdate":"Last update","odds.liveAlerts":"Live Alerts","odds.tooltip.liveAlerts":"Real-time alerts about line movement, reverse line, or value spikes.","odds.alertType.movement":"movement","odds.alertType.value":"value","odds.alertType.reverse":"reverse","odds.severity.high":"high","odds.severity.medium":"medium","odds.severity.low":"low","odds.gamesSuffix":"games","odds.featured":"FEATURED","odds.comparisonTitle":"Odds Comparison","odds.tooltip.comparison":"Compares best spread/total/moneyline prices across bookmakers.","odds.label.spread":"Spread","odds.label.total":"Total","odds.label.moneyline":"Moneyline","odds.best":"Best","odds.noSpread":"No handicap odds available","odds.recentMovements":"Recent Movements","odds.table.sportsbook":"Sportsbook","betting.loading":"Analyzing betting opportunities...","betting.title":"Betting Intelligence Hub","betting.bankroll":"Bankroll","betting.category.all":"All","betting.category.featured":"Featured","betting.category.general":"General","betting.category.value":"Value","betting.section.recommendedBets":"Recommended Bets","betting.section.betsSuffix":"bets","betting.tooltip.recommendedBets":"Top recommendations from the model with edge, consensus probability, and best price.","betting.kelly":"Kelly","betting.kelly.oddsLabel":"Odds (American)","betting.kelly.winProbLabel":"Win Probability (%)","betting.label.stake":"Stake","betting.label.toWin":"To Win","betting.label.reasoning":"Reasoning","betting.pick.vs":"vs","betting.pick.mlShort":"ML","betting.pick.market":"Market","betting.pick.market.h2h":"Moneyline","betting.pick.book":"Book","betting.pick.edge":"Edge","betting.pick.consensusProb":"Consensus prob.","betting.pick.bestPrice":"Best price (decimal)","betting.section.valueBets":"Value Bets","betting.tooltip.valueBets":"Subset of picks with positive edge, ranked by edge.","betting.value.book":"Book","betting.value.fairProb":"Fair prob.","betting.label.confidence":"Confidence","betting.label.max":"Max","betting.section.kellyCalculator":"Kelly Calculator","betting.tooltip.kellyCalculator":"Calculates optimal stake from odds and win probability.","betting.kelly.calculate":"Calculate Optimal Stake","betting.kelly.recommendedStake":"Recommended Stake","betting.kelly.ofBankroll":"of bankroll","betting.kelly.from":"from","betting.kelly.negativeExpectation":"Negative expectation - do not bet","betting.kelly.enterToCalculate":"Enter odds and probability to calculate","betting.section.sessionStats":"Session Stats","betting.tooltip.sessionStats":"Summary stats for the current betting session.","betting.stats.todayPnL":"Today P&L","betting.stats.winRate":"Win Rate","betting.stats.activeBets":"Active Bets","betting.section.riskAlerts":"Risk Alerts","betting.tooltip.riskAlerts":"Risk signals and market warnings for selected games.","betting.risk.low":"low risk","betting.risk.medium":"medium risk","betting.risk.high":"high risk","betting.risk.exposureWarning.title":"Exposure Warning","betting.risk.exposureWarning.body":"15% of bankroll on a single matchup","betting.risk.hotStreak.title":"Hot Streak","betting.risk.hotStreak.body":"4 wins in last 5 bets","players.loading":"Loading players...","players.title":"Players","players.subtitle":"Browse players, compare stats, and view details","players.search.placeholder":"Search player...","players.filter.allTeams":"All teams","players.filter.allPositions":"All positions","players.filter.teamLabel":"Team","players.filter.positionLabel":"Position","players.actions.compare":"Compare ({count})","players.details.trendSummary":"Trend summary (last 10)","players.tooltip.trendSummary":"Percent change over recent games with hot/cold labels.","players.details.loading":"Loading player details...","players.details.seasonStats":"Season stats","players.details.gameMetrics":"Game metrics","players.tooltip.gameMetrics":"Shooting splits and per-game metrics.","players.details.gamesPlayed":"Games played","players.details.bio":"Bio","players.tooltip.bio":"Player bio details: height, weight, birth date, experience, college.","players.details.height":"Height","players.details.weight":"Weight","players.details.birthDate":"Birth date","players.details.experience":"Experience (years)","players.details.college":"College","players.details.recentTrends":"Recent 10 games","players.tooltip.recentTrends":"Sparkline trends for the last games across core stats.","players.actions.addToComparison":"Add to comparison","players.actions.removeFromComparison":"Remove from comparison","players.comparison.title":"Stats Comparison","players.comparison.table.stat":"Stat","players.comparison.maxPlayersAlert":"You can compare up to {max} players.","players.empty.title":"No players found","players.empty.subtitle":"Try adjusting your search or filters","players.statShort.ppg":"PPG","players.statShort.rpg":"RPG","players.statShort.apg":"APG","players.stats.ppg":"Points per game","players.stats.rpg":"Rebounds per game","players.stats.apg":"Assists per game","players.stats.fgPct":"FG%","players.stats.tpPct":"3P%","players.stats.ftPct":"FT%","players.stats.steals":"Steals","players.stats.blocks":"Blocks","players.stats.turnovers":"Turnovers","players.stats.mpg":"Minutes per game","analytics.tabs.overview.label":"Overview","analytics.tabs.overview.helper":"Control room","analytics.tabs.props.label":"Prop Bets","analytics.tabs.props.helper":"Value edges","analytics.tabs.form.label":"Form Tracker","analytics.tabs.form.helper":"Trend pulse","analytics.tabs.matchup.label":"Matchups","analytics.tabs.matchup.helper":"Head-to-head","analytics.tabs.injury.label":"Injury Impact","analytics.tabs.injury.helper":"Usage shifts","analytics.insights.base1.title":"Momentum + matchup create the best edge","analytics.insights.base1.description":"Stack form trend with opponent splits. If both lean the same direction, hit rate improves.","analytics.insights.base1.metricPrimary":"+8-12% edge","analytics.insights.base1.metricSecondary":"70%+ confidence","analytics.insights.base1.signal":"Form tracker + matchup analyzer","analytics.insights.base1.focus":"Verify with last 10 games","analytics.insights.base2.title":"Home court splits hide value props","analytics.insights.base2.description":"When home/away PPG delta is wide, player props often misprice usage by 1-2 points.","analytics.insights.base2.metricPrimary":"2-4 pts shift","analytics.insights.base2.metricSecondary":"3+ games sample","analytics.insights.base2.signal":"Home vs away split","analytics.insights.base2.focus":"Target star usage props","analytics.insights.base3.title":"Injury gaps unlock beneficiary overs","analytics.insights.base3.description":"Usage bumps after a star sits are most reliable for 2-3 primary beneficiaries.","analytics.insights.base3.metricPrimary":"+4-7 pts","analytics.insights.base3.metricSecondary":"20%+ usage","analytics.insights.base3.signal":"Injury impact analyzer","analytics.insights.base3.focus":"Cross-check with prop lines","analytics.insights.dynamic.injury.title":"Injury impact shifts scoring expectations","analytics.insights.dynamic.injury.description":"Team output changes when a key player sits. Beneficiaries pick up usage and touches.","analytics.insights.dynamic.injury.metricPrimary":"{value} pts","analytics.insights.dynamic.injury.metricSecondary":"{count} beneficiaries","analytics.insights.dynamic.injury.signal":"Injury impact analyzer","analytics.insights.dynamic.injury.focus":"Check beneficiary props","analytics.insights.dynamic.player.title":"Player matchup shows scoring tilt","analytics.insights.dynamic.player.description":"Head-to-head splits can unlock prop lines when opponent defense is soft at position.","analytics.insights.dynamic.player.metricPrimary":"{value} avg pts","analytics.insights.dynamic.player.metricSecondary":"{games} games","analytics.insights.dynamic.player.signal":"Player matchup analyzer","analytics.insights.dynamic.player.focus":"Compare to current line","analytics.insights.dynamic.team.title":"Home court swing amplifies totals","analytics.insights.dynamic.team.description":"Home/away deltas show where totals are mispriced and pace changes direction.","analytics.insights.dynamic.team.metricPrimary":"{value} PPG","analytics.insights.dynamic.team.metricSecondary":"{games} games","analytics.insights.dynamic.team.signal":"Team matchup analyzer","analytics.insights.dynamic.team.focus":"Target totals and spreads","analytics.actions.loading":"Loading...","analytics.error.teamMatchupFailed":"Failed to load team matchup. Check backend and analytics data.","analytics.error.playerMatchupFailed":"Failed to load player matchup. Check backend and analytics data.","analytics.error.injuryImpactFailed":"Failed to load injury impact. Check backend and analytics data.","analytics.hero.badge":"Analytics Lab","analytics.hero.title":"Signals that outperform the noise","analytics.hero.description":"Build matchup angles, isolate prop value, and see where form shifts create an edge. All modules pull from the same historical layer but tell different stories.","analytics.hero.dataFreshness.label":"Data freshness","analytics.hero.dataFreshness.value":"Synced  Live API","analytics.hero.stats.modulesOnline.label":"Modules online","analytics.hero.stats.modulesOnline.helper":"Prop  Form  Matchup  Injury","analytics.hero.stats.historicalSeasons.label":"Historical seasons","analytics.hero.stats.historicalSeasons.helper":"Rolling averages + splits","analytics.hero.stats.focus.label":"Focus","analytics.hero.stats.focus.value":"Value edges","analytics.hero.stats.focus.helper":"Confidence + trend bias","analytics.overview.props.title":"Prop Bet Predictor","analytics.overview.props.subtitle":"History-driven over/under edges","analytics.overview.props.description":"Identify value props with hit rates, confidence bands, and trend direction.","analytics.overview.props.action":"Open Prop Analyzer","analytics.overview.form.title":"Form Tracker","analytics.overview.form.subtitle":"Rolling averages and trend detection","analytics.overview.form.description":"Spot hot and cold streaks, compare last five vs season form, and time your props.","analytics.overview.form.action":"Track Form","analytics.overview.matchup.title":"Matchup Analyzer","analytics.overview.matchup.subtitle":"Team and player head-to-head edges","analytics.overview.matchup.description":"Compare historical splits, identify home/away advantages, and target weak defenses.","analytics.overview.matchup.action":"Analyze Matchups","analytics.overview.injury.title":"Injury Impact","analytics.overview.injury.subtitle":"Usage and scoring shifts after absences","analytics.overview.injury.description":"Quantify team scoring drops and identify beneficiaries for prop value.","analytics.overview.injury.action":"Run Injury Impact","analytics.overview.insight.toastUpdated":"Insight updated.","analytics.overview.insight.heading":"Insight of the day","analytics.overview.insight.edgeBoost":"Edge boost","analytics.overview.insight.confidence":"Confidence","analytics.overview.insight.lastUpdated":"Last updated","analytics.overview.insight.button.label":"Insight","analytics.overview.insight.button.locked":"Locked","analytics.overview.insight.button.refresh":"Refresh","analytics.overview.insight.signalStack":"Signal stack","analytics.overview.insight.idealUse":"Ideal use","analytics.overview.insight.idealUse.value":"Prop lines and player usage props","analytics.overview.insight.nextAction":"Next action","analytics.overview.insight.historyHeading":"Insight history","analytics.overview.insight.historyEmpty":"Insights will appear after loading analytics data.","analytics.props.header.title":"Prop Bet Signal Desk","analytics.props.header.description":"Tune a line, compare against historical hit rates, and lock a confidence band.","analytics.props.header.badge":"predictive","analytics.form.header.title":"Momentum Monitor","analytics.form.header.description":"Compare rolling averages to recent output and spot acceleration or drop-offs.","analytics.form.header.badge":"rolling","analytics.matchup.team.title":"Team Matchup","analytics.matchup.team.form.team.label":"Team","analytics.matchup.team.form.team.placeholder":"e.g., CHI","analytics.matchup.team.form.opponent.label":"Opponent","analytics.matchup.team.form.opponent.placeholder":"e.g., LAL","analytics.matchup.team.form.seasonsBack.label":"Seasons Back","analytics.matchup.team.actions.analyze":"Analyze Team Matchup","analytics.matchup.team.stats.totalGames":"Total Games","analytics.matchup.team.sections.homeAwayScoring.title":"Home vs Away Scoring","analytics.matchup.team.sections.homeAwayScoring.helper":"Away  Home","analytics.matchup.team.sections.teamAverages.title":"Team Averages","analytics.matchup.team.sections.teamAverages.helper":"PTS / REB / AST","analytics.matchup.team.sections.homeAwaySplit.title":"Home vs Away Split","analytics.matchup.team.stats.avgPoints":"Avg Points","analytics.matchup.team.stats.avgRebounds":"Avg Rebounds","analytics.matchup.team.stats.avgAssists":"Avg Assists","analytics.matchup.team.labels.away":"Away","analytics.matchup.team.labels.home":"Home","analytics.matchup.team.labels.homePpg":"Home PPG:","analytics.matchup.team.labels.awayPpg":"Away PPG:","analytics.matchup.team.labels.advantage":"Advantage:","analytics.matchup.team.empty":"Enter team codes and analyze to see historical splits and pacing advantages.","analytics.matchup.player.title":"Player Matchup","analytics.matchup.player.form.player.label":"Player","analytics.matchup.player.form.player.placeholder":"e.g., Zach LaVine","analytics.matchup.player.form.opponent.label":"Opponent","analytics.matchup.player.form.opponent.placeholder":"e.g., LAL","analytics.matchup.player.form.seasonsBack.label":"Seasons Back","analytics.matchup.player.actions.analyze":"Analyze Player Matchup","analytics.matchup.player.stats.gamesPlayed":"Games Played","analytics.matchup.player.sections.productionMix.title":"Production Mix","analytics.matchup.player.sections.productionMix.helper":"PTS  REB  AST","analytics.matchup.player.sections.scoringShape.title":"Scoring Shape","analytics.matchup.player.sections.scoringShape.helper":"PTS / REB / AST","analytics.matchup.player.stats.avgPoints":"Avg Points","analytics.matchup.player.stats.avgRebounds":"Avg Rebounds","analytics.matchup.player.stats.avgAssists":"Avg Assists","analytics.matchup.player.empty":"Input a player + opponent to surface historical scoring and usage outputs.","analytics.injury.title":"Injury Impact Analyzer","analytics.injury.form.team.label":"Team","analytics.injury.form.team.placeholder":"e.g., CHI","analytics.injury.form.missingPlayer.label":"Missing Player","analytics.injury.form.missingPlayer.placeholder":"e.g., Zach LaVine","analytics.injury.form.seasonsBack.label":"Seasons Back","analytics.injury.actions.analyze":"Analyze Injury Impact","analytics.injury.sections.teamImpact.title":"Team Impact","analytics.injury.sections.teamImpact.pointsDifference":"Points difference:","analytics.injury.sections.beneficiarySurge.title":"Beneficiary Surge","analytics.injury.sections.beneficiarySurge.helper":"Top increases","analytics.injury.sections.beneficiaries.title":"Beneficiaries","analytics.injury.sections.beneficiaries.empty":"No beneficiaries found.","analytics.injury.empty":"Run the analyzer to see how usage and scoring change without a key player.","prop.badge.signalDesk":"Signal Desk","prop.title":"Prop Bet Analyzer","prop.subtitle":"Analyze player prop bets based on historical performance data","prop.mode.label":"Mode","prop.mode.value":"Predictive","prop.form.playerName.label":"Player name","prop.form.playerName.placeholder":"e.g., Zach LaVine","prop.form.statType.label":"Stat type","prop.form.line.label":"Line (O/U)","prop.form.opponent.label":"Opponent (optional)","prop.form.opponent.placeholder":"e.g., LAL","prop.form.games.label":"Games to analyze","prop.actions.analyzing":"Analyzing...","prop.actions.analyze":"Analyze prop","prop.error.analyzeFailed":"Failed to analyze prop bet. Make sure the backend is running and historical data is imported.","prop.value.over":"OVER","prop.value.under":"UNDER","prop.value.noValue":"NO VALUE","prop.trend.up":"Trending UP {value}%","prop.trend.down":"Trending DOWN {value}%","prop.trend.stable":"Stable form","prop.stats.predictionAvg":"Prediction (Avg)","prop.stats.hitRate":"Hit Rate","prop.stats.median":"Median","prop.stats.sampleSize":"Sample Size","prop.recentGames.title":"Last 10 Games","prop.vsOpponent.title":"vs {opponent} ({games} games)","prop.vsOpponent.avg":"Avg","prop.vsOpponent.high":"High","prop.vsOpponent.low":"Low","prop.vsOpponent.overRate":"Over Rate","prop.stat.points":"Points","prop.stat.rebounds":"Rebounds","prop.stat.assists":"Assists","prop.stat.threePointersMade":"3-Pointers Made","prop.stat.steals":"Steals","prop.stat.blocks":"Blocks","form.badge.momentumMonitor":"Momentum Monitor","form.title":"Player Form Tracker","form.subtitle":"Track player performance trends with rolling averages","form.window.label":"Window","form.window.value":"{games} games","form.form.playerName.label":"Player name","form.form.playerName.placeholder":"e.g., Zach LaVine","form.form.games.label":"Games to analyze","form.actions.loading":"Loading...","form.actions.track":"Track form","form.error.fetchFailed":"Failed to fetch form data. Make sure the backend is running and historical data is imported.","form.trend.improving":"Improving","form.trend.declining":"Declining","form.trend.stable":"Stable","form.overallAverages.title":"Overall Averages ({games} games)","form.last5.title":"Last 5 Games","form.stat.points":"Points","form.stat.rebounds":"Rebounds","form.stat.assists":"Assists","form.chart.title":"{stat} Trend (5-game rolling average)","form.tooltip.vsOpponent":"vs {opponent}","form.tooltip.actualLabel":"Actual","form.tooltip.avgLabel":"5-Game Avg","form.tooltip.minutes":"Minutes: {minutes}","form.legend.actual":"Actual","form.legend.rollingAvg":"Rolling Avg","form.table.titleRecent":"Recent Games","form.table.header.date":"Date","form.table.header.opponent":"Opponent","form.table.header.pts":"PTS","form.table.header.reb":"REB","form.table.header.ast":"AST","form.table.header.min":"MIN","form.table.cell.vs":"vs {opponent}","bulls.loading":"Loading Bulls analysis...","bulls.header.title":"Chicago Bulls Analysis","bulls.header.liveData":"Live Data","bulls.overview.overallRecord":"Overall Record","bulls.overview.atsRecord":"ATS Record","bulls.overview.ouRecord":"O/U Record","bulls.overview.last5Games":"Last 5 Games","bulls.sections.playerAnalysis":"Player Analysis","bulls.sections.nextGame":"Next Game","bulls.nextGame.vsOpponent":"vs {opponent}","bulls.nextGame.dateLocation":"{date}  {location}","bulls.nextGame.location.home":"Home","bulls.nextGame.location.away":"Away","bulls.nextGame.spread":"Spread: {value}","bulls.nextGame.total":"Total: {value}","bulls.nextGame.prediction":"Prediction","bulls.nextGame.confidence":"{value}% confidence","bulls.nextGame.positionalMatchups":"Positional Matchups","bulls.matchups.advantage":"Advantage","bulls.matchups.disadvantage":"Disadvantage","bulls.matchups.even":"Even","bulls.trends.title":"Recent Trends (Last {games} Games)","bulls.trends.pace":"Pace","bulls.trends.offRtg":"OffRtg","bulls.trends.defRtg":"DefRtg","bulls.trends.threePointPct":"3P%","bulls.trends.freeThrowPct":"FT%","bulls.risk.title":"Risk Factors","bulls.risk.backToBack.title":"Back-to-Back Games","bulls.risk.backToBack.desc":"Back-to-back game: {isBackToBack}","bulls.risk.homeCourt.title":"Home Court Advantage","bulls.risk.homeCourt.desc":"Home court. Season home record: {record}","bulls.form.excellent":"Excellent","bulls.form.good":"Good","bulls.form.average":"Average","bulls.form.poor":"Poor","bulls.picks.cover":"COVER","bulls.picks.over":"OVER","bulls.picks.under":"UNDER","bulls.fallback.unknownName":"Unknown","bulls.fallback.playerRole":"Player"},pl:{"app.loading.title":"Analitics for Marek","app.loading.subtitle":"adowanie danych na ywo...","app.loading.fetching":"Pobieranie analiz NBA i kursw","app.status.liveData":"Dane na ywo","app.status.checking":"Backend: sprawdzam","app.status.offline":"Backend: offline","app.status.online":"Backend: online","app.status.onlineData":"Backend: online (rdo danych OK)","app.status.onlineNoData":"Backend: online (brak rda danych)","app.status.checkedAt":"sprawdzono {time}","nav.dashboard":"Panel","nav.reports":"Raporty","nav.teams":"Analiza druyn","nav.betting":"Zakady","nav.odds":"Kursy na ywo","nav.players":"Zawodnicy","nav.analytics":"Analityka","nav.bulls":"Bulls","header.section.dashboard":"Panel analiz NBA","header.section.reports":"Centrum raportw dziennych","header.section.teams":"Analiza druyn NBA","header.section.betting":"Centrum analiz zakadw","header.section.odds":"Monitor kursw na ywo","header.section.players":"Przegldarka zawodnikw","header.section.analytics":"Zaawansowana analityka","header.section.default":"Analityka NBA","header.lastUpdated":"Ostatnia aktualizacja","header.refreshData":"Odwie dane","header.notifications":"Powiadomienia","header.settings":"Ustawienia","header.profile":"Profil","header.analyst":"Analityk","header.quickSettings":"Szybkie ustawienia","header.animations":"Animacje","header.compactMode":"Tryb kompaktowy","header.close":"Zamknij","header.language":"Jzyk","header.notifications.sample.lineMovement":"Ruch linii: Celtics -5.5 (2 min temu)","header.notifications.sample.newReportReady":"Nowy raport gotowy: 8:00","header.profile.preferences":"Preferencje","sidebar.subtitle":"Analityka zakadw","sidebar.leagueStatus":"Status ligi","sidebar.nextSlate":"Nastpna kolejka: {count} meczw","sidebar.tonight":"Dzi {time}","common.live":"Na ywo","common.clear":"Wyczy","common.clearAll":"Wyczy wszystko","common.close":"Zamknij","common.back":"Wr","common.yes":"Tak","common.no":"Nie","common.done":"Gotowe","common.error":"Bd","common.details":"Szczegy","common.na":"brak","common.retry":"Sprbuj ponownie","common.tbd":"TBD","common.noData":"Brak danych","common.unknownShort":"?","reports.title.generic":"Raport","reports.title.750am":"7:50 - Analiza poprzedniego dnia","reports.title.800am":"8:00 - Poranne podsumowanie","reports.tooltip.morningSummary":"Poranny snapshot z wynikami wczoraj i trendami 7-dniowymi.","reports.title.1100am":"11:00 - Skauting dnia meczowego","reports.generated":"Wygenerowano","reports.status.generating":"Generowanie...","reports.status.ready":"Gotowy","reports.status.error":"Bd","reports.summary.gamesAnalyzed":"Przeanalizowane mecze","reports.summary.featuredTeamLastGame":"Ostatni mecz wybranej druyny","reports.summary.yesterdayResults":"Wyniki wczoraj","reports.summary.teamOffRtg":"OffRtg druyny","reports.summary.gamesSuffix":"meczw","reports.empty.generating":"Raport jest w trakcie generowania...","reports.empty.noContent":"Tre raportu jest niedostpna","reports.exportJson":"Eksportuj PDF","reports.exportPdf":"Eksportuj PDF","reports.export":"Eksportuj","reports.section.resultsVsClosingLine":"Wyniki vs linia zamknicia","reports.tooltip.resultsVsClosingLine":"Wyniki wzgldem closing line.","reports.section.topTrends":"Najwaniejsze trendy","reports.tooltip.topTrends":"Najmocniejsze sygnay trendowe z modelu.","reports.section.teamPlayerAnalysis":"Analiza zawodnikw druyny","reports.tooltip.teamPlayerAnalysis":"Sekcja analizy druyn i zawodnikw.","reports.section.yesterdayResults":"Wyniki wczoraj","reports.tooltip.yesterdayResults":"Wyniki ATS i O/U z wczoraj.","reports.section.sevenDayTrends":"Trendy z 7 dni","reports.tooltip.sevenDayTrends":"Przegld trendw z ostatnich 7 dni.","reports.trends.label.pace_trends":"Tempo (trendy)","reports.trends.label.offensive_efficiency":"Efektywnosc ofensywy","reports.trends.label.defensive_efficiency":"Efektywnosc obrony","reports.trends.label.three_point_shooting":"Rzuty za 3","reports.trends.label.free_throw_trends":"Rzuty wolne","reports.trends.label.ats_performance":"Wyniki ATS","reports.trends.label.bulls":"Bulls","reports.trends.label.focus_teams":"Zespoly fokusowe","reports.trends.label.league_context":"Kontekst ligi","reports.trends.label.betting_impact":"Wplyw na zaklady","reports.trends.label.current":"Obecnie","reports.trends.label.avg":"Srednia","reports.trends.label.range":"Zakres","reports.trends.label.trend":"Trend","reports.trends.label.significance":"Istotnosc","reports.trends.label.ortg":"OffRtg","reports.trends.label.drtg":"DefRtg","reports.trends.label.pct":"Procent","reports.trends.label.volume":"Wolumen","reports.trends.label.attempts":"Proby","reports.trends.label.record":"Bilans","reports.trends.label.home":"Dom","reports.trends.label.road":"Wyjazd","reports.trends.label.combined":"Lacznie","reports.trends.label.percentage":"Procent","reports.trends.label.rank":"Ranking","reports.trends.label.top":"Najlepsze","reports.trends.label.bottom":"Najslabsze","reports.trends.label.best":"Najlepsze","reports.trends.label.worst":"Najslabsze","reports.trends.label.avg_ortg":"Sredni OffRtg","reports.trends.label.avg_drtg":"Sredni DefRtg","reports.trends.label.7day_avg":"Srednia 7-dniowa","reports.trends.label.7day_change":"Zmiana 7-dniowa","reports.section.teamPlayersForm":"Forma zawodnikw","reports.tooltip.teamPlayersForm":"Wyrniona forma i serie zawodnikw.","reports.section.executiveSummary":"Podsumowanie","reports.section.slateOverview":"Przegld rozpiski","reports.tooltip.slateOverview":"Przegld dzisiejszego slate i kontekstu.","reports.section.injuryIntelligence":"Informacje o urazach","reports.tooltip.injuryIntelligence":"Wpyw kontuzji i absencji na prognozy.","reports.section.matchupAnalysis":"Analiza matchupw","reports.tooltip.matchupAnalysis":"Analizy matchupw i kluczowe przewagi.","reports.pdf.keys":"Klucze","reports.pdf.reportData":"Dane raportu","reports.label.lastGame":"Ostatni mecz","reports.label.minutesShort":"min","reports.loading":"adowanie raportw...","reports.list.titleDailyReports":"Raporty dzienne","reports.tooltip.dailyReports":"Generuj i led raporty dzienne; status pokazuje gotowo danych.","reports.list.timezoneChicago":"Strefa czasowa Chicago (CST)","reports.list.generatingReports":"Generowanie raportw...","reports.list.generateNow":"Wygeneruj raporty","reports.setupChecklist.title":"Lista kontrolna konfiguracji","reports.setupChecklist.supabaseConnected":"Poczono z Supabase (SUPABASE_URL + SERVICE ROLE key)","reports.setupChecklist.schedulerOn":"Scheduler wczony (ENABLE_SCHEDULER=true)","reports.setupChecklist.scrapingEnabled":"Scraping wczony (AUTO_SCRAPE_ON_START=true)","reports.setupChecklist.historicalImportDone":"Import historyczny wykonany (raporty potrzebuj danych)","reports.selectReport.title":"Wybierz raport","reports.selectReport.subtitle":"Wybierz raport z lewej strony, aby zobaczy szczegow analiz","dashboard.loading":"adowanie danych panelu...","dashboard.error.loadFailed":"Nie udao si wczyta danych. Sprbuj ponownie.","dashboard.tabs.dashboard":"Panel","dashboard.tabs.allTeams":"Wszystkie druyny","dashboard.stats.gamesScheduled":"Zaplanowane mecze","dashboard.stats.teamsTracked":"ledzone druyny","dashboard.stats.thisSeason":"Ten sezon","dashboard.stats.valueOpportunities":"Okazje value","dashboard.tooltip.stats.gamesScheduled":"Liczba dzisiejszych meczw z /api/games/today.","dashboard.tooltip.stats.teamsTracked":"Druyny z najlepszym edge z /api/focus-teams/today.","dashboard.tooltip.stats.thisSeason":"Agregaty sezonowe z /api/teams/analysis.","dashboard.tooltip.stats.valueOpportunities":"Liczba pozycji z dodatnim edge (edge > 0).","dashboard.section.todaysGames":"Dzisiejsze mecze","dashboard.section.gamesSuffix":"meczw","dashboard.section.focusTeams":"Druyny w fokusie","dashboard.section.leagueSpotlight":"Highlight ligi","dashboard.section.liveMatchup":"Mecz na ywo","dashboard.section.riskAlerts":"Alerty ryzyka","dashboard.tooltip.todaysGames":"Lista dzisiejszych meczw z najlepszym kursem ML/spread/total, czona z /api/games/today i /api/odds/{game_id}.","dashboard.tooltip.focusTeams":"Druyny z dodatnim edge na dzi, edge = p_consensus * best_price - 1.","dashboard.tooltip.leagueSpotlight":"Wyrniony mecz i kontekst na dzi.","dashboard.tooltip.liveMatchup":"Karta meczu na ywo z kluczowymi sygnaami.","dashboard.tooltip.riskAlerts":"Alerty o ruchu linii lub skoku wolumenu.","dashboard.section.scheduledGames":"Zaplanowane mecze","dashboard.section.scheduledSubtitle":"Nadchodzce mecze z liniami","dashboard.section.trackedTeams":"ledzone druyny","dashboard.section.trackedSubtitle":"Druyny oznaczone przez model","dashboard.section.seasonOverview":"Przegld sezonu","dashboard.section.seasonSubtitle":"Top druyny wg bilansu","dashboard.section.valuePicks":"Okazje value","dashboard.section.valueSubtitle":"Przewagi modelu do obserwacji","dashboard.tooltip.scheduledGames":"Nadchodzce mecze z najlepszymi liniami i eksportem.","dashboard.tooltip.trackedTeams":"Druyny oznaczone przez model z wartociami edge.","dashboard.tooltip.seasonOverview":"Przegld sezonu z win%, OffRtg/DefRtg/NetRtg.","dashboard.tooltip.valuePicks":"Okazje value z dodatnim edge.","dashboard.filter.team":"Druyna","dashboard.filter.date":"Data","dashboard.filter.search":"Szukaj","dashboard.sort.edge":"Sortuj po przewadze","dashboard.sort.team":"Sortuj po druzynie","dashboard.sort.winPct":"Sortuj po win%","dashboard.sort.netRtg":"Sortuj po net rating","dashboard.sort.offRtg":"Sortuj po OffRtg","dashboard.sort.defRtg":"Sortuj po DefRtg","dashboard.actions.exportCsv":"Eksport CSV","dashboard.actions.exportPdf":"Eksport PDF","dashboard.label.edge":"przewaga","dashboard.label.spread":"Handicap","dashboard.label.total":"Suma","dashboard.actions.viewOdds":"Zobacz kursy","dashboard.actions.teamAnalysis":"Analiza druyny","dashboard.spotlight.tonightTime":"Dzi 20:00","dashboard.spotlight.featuredGame":"Wyrniony mecz","dashboard.spotlight.last5":"Ostatnie 5","dashboard.spotlight.strongForm":"Mocna forma","dashboard.spotlight.keyPlayers":"Kluczowi gracze","dashboard.spotlight.starsActive":"Gwiazdy aktywne","dashboard.spotlight.fullRotation":"Pena rotacja","dashboard.risk.lineMovementTitle":"Alert ruchu linii","dashboard.risk.lineMovementBody":"Linia ruszya o 2.0 punktu przy pnym graniu (30 min temu)","dashboard.risk.volumeSpikeTitle":"Skok wolumenu","dashboard.risk.volumeSpikeBody":"Duy obrt na topowym meczu","teams.loading":"adowanie analizy druyn...","teams.title":"Analiza druyn NBA","teams.subtitle":"Kompleksowa analiza wszystkich 30 druyn NBA","teams.tooltip.title":"Przegld wszystkich druyn NBA z filtrami, kartami i widokiem tabeli.","teams.actions.tableView":"Widok tabeli","teams.actions.gridView":"Widok siatki","teams.stats.totalTeams":"cznie druyn","teams.tooltip.totalTeams":"czna liczba druyn w danych.","teams.stats.filtered":"Po filtrach","teams.tooltip.filtered":"Druyny pasujce do biecych filtrw.","teams.conference.eastern":"Wschd","teams.conference.western":"Zachd","teams.search.placeholder":"Szukaj druyn...","teams.filter.conferenceLabel":"Konferencja","teams.filter.conferenceSuffix":"Konferencja","teams.filter.divisionLabel":"Dywizja","teams.filter.divisionSuffix":"Dywizja","teams.sort.label":"Sortuj wg","teams.sort.winPct":"Wygrane %","teams.sort.netRating":"Net Rating","teams.sort.pointsPerGame":"Punkty/mecz","teams.sort.strength":"Sia","teams.sort.atsPct":"ATS %","teams.table.team":"Druyna","teams.table.record":"Bilans","teams.table.winPct":"Wygrane %","teams.table.offRtg":"Off Rtg","teams.table.defRtg":"Def Rtg","teams.table.netRtg":"Net Rtg","teams.table.strength":"Sia","teams.empty.title":"Nie znaleziono druyn","teams.empty.subtitle":"Sprbuj zmieni wyszukiwanie lub filtry","teams.label.record":"Bilans","teams.label.winPct":"Wygrane %","teams.label.offRtg":"Off Rtg","teams.label.defRtg":"Def Rtg","teams.card.formLast10":"Forma (ostatnie 10)","teams.card.atsRecord":"Bilans ATS","teams.card.strength":"Sia","teams.details.keyPlayers":"Kluczowi gracze","teams.details.bettingStats":"Statystyki zakadw","teams.details.overUnder":"Over/Under","teams.details.avgTotal":"r. suma","teams.details.strength":"Sia","odds.loading":"adowanie kursw na ywo...","odds.title":"Monitor kursw na ywo","odds.onlySelected":"Tylko wybrane","odds.refresh":"Odwie","odds.selectedGame":"Wybrany mecz","odds.lastUpdate":"Ostatnia aktualizacja","odds.liveAlerts":"Alerty na ywo","odds.tooltip.liveAlerts":"Alerty w czasie rzeczywistym o ruchu linii, reverse line lub skokach value.","odds.alertType.movement":"ruch","odds.alertType.value":"value","odds.alertType.reverse":"odwrcenie","odds.severity.high":"wysokie","odds.severity.medium":"rednie","odds.severity.low":"niskie","odds.gamesSuffix":"meczw","odds.featured":"WYRNIONE","odds.comparisonTitle":"Porwnanie kursw","odds.tooltip.comparison":"Porwnanie najlepszych kursw spread/total/ML u bukmacherw.","odds.label.spread":"Handicap","odds.label.total":"Suma","odds.label.moneyline":"Moneyline","odds.best":"Najlepsze","odds.noSpread":"Brak handicapu u bukmacherw","odds.recentMovements":"Ostatnie ruchy","odds.table.sportsbook":"Bukmacher","betting.loading":"Analiza okazji do zakadw...","betting.title":"Centrum analiz zakadw","betting.bankroll":"Bankroll","betting.category.all":"Wszystkie","betting.category.featured":"Wyrnione","betting.category.general":"Oglne","betting.category.value":"Value","betting.section.recommendedBets":"Rekomendowane zakady","betting.section.betsSuffix":"zakadw","betting.tooltip.recommendedBets":"Najlepsze rekomendacje modelu z edge, prawd. konsensus i najlepszym kursem.","betting.kelly":"Kelly","betting.kelly.oddsLabel":"Kurs (American)","betting.kelly.winProbLabel":"Prawdopodobiestwo wygranej (%)","betting.label.stake":"Stawka","betting.label.toWin":"Wygrana","betting.label.reasoning":"Uzasadnienie","betting.pick.vs":"vs","betting.pick.mlShort":"ML","betting.pick.market":"Rynek","betting.pick.market.h2h":"Moneyline","betting.pick.book":"Bukmacher","betting.pick.edge":"Edge","betting.pick.consensusProb":"Prawd. konsensus","betting.pick.bestPrice":"Najlepszy kurs (decimal)","betting.section.valueBets":"Zakady value","betting.tooltip.valueBets":"Pozycje z dodatnim edge, posortowane malejco.","betting.value.book":"Bukmacher","betting.value.fairProb":"Prawd. fair","betting.label.confidence":"Pewno","betting.label.max":"Maks","betting.section.kellyCalculator":"Kalkulator Kelly","betting.tooltip.kellyCalculator":"Wylicza optymaln stawk z kursu i prawdopodobiestwa.","betting.kelly.calculate":"Wylicz optymaln stawk","betting.kelly.recommendedStake":"Rekomendowana stawka","betting.kelly.ofBankroll":"bankrolla","betting.kelly.from":"z","betting.kelly.negativeExpectation":"Ujemna warto oczekiwana  nie graj","betting.kelly.enterToCalculate":"Wpisz kurs i prawdopodobiestwo, aby wyliczy","betting.section.sessionStats":"Statystyki sesji","betting.tooltip.sessionStats":"Podsumowanie statystyk biecej sesji.","betting.stats.todayPnL":"Dzisiejszy P&L","betting.stats.winRate":"Skuteczno","betting.stats.activeBets":"Aktywne zakady","betting.section.riskAlerts":"Alerty ryzyka","betting.tooltip.riskAlerts":"Sygnay ryzyka i ostrzeenia rynkowe.","betting.risk.low":"niskie ryzyko","betting.risk.medium":"rednie ryzyko","betting.risk.high":"wysokie ryzyko","betting.risk.exposureWarning.title":"Ostrzeenie ekspozycji","betting.risk.exposureWarning.body":"15% bankrolla na jednym meczu","betting.risk.hotStreak.title":"Dobra passa","betting.risk.hotStreak.body":"4 wygrane w ostatnich 5 zakadach","players.loading":"adowanie zawodnikw...","players.title":"Zawodnicy","players.subtitle":"Przegldaj zawodnikw, porwnuj statystyki i sprawdzaj szczegy","players.search.placeholder":"Szukaj zawodnika...","players.filter.allTeams":"Wszystkie druyny","players.filter.allPositions":"Wszystkie pozycje","players.filter.teamLabel":"Druyna","players.filter.positionLabel":"Pozycja","players.actions.compare":"Porwnaj ({count})","players.details.trendSummary":"Podsumowanie trendu (ostatnie 10)","players.tooltip.trendSummary":"Zmiana procentowa w ostatnich meczach z etykiet hot/cold.","players.details.loading":"Ladowanie szczegolow...","players.details.seasonStats":"Statystyki sezonu","players.details.gameMetrics":"Metryki meczowe","players.tooltip.gameMetrics":"Skuteczno rzutowa i metryki per-game.","players.details.gamesPlayed":"Mecze","players.details.bio":"Informacje","players.tooltip.bio":"Dane zawodnika: wzrost, waga, data urodzenia, dowiadczenie, szkoa.","players.details.height":"Wzrost","players.details.weight":"Waga","players.details.birthDate":"Data urodzenia","players.details.experience":"Doswiadczenie (lata)","players.details.college":"Szkola/College","players.details.recentTrends":"Ostatnie 10 meczow","players.tooltip.recentTrends":"Sparkliny trendw z ostatnich gier dla kluczowych statystyk.","players.actions.addToComparison":"Dodaj do porwnania","players.actions.removeFromComparison":"Usu z porwnania","players.comparison.title":"Porwnanie statystyk","players.comparison.table.stat":"Statystyka","players.comparison.maxPlayersAlert":"Moesz porwna maksymalnie {max} zawodnikw.","players.empty.title":"Nie znaleziono zawodnikw","players.empty.subtitle":"Sprbuj zmieni wyszukiwanie lub filtry","players.statShort.ppg":"PPG","players.statShort.rpg":"RPG","players.statShort.apg":"APG","players.stats.ppg":"Punkty na mecz","players.stats.rpg":"Zbirki na mecz","players.stats.apg":"Asysty na mecz","players.stats.fgPct":"Skuteczno z gry","players.stats.tpPct":"Skuteczno za 3","players.stats.ftPct":"Skuteczno wolnych","players.stats.steals":"Przechwyty","players.stats.blocks":"Bloki","players.stats.turnovers":"Straty","players.stats.mpg":"Minuty na mecz","analytics.tabs.overview.label":"Przegld","analytics.tabs.overview.helper":"Panel kontrolny","analytics.tabs.props.label":"Zakady prop","analytics.tabs.props.helper":"Przewagi value","analytics.tabs.form.label":"Tracker formy","analytics.tabs.form.helper":"Puls trendu","analytics.tabs.matchup.label":"Matchupy","analytics.tabs.matchup.helper":"Bezporednie starcia","analytics.tabs.injury.label":"Wpyw kontuzji","analytics.tabs.injury.helper":"Zmiany usage","analytics.insights.base1.title":"Momentum + matchup daj najwiksz przewag","analytics.insights.base1.description":"Pocz trend formy z podziaami vs rywal. Gdy oba id w tym samym kierunku, hit rate ronie.","analytics.insights.base1.metricPrimary":"+812% przewagi","analytics.insights.base1.metricSecondary":"70%+ pewnoci","analytics.insights.base1.signal":"Tracker formy + analiza matchup","analytics.insights.base1.focus":"Zweryfikuj na ostatnich 10 meczach","analytics.insights.base2.title":"Split home/away ukrywa value w propach","analytics.insights.base2.description":"Gdy rnica PPG home/away jest dua, propy czsto nie doszacowuj usage o 12 punkty.","analytics.insights.base2.metricPrimary":"24 pkt zmiany","analytics.insights.base2.metricSecondary":"prba 3+ meczw","analytics.insights.base2.signal":"Split home vs away","analytics.insights.base2.focus":"Szukaj propw na usage gwiazd","analytics.insights.base3.title":"Braki kadrowe otwieraj overy beneficjentw","analytics.insights.base3.description":"Wzrost usage po absencji gwiazdy jest najbardziej wiarygodny u 23 gwnych beneficjentw.","analytics.insights.base3.metricPrimary":"+47 pkt","analytics.insights.base3.metricSecondary":"20%+ usage","analytics.insights.base3.signal":"Analiza wpywu kontuzji","analytics.insights.base3.focus":"Porwnaj z liniami propw","analytics.insights.dynamic.injury.title":"Kontuzje zmieniaj oczekiwania punktowe","analytics.insights.dynamic.injury.description":"Zmienia si output zespou, gdy kluczowy gracz wypada. Beneficjenci przejmuj usage i posiadania.","analytics.insights.dynamic.injury.metricPrimary":"{value} pkt","analytics.insights.dynamic.injury.metricSecondary":"{count} beneficjentw","analytics.insights.dynamic.injury.signal":"Analiza wpywu kontuzji","analytics.insights.dynamic.injury.focus":"Sprawd propy beneficjentw","analytics.insights.dynamic.player.title":"Matchup zawodnika pokazuje kierunek","analytics.insights.dynamic.player.description":"Splity H2H potrafi odsoni warto, gdy obrona rywala jest mikka na danej pozycji.","analytics.insights.dynamic.player.metricPrimary":"{value} pkt rednio","analytics.insights.dynamic.player.metricSecondary":"{games} meczw","analytics.insights.dynamic.player.signal":"Analiza matchupu zawodnika","analytics.insights.dynamic.player.focus":"Porwnaj z obecn lini","analytics.insights.dynamic.team.title":"Home court swing wpywa na sumy","analytics.insights.dynamic.team.description":"Rnice home/away pokazuj, gdzie total jest le wyceniony i jak zmienia si tempo.","analytics.insights.dynamic.team.metricPrimary":"{value} PPG","analytics.insights.dynamic.team.metricSecondary":"{games} meczw","analytics.insights.dynamic.team.signal":"Analiza matchupu druyn","analytics.insights.dynamic.team.focus":"Szukaj wartoci w totalach i handicapach","analytics.actions.loading":"adowanie...","analytics.error.teamMatchupFailed":"Nie udao si wczyta matchupu druyn. Sprawd backend i dane analityczne.","analytics.error.playerMatchupFailed":"Nie udao si wczyta matchupu zawodnika. Sprawd backend i dane analityczne.","analytics.error.injuryImpactFailed":"Nie udao si wczyta wpywu kontuzji. Sprawd backend i dane analityczne.","analytics.hero.badge":"Laboratorium analityki","analytics.hero.title":"Sygnay, ktre wygrywaj z szumem","analytics.hero.description":"Buduj kty matchupw, wyapuj value w propach i sprawdzaj, gdzie zmiana formy daje przewag. Wszystkie moduy korzystaj z tej samej warstwy danych historycznych, ale opowiadaj rne historie.","analytics.hero.dataFreshness.label":"wieo danych","analytics.hero.dataFreshness.value":"Zsynchronizowane  Live API","analytics.hero.stats.modulesOnline.label":"Moduy online","analytics.hero.stats.modulesOnline.helper":"Prop  Forma  Matchup  Kontuzje","analytics.hero.stats.historicalSeasons.label":"Sezony historyczne","analytics.hero.stats.historicalSeasons.helper":"rednie kroczce + splity","analytics.hero.stats.focus.label":"Fokus","analytics.hero.stats.focus.value":"Przewagi value","analytics.hero.stats.focus.helper":"Pewno + bias trendu","analytics.overview.props.title":"Predyktor propw","analytics.overview.props.subtitle":"Przewagi over/under na bazie historii","analytics.overview.props.description":"Wyapuj value w propach przez hit rate, pasma pewnoci i kierunek trendu.","analytics.overview.props.action":"Otwrz analizator propw","analytics.overview.form.title":"Tracker formy","analytics.overview.form.subtitle":"rednie kroczce i wykrywanie trendu","analytics.overview.form.description":"Wypatrz hot/cold streaki, porwnaj ostatnie 5 z form sezonu i wyceluj timing propa.","analytics.overview.form.action":"led form","analytics.overview.matchup.title":"Analiza matchupw","analytics.overview.matchup.subtitle":"Przewagi H2H dla druyn i zawodnikw","analytics.overview.matchup.description":"Porwnuj splity, sprawdzaj home/away i szukaj sabych punktw obrony rywala.","analytics.overview.matchup.action":"Analizuj matchupy","analytics.overview.injury.title":"Wpyw kontuzji","analytics.overview.injury.subtitle":"Zmiany usage i punktw po absencjach","analytics.overview.injury.description":"Policz spadek punktw druyny i znajd beneficjentw pod value w propach.","analytics.overview.injury.action":"Uruchom analiz kontuzji","analytics.overview.insight.toastUpdated":"Insight zaktualizowany.","analytics.overview.insight.heading":"Insight dnia","analytics.overview.insight.edgeBoost":"Wzmocnienie edge","analytics.overview.insight.confidence":"Pewno","analytics.overview.insight.lastUpdated":"Ostatnia aktualizacja","analytics.overview.insight.button.label":"Insight","analytics.overview.insight.button.locked":"Zablokowane","analytics.overview.insight.button.refresh":"Odwie","analytics.overview.insight.signalStack":"Stack sygnaw","analytics.overview.insight.idealUse":"Najlepsze uycie","analytics.overview.insight.idealUse.value":"Linie propw i propy na usage zawodnika","analytics.overview.insight.nextAction":"Nastpny krok","analytics.overview.insight.historyHeading":"Historia insightw","analytics.overview.insight.historyEmpty":"Insighty pojawi si po wczytaniu danych analitycznych.","analytics.props.header.title":"Signal desk propw","analytics.props.header.description":"Ustaw lini, porwnaj z historycznym hit rate i zablokuj pasmo pewnoci.","analytics.props.header.badge":"predykcyjny","analytics.form.header.title":"Monitor momentum","analytics.form.header.description":"Porwnaj rednie kroczce z ostatni produkcj i wypatrz przyspieszenia lub spadki.","analytics.form.header.badge":"kroczce","analytics.matchup.team.title":"Matchup druyn","analytics.matchup.team.form.team.label":"Druyna","analytics.matchup.team.form.team.placeholder":"np. CHI","analytics.matchup.team.form.opponent.label":"Rywal","analytics.matchup.team.form.opponent.placeholder":"np. LAL","analytics.matchup.team.form.seasonsBack.label":"Sezony wstecz","analytics.matchup.team.actions.analyze":"Analizuj matchup druyn","analytics.matchup.team.stats.totalGames":"Liczba meczw","analytics.matchup.team.sections.homeAwayScoring.title":"Punkty home vs away","analytics.matchup.team.sections.homeAwayScoring.helper":"Away  Home","analytics.matchup.team.sections.teamAverages.title":"rednie druyny","analytics.matchup.team.sections.teamAverages.helper":"PTS / REB / AST","analytics.matchup.team.sections.homeAwaySplit.title":"Split home vs away","analytics.matchup.team.stats.avgPoints":"r. punkty","analytics.matchup.team.stats.avgRebounds":"r. zbirki","analytics.matchup.team.stats.avgAssists":"r. asysty","analytics.matchup.team.labels.away":"Away","analytics.matchup.team.labels.home":"Home","analytics.matchup.team.labels.homePpg":"Home PPG:","analytics.matchup.team.labels.awayPpg":"Away PPG:","analytics.matchup.team.labels.advantage":"Przewaga:","analytics.matchup.team.empty":"Wpisz kody druyn i uruchom analiz, aby zobaczy splity i przewagi tempa.","analytics.matchup.player.title":"Matchup zawodnika","analytics.matchup.player.form.player.label":"Zawodnik","analytics.matchup.player.form.player.placeholder":"np. Zach LaVine","analytics.matchup.player.form.opponent.label":"Rywal","analytics.matchup.player.form.opponent.placeholder":"np. LAL","analytics.matchup.player.form.seasonsBack.label":"Sezony wstecz","analytics.matchup.player.actions.analyze":"Analizuj matchup zawodnika","analytics.matchup.player.stats.gamesPlayed":"Rozegrane mecze","analytics.matchup.player.sections.productionMix.title":"Miks produkcji","analytics.matchup.player.sections.productionMix.helper":"PTS  REB  AST","analytics.matchup.player.sections.scoringShape.title":"Profil produkcji","analytics.matchup.player.sections.scoringShape.helper":"PTS / REB / AST","analytics.matchup.player.stats.avgPoints":"r. punkty","analytics.matchup.player.stats.avgRebounds":"r. zbirki","analytics.matchup.player.stats.avgAssists":"r. asysty","analytics.matchup.player.empty":"Wpisz zawodnika i rywala, aby zobaczy historyczn produkcj i usage.","analytics.injury.title":"Analiza wpywu kontuzji","analytics.injury.form.team.label":"Druyna","analytics.injury.form.team.placeholder":"np. CHI","analytics.injury.form.missingPlayer.label":"Brakujcy zawodnik","analytics.injury.form.missingPlayer.placeholder":"np. Zach LaVine","analytics.injury.form.seasonsBack.label":"Sezony wstecz","analytics.injury.actions.analyze":"Analizuj wpyw kontuzji","analytics.injury.sections.teamImpact.title":"Wpyw na druyn","analytics.injury.sections.teamImpact.pointsDifference":"Rnica punktw:","analytics.injury.sections.beneficiarySurge.title":"Skok beneficjentw","analytics.injury.sections.beneficiarySurge.helper":"Najwiksze wzrosty","analytics.injury.sections.beneficiaries.title":"Beneficjenci","analytics.injury.sections.beneficiaries.empty":"Nie znaleziono beneficjentw.","analytics.injury.empty":"Uruchom analiz, aby zobaczy, jak zmieniaj si usage i punkty bez kluczowego zawodnika.","prop.badge.signalDesk":"Centrum sygnaw","prop.title":"Analizator propw","prop.subtitle":"Analizuj prop zakady zawodnikw na bazie danych historycznych","prop.mode.label":"Tryb","prop.mode.value":"Predykcyjny","prop.form.playerName.label":"Zawodnik","prop.form.playerName.placeholder":"np. Zach LaVine","prop.form.statType.label":"Statystyka","prop.form.line.label":"Linia (O/U)","prop.form.opponent.label":"Rywal (opcjonalnie)","prop.form.opponent.placeholder":"np. LAL","prop.form.games.label":"Liczba meczw do analizy","prop.actions.analyzing":"Analizuj...","prop.actions.analyze":"Analizuj prop","prop.error.analyzeFailed":"Nie udao si przeanalizowa propa. Upewnij si, e backend dziaa i masz zaimportowane dane historyczne.","prop.value.over":"OVER","prop.value.under":"UNDER","prop.value.noValue":"BRAK VALUE","prop.trend.up":"Trend W GR {value}%","prop.trend.down":"Trend W D {value}%","prop.trend.stable":"Stabilna forma","prop.stats.predictionAvg":"Prognoza (rednia)","prop.stats.hitRate":"Hit rate","prop.stats.median":"Mediana","prop.stats.sampleSize":"Prba","prop.recentGames.title":"Ostatnie 10 meczw","prop.vsOpponent.title":"vs {opponent} ({games} meczw)","prop.vsOpponent.avg":"r.","prop.vsOpponent.high":"Max","prop.vsOpponent.low":"Min","prop.vsOpponent.overRate":"Over rate","prop.stat.points":"Punkty","prop.stat.rebounds":"Zbirki","prop.stat.assists":"Asysty","prop.stat.threePointersMade":"Trafione za 3","prop.stat.steals":"Przechwyty","prop.stat.blocks":"Bloki","form.badge.momentumMonitor":"Monitor momentum","form.title":"Tracker formy zawodnika","form.subtitle":"led trendy formy zawodnika na bazie rednich kroczcych","form.window.label":"Okno","form.window.value":"{games} meczw","form.form.playerName.label":"Zawodnik","form.form.playerName.placeholder":"np. Zach LaVine","form.form.games.label":"Liczba meczw do analizy","form.actions.loading":"adowanie...","form.actions.track":"led form","form.error.fetchFailed":"Nie udao si pobra danych formy. Upewnij si, e backend dziaa i masz zaimportowane dane historyczne.","form.trend.improving":"Poprawa","form.trend.declining":"Spadek","form.trend.stable":"Stabilnie","form.overallAverages.title":"rednie oglne ({games} meczw)","form.last5.title":"Ostatnie 5 meczw","form.stat.points":"Punkty","form.stat.rebounds":"Zbirki","form.stat.assists":"Asysty","form.chart.title":"Trend: {stat} (rednia kroczca z 5 meczw)","form.tooltip.vsOpponent":"vs {opponent}","form.tooltip.actualLabel":"Rzeczywiste","form.tooltip.avgLabel":"r. z 5 meczw","form.tooltip.minutes":"Minuty: {minutes}","form.legend.actual":"Rzeczywiste","form.legend.rollingAvg":"rednia kroczca","form.table.titleRecent":"Ostatnie mecze","form.table.header.date":"Data","form.table.header.opponent":"Rywal","form.table.header.pts":"PTS","form.table.header.reb":"REB","form.table.header.ast":"AST","form.table.header.min":"MIN","form.table.cell.vs":"vs {opponent}","bulls.loading":"adowanie analizy Bulls...","bulls.header.title":"Analiza Chicago Bulls","bulls.header.liveData":"Dane na ywo","bulls.overview.overallRecord":"Bilans","bulls.overview.atsRecord":"Bilans ATS","bulls.overview.ouRecord":"Bilans O/U","bulls.overview.last5Games":"Ostatnie 5 meczw","bulls.sections.playerAnalysis":"Analiza zawodnikw","bulls.sections.nextGame":"Nastpny mecz","bulls.nextGame.vsOpponent":"vs {opponent}","bulls.nextGame.dateLocation":"{date}  {location}","bulls.nextGame.location.home":"Dom","bulls.nextGame.location.away":"Wyjazd","bulls.nextGame.spread":"Handicap: {value}","bulls.nextGame.total":"Suma: {value}","bulls.nextGame.prediction":"Prognoza","bulls.nextGame.confidence":"Pewno: {value}%","bulls.nextGame.positionalMatchups":"Matchupy pozycyjne","bulls.matchups.advantage":"Przewaga","bulls.matchups.disadvantage":"Niekorzystnie","bulls.matchups.even":"Rwno","bulls.trends.title":"Ostatnie trendy (ostatnie {games} meczw)","bulls.trends.pace":"Tempo","bulls.trends.offRtg":"OffRtg","bulls.trends.defRtg":"DefRtg","bulls.trends.threePointPct":"3P%","bulls.trends.freeThrowPct":"FT%","bulls.risk.title":"Czynniki ryzyka","bulls.risk.backToBack.title":"Mecz back-to-back","bulls.risk.backToBack.desc":"Mecz back-to-back: {isBackToBack}","bulls.risk.homeCourt.title":"Przewaga wasnego parkietu","bulls.risk.homeCourt.desc":"Wasny parkiet. Bilans u siebie: {record}","bulls.form.excellent":"wietna","bulls.form.good":"Dobra","bulls.form.average":"Przecitna","bulls.form.poor":"Saba","bulls.picks.cover":"COVER","bulls.picks.over":"OVER","bulls.picks.under":"UNDER","bulls.fallback.unknownName":"Nieznany","bulls.fallback.playerRole":"Zawodnik"}},dn="app.language",un=({children:e})=>{const[t,s]=g.useState(()=>{try{const e=localStorage.getItem(dn);if("pl"===e||"en"===e)return e}catch(e){}return("undefined"!=typeof navigator?navigator.language:"").toLowerCase().startsWith("pl")?"pl":"en"});g.useEffect(()=>{try{localStorage.setItem(dn,t)}catch(e){}"undefined"!=typeof document&&(document.documentElement.lang=t)},[t]);const r=g.useCallback(e=>{s(e)},[]),a=g.useCallback((e,s)=>{var r,a;const n=cn.en;return((e,t)=>t?e.replace(/\{(\w+)\}/g,(e,s)=>{const r=t[s];return null==r?e:String(r)}):e)(null!=(a=null!=(r=cn[t][e])?r:n[e])?a:e,s)},[t]),n=g.useMemo(()=>({language:t,setLanguage:r,locale:"pl"===t?"pl-PL":"en-US",t:a,supportedLanguages:on}),[t,r,a]);return ce.jsx(Ca.Provider,{value:n,children:e})};ue.createRoot(document.getElementById("root")).render(ce.jsx(g.StrictMode,{children:ce.jsx(un,{children:ce.jsx(ln,{})})}));export{me as _};
